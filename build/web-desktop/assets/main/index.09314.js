window.__require=function e(t,a,n){function o(i,c){if(!a[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var p=a[i]={exports:{}};t[i][0].call(p.exports,function(e){return o(t[i][1][e]||e)},p,p.exports,e,t,a,n)}return a[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<n.length;i++)o(n[i]);return o}({CameraManager:[function(e,t,a){"use strict";cc._RF.push(t,"d1d32apg0lNfqbbMZXmlqL9","CameraManager");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.FollowTarget=null,t}return o(t,e),t.prototype.start=function(){},t.prototype.update=function(){if(this.FollowTarget)if(null!=cc.find("End")){var e=this.FollowTarget.position.x;e<-480?e=-480:e>480&&(e=480),this.node.setPosition(e,0)}else this.node.setPosition(this.FollowTarget.position.x,this.FollowTarget.position.y)},r([s(cc.Node)],t.prototype,"FollowTarget",void 0),r([c],t)}(cc.Component);a.default=l,cc._RF.pop()},{}],ChangingGround:[function(e,t,a){"use strict";cc._RF.push(t,"08d59k9OzlBQr8ORl+4+7CF","ChangingGround");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../GameManager/GameManagerS1"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameManager=null,t.FrameDefault=null,t.Frame1=null,t.Frame2=null,t.Frame3=null,t.Frame4=null,t.Frame5=null,t.gamestart=!1,t.owner=0,t.fadeOuttime=.05,t.fadeIntime=.2,t}return o(t,e),t.prototype.start=function(){this.GameComponent=this.gameManager.getComponent(i.default),this.SpriteComponent=this.node.getComponent(cc.Sprite),this.SpriteComponent.spriteFrame=this.FrameDefault},t.prototype.onBeginContact=function(e,t,a){var n,o=this;n=cc.sequence(cc.fadeTo(this.fadeOuttime,0),cc.fadeTo(this.fadeIntime,75),cc.fadeTo(10*this.fadeIntime,175)),"player1"==a.node.name?(1!=this.owner&&(this.node.runAction(n),this.GameComponent.UpdateScore(1,1),this.GameComponent.UpdateScore(this.owner,-1)),this.owner=1,this.scheduleOnce(function(){o.SpriteComponent.spriteFrame=o.Frame1},this.fadeOuttime)):"player2"==a.node.name?(2!=this.owner&&(this.node.runAction(n),this.GameComponent.UpdateScore(2,1),this.GameComponent.UpdateScore(this.owner,-1)),this.owner=2,this.scheduleOnce(function(){o.SpriteComponent.spriteFrame=o.Frame2},this.fadeOuttime)):"player3"==a.node.name?(3!=this.owner&&(this.node.runAction(n),this.GameComponent.UpdateScore(3,1),this.GameComponent.UpdateScore(this.owner,-1)),this.owner=3,this.scheduleOnce(function(){o.SpriteComponent.spriteFrame=o.Frame3},this.fadeOuttime)):"player4"==a.node.name?(4!=this.owner&&(this.node.runAction(n),this.GameComponent.UpdateScore(4,1),this.GameComponent.UpdateScore(this.owner,-1)),this.owner=4,this.scheduleOnce(function(){o.SpriteComponent.spriteFrame=o.Frame4},this.fadeOuttime)):"player5"==a.node.name&&(5!=this.owner&&(this.node.runAction(n),this.GameComponent.UpdateScore(5,1),this.GameComponent.UpdateScore(this.owner,-1)),this.owner=5,this.scheduleOnce(function(){o.SpriteComponent.spriteFrame=o.Frame5},this.fadeOuttime))},r([l(cc.Node)],t.prototype,"gameManager",void 0),r([l(cc.SpriteFrame)],t.prototype,"FrameDefault",void 0),r([l(cc.SpriteFrame)],t.prototype,"Frame1",void 0),r([l(cc.SpriteFrame)],t.prototype,"Frame2",void 0),r([l(cc.SpriteFrame)],t.prototype,"Frame3",void 0),r([l(cc.SpriteFrame)],t.prototype,"Frame4",void 0),r([l(cc.SpriteFrame)],t.prototype,"Frame5",void 0),r([s],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../GameManager/GameManagerS1":"GameManagerS1"}],GameEndManager:[function(e,t,a){"use strict";cc._RF.push(t,"f429aoC+2VCaocysDVrkRXi","GameEndManager");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../Player"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadingBG=null,t.BGM=null,t.Text1=null,t.Text2=null,t.WinnerLabel=null,t.current_user_number=0,t.physicManager=null,t.Round1_winner=0,t.Round2_winner=0,t.Round3_winner=0,t.Round4_winner=0,t}return o(t,e),t.prototype.onLoad=function(){var e=this;this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,this.physicManager.gravity=cc.v2(0,0);var t=firebase.auth().currentUser.uid,a=0;firebase.database().ref("user_info/"+t).once("value",function(e){a=e.val().player_number}),this.scheduleOnce(function(){e.current_user_number=a},2.5)},t.prototype.start=function(){var e=this;this.loadingBG.active=!0;var t=cc.find("Canvas/PlayerContainer/player1"),a=cc.find("Canvas/PlayerContainer/player2"),n=cc.find("Canvas/PlayerContainer/player3"),o=cc.find("Canvas/PlayerContainer/player4"),r=cc.find("Canvas/PlayerContainer/player5");t&&(t.getComponent(i.default).moveable=!1),a&&(r.getComponent(i.default).moveable=!1),n&&(r.getComponent(i.default).moveable=!1),o&&(r.getComponent(i.default).moveable=!1),r&&(r.getComponent(i.default).moveable=!1),this.Init_player(),this.FindRoundWinner(),this.scheduleOnce(function(){e.loadingBG.active=!1,t&&(t.getComponent(i.default).moveable=!0),a&&(r.getComponent(i.default).moveable=!0),n&&(r.getComponent(i.default).moveable=!0),o&&(r.getComponent(i.default).moveable=!0),r&&(r.getComponent(i.default).moveable=!0),cc.audioEngine.playMusic(e.BGM,!0),cc.audioEngine.setMusicVolume(.2),e.Text1Action(),e.Text2Action()},2.5)},t.prototype.update=function(){},t.prototype.Text1Action=function(){var e,t=cc.sequence(cc.scaleTo(.5,1.1),cc.scaleTo(.5,1));e=cc.repeatForever(t),this.Text1.runAction(e)},t.prototype.Text2Action=function(){var e,t=cc.sequence(cc.scaleTo(.5,1.1),cc.scaleTo(.5,1));e=cc.repeatForever(t),this.Text2.runAction(e)},t.prototype.Init_player=function(){for(var e=function(e){firebase.database().ref("player/player"+e+"_islogin").once("value",function(t){1==t.val()&&(cc.find("Canvas/PlayerContainer/player"+e).active=!0,firebase.database().ref("player_data/player"+e+"/state_value/moveDirX").set({Dir:0}),firebase.database().ref("player_data/player"+e+"/state_value/moveDirY").set({Dir:0}),firebase.database().ref("player_data/player"+e+"/state_value/premoveDirX").set({Dir:0}),firebase.database().ref("player_data/player"+e+"/state_value/moveable").set({moveable:"true"}),firebase.database().ref("player_data/player"+e+"/state_value/X").set({x:-736}),firebase.database().ref("player_data/player"+e+"/state_value/Y").set({y:-176}))})},t=1;t<=5;t++)e(t)},t.prototype.FindRoundWinner=function(){for(var e=this,t=function(t){firebase.database().ref("GameResult/Round1/player"+t).once("value",function(a){null!=a.val()&&80==a.val()&&(e.Round1_winner=t)})},a=1;a<=5;a++)t(a);var n=function(t){firebase.database().ref("GameResult/Round2/player"+t).once("value",function(a){null!=a.val()&&0==a.val()&&(e.Round2_winner=t)})};for(a=1;a<=5;a++)n(a);var o=function(t){firebase.database().ref("GameResult/Round3/player"+t).once("value",function(a){null!=a.val()&&80==a.val()&&(e.Round3_winner=t)})};for(a=1;a<=5;a++)o(a);var r=[0,0,0,0,0],i=function(e){firebase.database().ref("player_data/player"+e+"/game2_state/money").once("value",function(t){null!=t.val()&&(r[e-1]=t.val())})};for(a=1;a<=5;a++)i(a);this.scheduleOnce(function(){for(var t,a=0,n=0;n<=4;n++){a=0;for(var o=0;o<=4;o++)r[n]>=r[o]&&a++;5==a&&(e.Round4_winner=n+1)}console.log("Winner",e.Round1_winner,e.Round2_winner,e.Round3_winner,e.Round4_winner),(t=cc.find("Canvas/ObjContainer/Round1/Champ/P"+e.Round1_winner))&&(t.active=!0),(t=cc.find("Canvas/ObjContainer/Round2/Champ/P"+e.Round2_winner))&&(t.active=!0),(t=cc.find("Canvas/ObjContainer/Round3/Champ/P"+e.Round3_winner))&&(t.active=!0),(t=cc.find("Canvas/ObjContainer/Round4/Champ/P"+e.Round4_winner))&&(t.active=!0),firebase.database().ref("user_list").once("value",function(t){t.forEach(function(t){t.val().player_number==e.Round4_winner&&(e.WinnerLabel.getComponent(cc.Label).string=t.val().email)})})},1.5)},r([l(cc.Node)],t.prototype,"loadingBG",void 0),r([l(cc.AudioClip)],t.prototype,"BGM",void 0),r([l(cc.Node)],t.prototype,"Text1",void 0),r([l(cc.Node)],t.prototype,"Text2",void 0),r([l(cc.Node)],t.prototype,"WinnerLabel",void 0),r([s],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../Player":"Player"}],GameManagerCoin:[function(e,t,a){"use strict";cc._RF.push(t,"ff98bC1epdGEbsF+k8OyuYC","GameManagerCoin");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./PlayerCoin"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadingBG=null,t.GameoverBG=null,t.TimerLabel=null,t.coinLabel=null,t.killCountLabel=null,t.CoinSound=null,t.ThiefSound=null,t.StealCoinSound=null,t.BGM=null,t.ScoreSound=null,t.GameOverSound=null,t.CoinContainer=null,t.GameTime=120,t.player_node1=null,t.player_node2=null,t.player_node3=null,t.player_node4=null,t.player_node5=null,t.physicManager=null,t.current_user_number=0,t.timer=0,t.timeUp=!1,t.current_coin=0,t.killcount=0,t.killtimer=0,t.cooldown=!1,t}return o(t,e),t.prototype.onLoad=function(){this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,this.physicManager.gravity=cc.v2(0,0);var e=firebase.auth().currentUser.uid,t=this;firebase.database().ref("user_info/"+e).once("value",function(e){null!=e.val()&&(t.current_user_number=e.val().player_number,console.log("Game Coin current_user_number is ",t.current_user_number))})},t.prototype.start=function(){var e=this;this.loadingBG.active=!0,this.player_node1=cc.find("Canvas/PlayerContainer/player1"),this.player_node2=cc.find("Canvas/PlayerContainer/player2"),this.player_node3=cc.find("Canvas/PlayerContainer/player3"),this.player_node4=cc.find("Canvas/PlayerContainer/player4"),this.player_node5=cc.find("Canvas/PlayerContainer/player5"),this.player_node1&&(this.player_node1.getComponent(i.default).moveable=!1),this.player_node2&&(this.player_node2.getComponent(i.default).moveable=!1),this.player_node3&&(this.player_node3.getComponent(i.default).moveable=!1),this.player_node4&&(this.player_node4.getComponent(i.default).moveable=!1),this.player_node5&&(this.player_node5.getComponent(i.default).moveable=!1),this.scheduleOnce(function(){e.loadingBG.active=!1,e.player_node1&&(e.player_node1.getComponent(i.default).moveable=!0),e.player_node2&&(e.player_node2.getComponent(i.default).moveable=!0),e.player_node3&&(e.player_node3.getComponent(i.default).moveable=!0),e.player_node4&&(e.player_node4.getComponent(i.default).moveable=!0),e.player_node5&&(e.player_node5.getComponent(i.default).moveable=!0),e.CoinContainer.active=!0,e.TimerStart(),cc.audioEngine.playMusic(e.BGM,!0),cc.audioEngine.setMusicVolume(2)},3),this.Init_player()},t.prototype.Init_player=function(){for(var e=[272,-672,-957,607,1680],t=[96,697,-893,-682,433],a=function(a){firebase.database().ref("player/player"+a+"_islogin").once("value",function(n){1==n.val()&&(cc.find("Canvas/PlayerContainer/player"+a).active=!0,firebase.database().ref("player_data/player"+a+"/state_value/moveDirX").set({Dir:0}),firebase.database().ref("player_data/player"+a+"/state_value/moveDirY").set({Dir:0}),firebase.database().ref("player_data/player"+a+"/state_value/premoveDirX").set({Dir:0}),firebase.database().ref("player_data/player"+a+"/state_value/moveable").set({moveable:"true"}),firebase.database().ref("player_data/player"+a+"/state_value/X").set({x:e[a-1]}),firebase.database().ref("player_data/player"+a+"/state_value/Y").set({y:t[a-1]}),firebase.database().ref("GameCoin/player"+a).set({coin:0,state:"player"}))})},n=1;n<=5;n++)a(n)},t.prototype.TimerStart=function(){this.timer=this.GameTime,this.TimerLabel.getComponent(cc.Label).string=this.GameTime.toString(),this.schedule(this.UpdateTimer,1)},t.prototype.UpdateTimer=function(){this.timeUp||(this.timer>0?this.timer+=-1:0==this.timer&&(this.timeUp=!0),this.TimerLabel.getComponent(cc.Label).string=this.timer.toString(),this.timeUp&&this.GameOver())},t.prototype.GameOver=function(){var e=this;cc.audioEngine.stopMusic(),this.scheduleOnce(function(){cc.audioEngine.playEffect(e.GameOverSound,!1)},.5),this.GameoverBG.active=!0;for(var t=this.GameoverBG.getChildByName("Score"),a=t.getChildByName("Scorepoint").getComponent(cc.Label),n=t.getChildByName("Point").getComponent(cc.Label),o=[0,0,0,0,0],r=function(e){firebase.database().ref("GameCoin/player"+e).once("value",function(t){null!=t.val()&&(console.log("player",e,"Coin",t.val().coin),o[e-1]=t.val().coin)})},i=1;i<=5;i++)r(i);this.scheduleOnce(function(){t.active=!0;var n="\n";n+=o[0]+"\n",n+=o[1]+"\n",n+=o[2]+"\n",n+=o[3]+"\n",n+=o[4],a.string=n,cc.audioEngine.playEffect(e.ScoreSound,!1)},3),this.scheduleOnce(function(){for(var t=[],a=0,r=0;r<5;r++){a=0;for(var i=0;i<5;i++)o[r]<o[i]&&a++;0!=o[r]?t.push(80-20*a):t.push(0)}var c="";for(r=0;r<5;r++)c+="\n+ "+t[r].toString();n.string=c,cc.audioEngine.playEffect(e.ScoreSound,!1),firebase.database().ref("GameResult/Round3").set({player1:t[0],player2:t[1],player3:t[2],player4:t[3],player5:t[4]})},5),this.scheduleOnce(function(){cc.director.loadScene("GameStage5")},10)},t.prototype.UpdateKillCount=function(e){this.killcount+=e,this.killcount<0&&(this.killcount=0),this.killCountLabel.getComponent(cc.Label).string=this.killcount.toString()},t.prototype.BecomeThief=function(e){var t=this;"player"+this.current_user_number.toString()==e&&(this.killcount<=0||this.cooldown||this.timer<20?console.log("Can't be thief"):(console.log("player",this.current_user_number,"BecomeThief!"),this.ThiefSound&&cc.audioEngine.playEffect(this.ThiefSound,!1),this.cooldown=!0,this.killtimer=30,this.killcount+=-1,this.killCountLabel.getComponent(cc.Label).string=this.killcount.toString(),this.schedule(this.CooldownTimer,1),firebase.database().ref("GameCoin/player"+this.current_user_number).update({state:"thief"}),this.scheduleOnce(function(){firebase.database().ref("GameCoin/player"+t.current_user_number).update({state:"player"});var e=t;firebase.database().ref("GameCoin/player"+e.current_user_number).once("value",function(t){var a=t.val().coin;e.current_coin!=a&&e.StealCoinSound&&cc.audioEngine.playEffect(e.StealCoinSound,!1),e.current_coin=a,e.coinLabel.getComponent(cc.Label).string=a.toString()})},15)))},t.prototype.CooldownTimer=function(){this.killtimer+=-1,this.killtimer<=0&&(console.log("BecomeThief Cooldown!"),this.killtimer=0,this.cooldown=!1,this.unschedule(this.CooldownTimer))},t.prototype.UpdateCoin=function(e,t){if("player"+this.current_user_number.toString()==t){if(this.current_coin%10==9){this.UpdateKillCount(1);var a=cc.find("Canvas/PlayerContainer/player"+this.current_user_number);a.getComponent(i.default).playerSpeed*=.9,a.runAction(cc.scaleBy(.5,1.1))}this.CoinSound&&cc.audioEngine.playEffect(this.CoinSound,!1);var n=this;firebase.database().ref("GameCoin/player"+n.current_user_number).once("value",function(t){var a=t.val().coin;n.current_coin=a+e,n.coinLabel.getComponent(cc.Label).string=n.current_coin.toString(),firebase.database().ref("GameCoin/player"+n.current_user_number).update({coin:n.current_coin})})}},t.prototype.playerDie=function(e){if("player"+this.current_user_number.toString()==e){this.current_coin=0,firebase.database().ref("GameCoin/player"+this.current_user_number).update({coin:0}),this.coinLabel.getComponent(cc.Label).string=this.current_coin.toString();var t,a=cc.find("Canvas/PlayerContainer/player"+this.current_user_number);a.getComponent(i.default).playerSpeed=150,a.runAction(cc.scaleTo(.1,1)),a.getComponent(i.default).rigidbody.linearVelocity=cc.v2(0,0);var n=cc.sequence(cc.fadeOut(.3),cc.fadeIn(.3));t=cc.repeat(n,5),a.runAction(t),this.scheduleOnce(function(){})}},r([l(cc.Node)],t.prototype,"loadingBG",void 0),r([l(cc.Node)],t.prototype,"GameoverBG",void 0),r([l(cc.Node)],t.prototype,"TimerLabel",void 0),r([l(cc.Node)],t.prototype,"coinLabel",void 0),r([l(cc.Node)],t.prototype,"killCountLabel",void 0),r([l(cc.AudioClip)],t.prototype,"CoinSound",void 0),r([l(cc.AudioClip)],t.prototype,"ThiefSound",void 0),r([l(cc.AudioClip)],t.prototype,"StealCoinSound",void 0),r([l(cc.AudioClip)],t.prototype,"BGM",void 0),r([l(cc.AudioClip)],t.prototype,"ScoreSound",void 0),r([l(cc.AudioClip)],t.prototype,"GameOverSound",void 0),r([l(cc.Node)],t.prototype,"CoinContainer",void 0),r([l()],t.prototype,"GameTime",void 0),r([s],t)}(cc.Component);a.default=p,cc._RF.pop()},{"./PlayerCoin":"PlayerCoin"}],GameManagerS1:[function(e,t,a){"use strict";cc._RF.push(t,"da618deVopI84CxsiRz16Xc","GameManagerS1");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../Player"),c=e("../Game1Object/ChangingGround"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CG=null,t.scorepoint=null,t.loadingBG=null,t.GameoverBG=null,t.TimerLabel=null,t.GameTime=120,t.WidthPixels=1,t.HeightPixels=10,t.BGM=null,t.ScoreSound=null,t.GameOverSound=null,t.current_user_number=0,t.player1_score=0,t.player2_score=0,t.player3_score=0,t.player4_score=0,t.player5_score=0,t.counting=0,t.physicManager=null,t.timer=0,t.timeUp=!1,t}return o(t,e),t.prototype.onLoad=function(){var e=this;this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,this.physicManager.gravity=cc.v2(0,0);var t=firebase.auth().currentUser.uid;firebase.database().ref("player_data").once("value",function(e){e.forEach(function(e){var t=e.key;"player1"!=t&&"player2"!=t&&"player3"!=t&&"player4"!=t&&"player5"!=t||(console.log("Initial player:",t),firebase.database().ref("player_data/"+t+"/state_value/moveDirX").set({Dir:0}),firebase.database().ref("player_data/"+t+"/state_value/moveDirY").set({Dir:0}),firebase.database().ref("player_data/"+t+"/state_value/premoveDirX").set({Dir:0}),firebase.database().ref("player_data/"+t+"/state_value/moveable").set({moveable:"true"}),firebase.database().ref("player_data/"+t+"/state_value/X").set({x:96}),firebase.database().ref("player_data/"+t+"/state_value/Y").set({y:352}))})});var a=0;firebase.database().ref("user_info/"+t).once("value",function(e){a=e.val().player_number}),this.scheduleOnce(function(){e.current_user_number=a},2.5)},t.prototype.start=function(){var e=this;this.loadingBG.active=!0;var t=cc.find("Canvas/PlayerContainer/player1"),a=cc.find("Canvas/PlayerContainer/player2"),n=cc.find("Canvas/PlayerContainer/player3"),o=cc.find("Canvas/PlayerContainer/player4"),r=cc.find("Canvas/PlayerContainer/player5");t&&(t.getComponent(i.default).moveable=!1),a&&(r.getComponent(i.default).moveable=!1),n&&(r.getComponent(i.default).moveable=!1),o&&(r.getComponent(i.default).moveable=!1),r&&(r.getComponent(i.default).moveable=!1),this.Init_player(),this.scheduleOnce(function(){e.CreateCG()},1.5),this.scheduleOnce(function(){e.loadingBG.active=!1,t&&(t.getComponent(i.default).moveable=!0),a&&(r.getComponent(i.default).moveable=!0),n&&(r.getComponent(i.default).moveable=!0),o&&(r.getComponent(i.default).moveable=!0),r&&(r.getComponent(i.default).moveable=!0),e.TimerStart(),cc.audioEngine.playMusic(e.BGM,!0),cc.audioEngine.setMusicVolume(.5)},2.5),firebase.database().ref("GameOccupyLand/playerScore").set({player1:0,player2:0,player3:0,player4:0,player5:0}),this.schedule(this.UpdateScoreOnFirebase,.2)},t.prototype.update=function(){},t.prototype.Init_player=function(){for(var e=function(e){firebase.database().ref("player/player"+e+"_islogin").once("value",function(t){1==t.val()&&(cc.find("Canvas/PlayerContainer/player"+e).active=!0,firebase.database().ref("player_data/player"+e+"/state_value/moveDirX").set({Dir:0}),firebase.database().ref("player_data/player"+e+"/state_value/moveDirY").set({Dir:0}),firebase.database().ref("player_data/player"+e+"/state_value/premoveDirX").set({Dir:0}),firebase.database().ref("player_data/player"+e+"/state_value/moveable").set({moveable:"true"}),firebase.database().ref("player_data/player"+e+"/state_value/X").set({x:96}),firebase.database().ref("player_data/player"+e+"/state_value/Y").set({y:352}))})},t=1;t<=5;t++)e(t)},t.prototype.CreateCG=function(){var e,t,a,n,o,r;a=this.WidthPixels,n=this.HeightPixels;var i=cc.find("Canvas/MapObjContainer");for(e=0;e<a;e++)for(t=0;t<n;t++)if(r=32*t+16-800,!((o=32*e+16-1152)>-64&&o<256&&r<512&&r>192||784==o&&144==r||816==o&&144==r||784==o&&-272==r||816==o&&-272==r||-496==o&&304==r||-464==o&&-496==r||-496==o&&-496==r||-976==o&&208==r||-944==o&&208==r||-784==o&&48==r||-752==o&&48==r||-976==o&&-208==r||-944==o&&-208==r||0==o&&0==r||0==o&&0==r)){var s=cc.instantiate(this.CG);s.setPosition(o,r),s.getComponent(c.default).gameManager=this.node,i.addChild(s)}},t.prototype.TimerStart=function(){this.timer=this.GameTime,this.TimerLabel.getComponent(cc.Label).string=this.GameTime.toString(),this.schedule(this.UpdateTimer,1)},t.prototype.UpdateTimer=function(){this.timeUp||(this.timer>0?this.timer+=-1:0==this.timer&&(this.timeUp=!0),this.TimerLabel.getComponent(cc.Label).string=this.timer.toString(),this.timeUp&&this.GameOver())},t.prototype.GameOver=function(){var e=this;cc.audioEngine.stopMusic(),this.scheduleOnce(function(){cc.audioEngine.playEffect(e.GameOverSound,!1)},.5),this.GameoverBG.active=!0;var t=this.GameoverBG.getChildByName("Score"),a=t.getChildByName("Scorepoint").getComponent(cc.Label),n=t.getChildByName("Point").getComponent(cc.Label),o=0,r=0,i=0,c=0,s=0;firebase.database().ref("GameOccupyLand/playerScore").once("value",function(e){o=e.val().player1,r=e.val().player2,i=e.val().player3,c=e.val().player4,s=e.val().player5}),this.scheduleOnce(function(){t.active=!0;var n="\n";n+=o.toString()+"\n",n+=r.toString()+"\n",n+=i.toString()+"\n",n+=c.toString()+"\n",n+=s.toString(),a.string=n,cc.audioEngine.playEffect(e.ScoreSound,!1)},3),this.scheduleOnce(function(){var t=[],a=[];t.push(o),t.push(r),t.push(i),t.push(c),t.push(s);for(var l=0,p=0;p<5;p++){l=0;for(var u=0;u<5;u++)t[p]<t[u]&&l++;0!=t[p]?a.push(80-20*l):a.push(0)}var d="";for(p=0;p<5;p++)d+="\n+ "+a[p].toString();n.string=d,cc.audioEngine.playEffect(e.ScoreSound,!1),firebase.database().ref("GameResult/Round1").set({player1:a[0],player2:a[1],player3:a[2],player4:a[3],player5:a[4]})},5),this.scheduleOnce(function(){cc.director.loadScene("GameStage2")},10)},t.prototype.UpdateScore=function(e,t){1==e&&1==this.current_user_number?this.player1_score+=t:2==e&&2==this.current_user_number?this.player2_score+=t:3==e&&3==this.current_user_number?this.player3_score+=t:4==e&&4==this.current_user_number?this.player4_score+=t:5==e&&5==this.current_user_number&&(this.player5_score+=t)},t.prototype.UpdateScoreOnFirebase=function(){var e=this,t=this.player1_score,a=this.player2_score,n=this.player3_score,o=this.player4_score,r=this.player5_score,i=this.current_user_number;1==i?firebase.database().ref("GameOccupyLand/playerScore").update({player1:t}):2==i?firebase.database().ref("GameOccupyLand/playerScore").update({player2:a}):3==i?firebase.database().ref("GameOccupyLand/playerScore").update({player3:n}):4==i?firebase.database().ref("GameOccupyLand/playerScore").update({player4:o}):5==i&&firebase.database().ref("GameOccupyLand/playerScore").update({player5:r}),firebase.database().ref("GameOccupyLand/playerScore").once("value",function(e){t=e.val().player1,a=e.val().player2,n=e.val().player3,o=e.val().player4,r=e.val().player5}),this.scheduleOnce(function(){if(1==i){var c="\n";c+=e.player1_score.toString()+"\n",c+=a.toString()+"\n",c+=n.toString()+"\n",c+=o.toString()+"\n",c+=r.toString(),e.scorepoint.getComponent(cc.Label).string=c}else 2==i?(c="\n",c+=t.toString()+"\n",c+=e.player2_score.toString()+"\n",c+=n.toString()+"\n",c+=o.toString()+"\n",c+=r.toString(),e.scorepoint.getComponent(cc.Label).string=c):3==i?(c="\n",c+=t.toString()+"\n",c+=a.toString()+"\n",c+=e.player3_score.toString()+"\n",c+=o.toString()+"\n",c+=r.toString(),e.scorepoint.getComponent(cc.Label).string=c):4==i?(c="\n",c+=t.toString()+"\n",c+=a.toString()+"\n",c+=n.toString()+"\n",c+=e.player4_score.toString()+"\n",c+=r.toString(),e.scorepoint.getComponent(cc.Label).string=c):5==i&&(c="\n",c+=t.toString()+"\n",c+=a.toString()+"\n",c+=n.toString()+"\n",c+=o.toString()+"\n",c+=e.player5_score.toString(),e.scorepoint.getComponent(cc.Label).string=c)},2)},r([p(cc.Prefab)],t.prototype,"CG",void 0),r([p(cc.Node)],t.prototype,"scorepoint",void 0),r([p(cc.Node)],t.prototype,"loadingBG",void 0),r([p(cc.Node)],t.prototype,"GameoverBG",void 0),r([p(cc.Node)],t.prototype,"TimerLabel",void 0),r([p()],t.prototype,"GameTime",void 0),r([p()],t.prototype,"WidthPixels",void 0),r([p()],t.prototype,"HeightPixels",void 0),r([p(cc.AudioClip)],t.prototype,"BGM",void 0),r([p(cc.AudioClip)],t.prototype,"ScoreSound",void 0),r([p(cc.AudioClip)],t.prototype,"GameOverSound",void 0),r([l],t)}(cc.Component);a.default=u,cc._RF.pop()},{"../Game1Object/ChangingGround":"ChangingGround","../Player":"Player"}],GameManagerS2:[function(e,t,a){"use strict";cc._RF.push(t,"6c5315gzDRHgb+CuJr61tW8","GameManagerS2");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../Game2Object/PlayerGhost"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadingBG=null,t.SpaceBG=null,t.GameoverBG=null,t.TimerLabel=null,t.GhostLabel=null,t.StartText=null,t.BGM1=null,t.BGM2=null,t.ScoreSound=null,t.GameOverSound=null,t.becomeGhostEffect=null,t.GameTime=120,t.GhostSpeed=200,t.PlayerSpeed=100,t.physicManager=null,t.counting=0,t.player_array=[],t.player_node1=null,t.player_node2=null,t.player_node3=null,t.player_node4=null,t.player_node5=null,t.current_user_number=0,t.P_state=["","player","player","player","player","player"],t.P_prevstate=["","player","player","player","player","player"],t.cooldown=!1,t.timer=0,t.timeUp=!1,t}return o(t,e),t.prototype.onLoad=function(){this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,this.physicManager.gravity=cc.v2(0,0);var e=firebase.auth().currentUser.uid,t=this;firebase.database().ref("user_info/"+e).once("value",function(e){t.current_user_number=e.val().player_number})},t.prototype.start=function(){var e,t=this;this.loadingBG.active=!0,this.player_node1=cc.find("Canvas/PlayerContainer/player1"),this.player_node2=cc.find("Canvas/PlayerContainer/player2"),this.player_node3=cc.find("Canvas/PlayerContainer/player3"),this.player_node4=cc.find("Canvas/PlayerContainer/player4"),this.player_node5=cc.find("Canvas/PlayerContainer/player5"),this.player_node1&&(this.player_node1.getComponent(i.default).moveable=!1),this.player_node2&&(this.player_node2.getComponent(i.default).moveable=!1),this.player_node3&&(this.player_node3.getComponent(i.default).moveable=!1),this.player_node4&&(this.player_node4.getComponent(i.default).moveable=!1),this.player_node5&&(this.player_node5.getComponent(i.default).moveable=!1),this.scheduleOnce(function(){t.loadingBG.active=!1,t.player_node1&&(t.player_node1.getComponent(i.default).moveable=!0),t.player_node2&&(t.player_node2.getComponent(i.default).moveable=!0),t.player_node3&&(t.player_node3.getComponent(i.default).moveable=!0),t.player_node4&&(t.player_node4.getComponent(i.default).moveable=!0),t.player_node5&&(t.player_node5.getComponent(i.default).moveable=!0),t.TimerStart(),t.StartText.active=!0;var e=cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5),cc.fadeOut(.5),cc.fadeIn(.5),cc.fadeOut(.5));t.StartText.runAction(e),cc.audioEngine.playMusic(t.BGM2,!0),cc.audioEngine.setMusicVolume(3)},2.5),this.Init_player(),this.scheduleOnce(function(){t.choose_ghost(1,-1),t.schedule(t.GetPlayerState,.3),t.StartText.active=!1,1==t.current_user_number&&(cc.audioEngine.playMusic(t.BGM1,!0),cc.audioEngine.setMusicVolume(1))},5),this.scheduleOnce(function(){t.schedule(t.UpdateGroup,.3)},8),e=cc.repeatForever(cc.rotateBy(100,360)),this.SpaceBG.runAction(e)},t.prototype.choose_ghost=function(e,t){console.log("Who fuck? ID:",e),console.log("Player ARR:",this.player_array.length,this.player_array);for(var a=e,n=1;n<this.player_array.length+1;n++)if(n==a){firebase.database().ref("game2/player"+n).set({type:"ghost"});var o=cc.find("Canvas/PlayerContainer/player"+n),r=cc.instantiate(this.becomeGhostEffect);cc.find("Canvas/PlayerContainer/player"+n+"/Label").getComponent(cc.Label).string="ghost",o.setPosition(-176,752),o.group="ghost",o.active=!1,o.active=!0,o.setPosition(-176,752),o.getComponent(i.default).moveable=!1,o.getComponent(i.default).playerSpeed=this.GhostSpeed,o.parent.addChild(r),r.setPosition(o.position);var c=void 0,s=cc.sequence(cc.fadeTo(.25,120),cc.fadeIn(.25),cc.scaleBy(.1,1.1));c=cc.repeat(s,5),o.runAction(c),this.scheduleOnce(function(){o.getComponent(i.default).moveable=!0},3)}else if(n==t){firebase.database().ref("game2/player"+n).set({type:"player"}),cc.find("Canvas/PlayerContainer/player"+n+"/Label").getComponent(cc.Label).string="player";var l=cc.find("Canvas/PlayerContainer/player"+n);l.setPosition(240,-48),l.group="player",l.active=!1,l.active=!0,l.getComponent(i.default).moveable=!1,l.getComponent(i.default).playerSpeed=this.PlayerSpeed,l.runAction(cc.scaleTo(.1,1)),c=void 0,s=cc.sequence(cc.fadeTo(.25,120),cc.fadeIn(.25)),c=cc.repeat(s,5),l.runAction(c),this.scheduleOnce(function(){l.getComponent(i.default).moveable=!0},2.5)}else{firebase.database().ref("game2/player"+n).set({type:"player"}),cc.find("Canvas/PlayerContainer/player"+n+"/Label").getComponent(cc.Label).string="player";var p=cc.find("Canvas/PlayerContainer/player"+n);p.group="player",p.active=!1,p.active=!0,p.getComponent(i.default).playerSpeed=this.PlayerSpeed,p.runAction(cc.scaleTo(.5,1))}},t.prototype.Init_player=function(){for(var e=this,t=function(t){firebase.database().ref("player/player"+t+"_islogin").once("value",function(a){1==a.val()&&(e.player_array.push(t),cc.find("Canvas/PlayerContainer/player"+t).active=!0,firebase.database().ref("player_data/player"+t+"/state_value/moveDirX").set({Dir:0}),firebase.database().ref("player_data/player"+t+"/state_value/moveDirY").set({Dir:0}),firebase.database().ref("player_data/player"+t+"/state_value/premoveDirX").set({Dir:0}),firebase.database().ref("player_data/player"+t+"/state_value/moveable").set({moveable:"true"}),firebase.database().ref("player_data/player"+t+"/state_value/X").set({x:240}),firebase.database().ref("player_data/player"+t+"/state_value/Y").set({y:-48}))})},a=1;a<=5;a++)t(a)},t.prototype.TimerStart=function(){this.timer=this.GameTime,this.TimerLabel.getComponent(cc.Label).string=this.GameTime.toString(),this.schedule(this.UpdateTimer,1)},t.prototype.UpdateTimer=function(){this.timeUp||(this.timer>0?this.timer+=-1:0==this.timer&&(this.timeUp=!0),this.TimerLabel.getComponent(cc.Label).string=this.timer.toString(),this.timeUp&&this.GameOver())},t.prototype.GameOver=function(){var e=this;cc.audioEngine.stopMusic(),this.scheduleOnce(function(){cc.audioEngine.playEffect(e.GameOverSound,!1)},.5),this.GameoverBG.active=!0;var t=this.GameoverBG.getChildByName("Score"),a=t.getChildByName("Scorepoint").getComponent(cc.Label),n=t.getChildByName("Point").getComponent(cc.Label),o=this.P_state;this.scheduleOnce(function(){t.active=!0;var n="\n";n+=o[1]+"\n",n+=o[2]+"\n",n+=o[3]+"\n",n+=o[4]+"\n",n+=o[5],a.string=n,cc.audioEngine.playEffect(e.ScoreSound,!1)},3),this.scheduleOnce(function(){for(var t=[],a=1;a<=5;a++)"player"==o[a]?t.push(30):"ghost"==o[a]&&t.push(0);var r="";for(a=0;a<5;a++)r+="\n+ "+t[a].toString();n.string=r,cc.audioEngine.playEffect(e.ScoreSound,!1),firebase.database().ref("GameResult/Round2").set({player1:t[0],player2:t[1],player3:t[2],player4:t[3],player5:t[4]})},5),this.scheduleOnce(function(){cc.director.loadScene("GameStage4")},10)},t.prototype.GetPlayerState=function(){for(var e=this,t=function(t){firebase.database().ref("game2/player"+t).once("value",function(a){null!=a.val()&&(e.P_prevstate[t]=e.P_state[t],e.P_state[t]=a.val().type,"ghost"==a.val().type&&(e.GhostLabel.getComponent(cc.Label).string="P"+t.toString()))})},a=1;a<=5;a++)t(a)},t.prototype.UpdateGroup=function(){for(var e=this,t=this,a=-1,n=-1,o=!1,r=1;r<=5;r++)"player"==t.P_prevstate[r]&&"ghost"==t.P_state[r]?(console.log("player",r,"become ghost!!!!!!!!!"),a=r,o=!0):"ghost"==t.P_prevstate[r]&&"player"==t.P_state[r]&&(console.log("player",r,"back to player!!!!!!!!!"),n=r,o=!0);o&&!this.cooldown&&(this.cooldown=!0,this.choose_ghost(a,n),this.scheduleOnce(function(){e.cooldown=!1},3),a==this.current_user_number?(cc.audioEngine.stopMusic(),cc.audioEngine.playMusic(this.BGM1,!0),cc.audioEngine.setMusicVolume(1)):n==this.current_user_number&&(cc.audioEngine.stopMusic(),cc.audioEngine.playMusic(this.BGM2,!0),cc.audioEngine.setMusicVolume(3)))},r([l(cc.Node)],t.prototype,"loadingBG",void 0),r([l(cc.Node)],t.prototype,"SpaceBG",void 0),r([l(cc.Node)],t.prototype,"GameoverBG",void 0),r([l(cc.Node)],t.prototype,"TimerLabel",void 0),r([l(cc.Node)],t.prototype,"GhostLabel",void 0),r([l(cc.Node)],t.prototype,"StartText",void 0),r([l(cc.AudioClip)],t.prototype,"BGM1",void 0),r([l(cc.AudioClip)],t.prototype,"BGM2",void 0),r([l(cc.AudioClip)],t.prototype,"ScoreSound",void 0),r([l(cc.AudioClip)],t.prototype,"GameOverSound",void 0),r([l(cc.Prefab)],t.prototype,"becomeGhostEffect",void 0),r([l()],t.prototype,"GameTime",void 0),r([l()],t.prototype,"GhostSpeed",void 0),r([l()],t.prototype,"PlayerSpeed",void 0),r([s],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../Game2Object/PlayerGhost":"PlayerGhost"}],GameManagerS3:[function(e,t,a){"use strict";cc._RF.push(t,"9d81azu9dZAO7GUnWK5LBUa","GameManagerS3");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.physicManager=null,t}return o(t,e),t.prototype.onLoad=function(){this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,this.physicManager.gravity=cc.v2(0,0),firebase.auth().currentUser.uid,firebase.database().ref("player_data").once("value",function(e){e.forEach(function(e){var t=e.key;"player1"!=t&&"player2"!=t&&"player3"!=t&&"player4"!=t&&"player5"!=t||(console.log("Initial player:",t),firebase.database().ref("player_data/"+t+"/state_value/moveDirX").set({Dir:0}),firebase.database().ref("player_data/"+t+"/state_value/moveDirY").set({Dir:0}),firebase.database().ref("player_data/"+t+"/state_value/premoveDirX").set({Dir:0}),firebase.database().ref("player_data/"+t+"/state_value/moveable").set({moveable:"true"}),firebase.database().ref("player_data/"+t+"/state_value/X").set({x:16}),firebase.database().ref("player_data/"+t+"/state_value/Y").set({y:-48}))})})},t.prototype.start=function(){},r([c],t)}(cc.Component));a.default=s,cc._RF.pop()},{}],GameManagerS4:[function(e,t,a){"use strict";cc._RF.push(t,"427d7LXlGREOaRzwxYoAibI","GameManagerS4");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../Player"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadingBG=null,t.player_node1=null,t.player_node2=null,t.player_node3=null,t.player_node4=null,t.player_node5=null,t.physicManager=null,t}return o(t,e),t.prototype.onLoad=function(){this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,this.physicManager.gravity=cc.v2(0,0)},t.prototype.start=function(){var e=this;this.loadingBG.active=!0,this.player_node1=cc.find("Canvas/PlayerContainer/player1"),this.player_node2=cc.find("Canvas/PlayerContainer/player2"),this.player_node3=cc.find("Canvas/PlayerContainer/player3"),this.player_node4=cc.find("Canvas/PlayerContainer/player4"),this.player_node5=cc.find("Canvas/PlayerContainer/player5"),this.player_node1&&(this.player_node1.getComponent(i.default).moveable=!1),this.player_node2&&(this.player_node2.getComponent(i.default).moveable=!1),this.player_node3&&(this.player_node3.getComponent(i.default).moveable=!1),this.player_node4&&(this.player_node4.getComponent(i.default).moveable=!1),this.player_node5&&(this.player_node5.getComponent(i.default).moveable=!1),this.scheduleOnce(function(){e.loadingBG.active=!1,e.player_node1&&(e.player_node1.getComponent(i.default).moveable=!0),e.player_node2&&(e.player_node2.getComponent(i.default).moveable=!0),e.player_node3&&(e.player_node3.getComponent(i.default).moveable=!0),e.player_node4&&(e.player_node4.getComponent(i.default).moveable=!0),e.player_node5&&(e.player_node5.getComponent(i.default).moveable=!0)},2.5),this.Init_player()},t.prototype.Init_player=function(){for(var e=function(e){firebase.database().ref("player_data/player"+e).once("value",function(t){null!=t.val()&&(cc.find("Canvas/PlayerContainer/player"+e).active=!0,firebase.database().ref("player_data/player"+e+"/state_value/moveDirX").set({Dir:0}),firebase.database().ref("player_data/player"+e+"/state_value/moveDirY").set({Dir:0}),firebase.database().ref("player_data/player"+e+"/state_value/premoveDirX").set({Dir:0}),firebase.database().ref("player_data/player"+e+"/state_value/moveable").set({moveable:"true"}),firebase.database().ref("player_data/player"+e+"/state_value/X").set({x:-656}),firebase.database().ref("player_data/player"+e+"/state_value/Y").set({y:-16}))})},t=1;t<=5;t++)e(t)},r([l(cc.Node)],t.prototype,"loadingBG",void 0),r([s],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../Player":"Player"}],GameManagerS5:[function(e,t,a){"use strict";cc._RF.push(t,"ed3c4LMeTJPzosI2dJ4oVp0","GameManagerS5");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../Game5Object/special_player"),c=e("../Game5Object/battle_field"),s=e("../Game5Object/Mine_info_choice"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadingBG=null,t.GameoverBG=null,t.TimerLabel=null,t.GameTime=120,t.opponent_info_choice=null,t.Mine_info_choice=null,t.battle_field=null,t.BGM=null,t.ScoreSound=null,t.GameOverSound=null,t.panel=null,t.physicManager=null,t.flag=!1,t.counting=0,t.player_array=[],t.player_node1=null,t.player_node2=null,t.player_node3=null,t.player_node4=null,t.player_node5=null,t.fighting=!1,t.reset=!1,t.select_character=!1,t.timer=0,t.timeUp=!1,t}return o(t,e),t.prototype.onLoad=function(){this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,this.physicManager.gravity=cc.v2(0,0),firebase.auth().currentUser.uid},t.prototype.start=function(){var e=this;this.loadingBG.active=!0,this.player_node1=cc.find("Canvas/PlayerContainer/player1"),this.player_node2=cc.find("Canvas/PlayerContainer/player2"),this.player_node3=cc.find("Canvas/PlayerContainer/player3"),this.player_node4=cc.find("Canvas/PlayerContainer/player4"),this.player_node5=cc.find("Canvas/PlayerContainer/player5"),this.player_node1&&(this.player_node1.getComponent(i.default).moveable=!1),this.player_node2&&(this.player_node2.getComponent(i.default).moveable=!1),this.player_node3&&(this.player_node3.getComponent(i.default).moveable=!1),this.player_node4&&(this.player_node4.getComponent(i.default).moveable=!1),this.player_node5&&(this.player_node5.getComponent(i.default).moveable=!1),this.scheduleOnce(function(){e.loadingBG.active=!1,e.player_node1&&(e.player_node1.getComponent(i.default).moveable=!0),e.player_node2&&(e.player_node2.getComponent(i.default).moveable=!0),e.player_node3&&(e.player_node3.getComponent(i.default).moveable=!0),e.player_node4&&(e.player_node4.getComponent(i.default).moveable=!0),e.player_node5&&(e.player_node5.getComponent(i.default).moveable=!0),cc.audioEngine.playMusic(e.BGM,!0),cc.audioEngine.setMusicVolume(.5),e.TimerStart()},2.5)},t.prototype.TimerStart=function(){this.timer=this.GameTime,this.TimerLabel.getComponent(cc.Label).string=this.GameTime.toString(),this.schedule(this.UpdateTimer,1)},t.prototype.UpdateTimer=function(){this.timeUp||(this.timer>0?this.timer+=-1:0==this.timer&&(this.timeUp=!0),this.TimerLabel.getComponent(cc.Label).string=this.timer.toString(),this.timeUp&&this.GameOver())},t.prototype.GameOver=function(){var e=this;cc.audioEngine.stopMusic(),this.scheduleOnce(function(){cc.audioEngine.playEffect(e.GameOverSound,!1)},.5),this.GameoverBG.active=!0;for(var t=this.GameoverBG.getChildByName("Score"),a=t.getChildByName("Scorepoint").getComponent(cc.Label),n=[0,0,0,0,0],o=function(e){firebase.database().ref("player_data/player"+e+"/game2_state/money").once("value",function(t){null!=t.val()&&(n[e-1]=t.val())})},r=1;r<=5;r++)o(r);this.scheduleOnce(function(){t.active=!0;var o="\n";o+=n[0].toString()+"  B\n",o+=n[1].toString()+"  B\n",o+=n[2].toString()+"  B\n",o+=n[3].toString()+"  B\n",o+=n[4].toString()+"  B",a.string=o,cc.audioEngine.playEffect(e.ScoreSound,!1)},3),this.scheduleOnce(function(){cc.director.loadScene("GameEnd")},10)},t.prototype.update=function(){var e=this;if(this.counting<5)for(var t=function(t){if(1==cc.find("Canvas/PlayerContainer/player"+t).active)return"continue";firebase.database().ref("player_data/player"+t).once("value",function(a){firebase.database().ref("GameResult").once("value",function(n){if(null!=a.val()){var o=0;n.forEach(function(e){null!=e.val()&&(1==t?o+=e.val().player1/10:2==t?o+=e.val().player2/10:3==t?o+=e.val().player3/10:4==t?o+=e.val().player4/10:5==t&&(o+=e.val().player5/10))}),e.counting+=1,e.player_array.push(t),cc.find("Canvas/PlayerContainer/player"+t).active=!0,firebase.database().ref("player_data/player"+t+"/state_value/moveDirX").set({Dir:0}),firebase.database().ref("player_data/player"+t+"/state_value/moveDirY").set({Dir:0}),firebase.database().ref("player_data/player"+t+"/state_value/premoveDirX").set({Dir:0}),firebase.database().ref("player_data/player"+t+"/state_value/moveable").set({moveable:"true"}),firebase.database().ref("player_data/player"+t+"/state_value/X").set({x:240}),firebase.database().ref("player_data/player"+t+"/state_value/Y").set({y:-48}),firebase.database().ref("player_data/player"+t+"/game2_state").set({money:o,paper:2,scissor:2,stone:2,fighting:"false",opponent:"null",card:"null",challenged:"false"})}})})},a=1;a<=5;a++)t(a);this.reset&&(firebase.database().ref("player_data/"+this.current_user_node+"/game2_state").update({card:"null",challenged:"false",fighting:"false",opponent:"null"}),this.reset=!1),this.fighting||e.Mine_info_choice.active||e.opponent_info_choice.active||e.battle_field.active||firebase.database().ref("player_data/"+this.current_user_node+"/game2_state").once("value",function(t){null!=t.val()&&"true"==t.val().fighting&&(e.fighting=!0,e.Mine_info_choice.active=!0,e.Mine_info_choice.getComponent(s.default).opponent=e.opponent_user_node,e.Mine_info_choice.getChildByName("paper").getChildByName("card_number").getComponent(cc.RichText).string=String(t.val().paper),e.Mine_info_choice.getChildByName("scissor").getChildByName("card_number").getComponent(cc.RichText).string=String(t.val().scissor),e.Mine_info_choice.getChildByName("stone").getChildByName("card_number").getComponent(cc.RichText).string=String(t.val().stone),e.opponent_info_choice.active=!0,e.opponent_info_choice.getChildByName("title").getComponent(cc.RichText).string=t.val().opponent,e.battle_field.active=!0,e.battle_field.getComponent(c.default).me_ready=!1,e.battle_field.getComponent(c.default).opponent_ready=!1,e.battle_field.getComponent(c.default).opponent=t.val().opponent,e.opponent_user_node=t.val().opponent,"erudite"==e.character?firebase.database().ref("player_data/"+t.val().opponent+"/game2_state").once("value",function(t){var a=t.val().paper,n=t.val().scissor,o=t.val().stone,r=a+n+o;e.opponent_info_choice.getChildByName("paper").getChildByName("card_number").getComponent(cc.RichText).string=(a/r).toFixed(2)+"%",e.opponent_info_choice.getChildByName("scissor").getChildByName("card_number").getComponent(cc.RichText).string=(n/r).toFixed(2)+"%",e.opponent_info_choice.getChildByName("stone").getChildByName("card_number").getComponent(cc.RichText).string=(o/r).toFixed(2)+"%"}):(e.opponent_info_choice.getChildByName("paper").getChildByName("card_number").getComponent(cc.RichText).string="??",e.opponent_info_choice.getChildByName("scissor").getChildByName("card_number").getComponent(cc.RichText).string="??",e.opponent_info_choice.getChildByName("stone").getChildByName("card_number").getComponent(cc.RichText).string="??"))})},r([u(cc.Node)],t.prototype,"loadingBG",void 0),r([u(cc.Node)],t.prototype,"GameoverBG",void 0),r([u(cc.Node)],t.prototype,"TimerLabel",void 0),r([u()],t.prototype,"GameTime",void 0),r([u(cc.Node)],t.prototype,"opponent_info_choice",void 0),r([u(cc.Node)],t.prototype,"Mine_info_choice",void 0),r([u(cc.Node)],t.prototype,"battle_field",void 0),r([u({type:cc.AudioClip})],t.prototype,"BGM",void 0),r([u(cc.AudioClip)],t.prototype,"ScoreSound",void 0),r([u(cc.AudioClip)],t.prototype,"GameOverSound",void 0),r([u(cc.Node)],t.prototype,"panel",void 0),r([p],t)}(cc.Component);a.default=d,cc._RF.pop()},{"../Game5Object/Mine_info_choice":"Mine_info_choice","../Game5Object/battle_field":"battle_field","../Game5Object/special_player":"special_player"}],InteractWall:[function(e,t,a){"use strict";cc._RF.push(t,"4d7c6/5pCVIGLp5xl05F7N8","InteractWall");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TopOfIW=null,t.Ghost=null,t.PlayerOpen=null,t.PlayerClose=null,t.anim=null,t.current_user_number=0,t.isTouched=!1,t}return o(t,e),t.prototype.start=function(){this.anim=this.node.getComponent(cc.Animation),this.anim.play();var e=firebase.auth().currentUser.uid,t=this;firebase.database().ref("user_info/"+e).once("value",function(e){null!=e.val()&&(t.current_user_number=e.val().player_number)});var a=cc.instantiate(this.TopOfIW);a.setPosition(this.node.position.x,this.node.position.y+12),"IW x1"==this.node.name?a.setScale(.5,1):"IW x2 x2"==this.node.name&&(a.setScale(2,2),a.setPosition(this.node.position.x,this.node.position.y+24)),cc.find("Canvas/PlayerContainer").addChild(a)},t.prototype.update=function(){},t.prototype.onBeginContact=function(e,t,a){var n=this;if(!this.isTouched&&("player1"==a.node.name||"player2"==a.node.name||"player3"==a.node.name||"player4"==a.node.name||"player5"==a.node.name))if("player"==a.node.group||"Coinplayer"==a.node.group)this.isTouched=!0,this.anim.getAnimationState("Open").isPlaying||this.anim.play("Open"),this.scheduleOnce(function(){"player"+n.current_user_number.toString()==a.node.name&&n.PlayerOpen&&cc.audioEngine.playEffect(n.PlayerOpen,!1)},.4),this.scheduleOnce(function(){e.disabled=!0},.8);else if("ghost"==a.node.group){var o;o=cc.fadeTo(.2,100),a.node.runAction(o),this.isTouched=!0,e.disabled=!0,"player"+this.current_user_number.toString()==a.node.name&&this.Ghost&&cc.audioEngine.playEffect(this.Ghost,!1)}},t.prototype.onEndContact=function(e,t,a){var n=this;if("player1"==a.node.name||"player2"==a.node.name||"player3"==a.node.name||"player4"==a.node.name||"player5"==a.node.name)if("player"==a.node.group||"Coinplayer"==a.node.group)this.isTouched=!1,this.anim.getAnimationState("Close").isPlaying||this.anim.play("Close"),"player"+this.current_user_number.toString()==a.node.name&&this.PlayerClose&&cc.audioEngine.playEffect(this.PlayerClose,!1),this.scheduleOnce(function(){n.anim.getAnimationState("Idle").isPlaying||n.anim.play()},.4);else if("ghost"==a.node.group){var o;o=cc.fadeTo(.2,255),a.node.runAction(o),this.isTouched=!1}},r([s(cc.Prefab)],t.prototype,"TopOfIW",void 0),r([s(cc.AudioClip)],t.prototype,"Ghost",void 0),r([s(cc.AudioClip)],t.prototype,"PlayerOpen",void 0),r([s(cc.AudioClip)],t.prototype,"PlayerClose",void 0),r([c],t)}(cc.Component);a.default=l,cc._RF.pop()},{}],LobbyManager:[function(e,t,a){"use strict";cc._RF.push(t,"56e87Na+PxPrLTXUo0zsY0w","LobbyManager");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./Player"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.LoadingBG=null,t.startingBG=null,t.JoinGameText=null,t.ReadyLabel=null,t.ReadyCountLabel=null,t.readyWindow=null,t.click=null,t.physicManager=null,t.initialization=!1,t.counting=0,t.current_user_number=0,t.Max_player_ready_number=5,t}return o(t,e),t.prototype.onLoad=function(){this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,this.physicManager.gravity=cc.v2(0,0)},t.prototype.start=function(){var e=this;this.LoadingBG.active=!0;var t=firebase.auth().currentUser.uid,a=0;firebase.database().ref("user_info/"+t).once("value",function(e){null!=e.val()&&(a=e.val().player_number)}),this.scheduleOnce(function(){switch(e.current_user_number=a,0!=a&&(firebase.database().ref("player/player"+a+"_isReady").set(!1),firebase.database().ref("player/player"+a+"_islogin").set(!0)),a){case 1:firebase.database().ref("player/player1_islogin").onDisconnect().set(!1);break;case 2:firebase.database().ref("player/player2_islogin").onDisconnect().set(!1);break;case 3:firebase.database().ref("player/player3_islogin").onDisconnect().set(!1);break;case 4:firebase.database().ref("player/player4_islogin").onDisconnect().set(!1);break;case 5:firebase.database().ref("player/player5_islogin").onDisconnect().set(!1)}e.schedule(e.UpdateUser,1),e.schedule(e.UpdateMaxReady,1)},1),this.scheduleOnce(function(){e.LoadingBG.active=!1,e.Text1Action(),e.schedule(e.CheckReadyState,.2)},3);var n=new cc.Component.EventHandler;n.target=this.node,n.component="LobbyManager",n.handler="readyEvent",cc.find("Canvas/Main Camera/readyWindow/ready").getComponent(cc.Button).clickEvents.push(n);var o=new cc.Component.EventHandler;o.target=this.node,o.component="LobbyManager",o.handler="closeEvent",cc.find("Canvas/Main Camera/readyWindow/close").getComponent(cc.Button).clickEvents.push(o)},t.prototype.update=function(){},t.prototype.UpdateUser=function(){var e=this;if(this.counting<5)for(var t=function(t){if(1==cc.find("Canvas/PlayerContainer/player"+t).active)return"continue";firebase.database().ref("player/player"+t+"_islogin").once("value",function(a){1==a.val()&&(console.log("Welcome! Player",t),e.counting+=1,cc.find("Canvas/PlayerContainer/player"+t).active=!0,firebase.database().ref("player_data/player"+t+"/state_value/moveDirX").set({Dir:0}),firebase.database().ref("player_data/player"+t+"/state_value/moveDirY").set({Dir:0}),firebase.database().ref("player_data/player"+t+"/state_value/premoveDirX").set({Dir:0}),firebase.database().ref("player_data/player"+t+"/state_value/moveable").set({moveable:"true"}),firebase.database().ref("player_data/player"+t+"/state_value/X").set({x:16}),firebase.database().ref("player_data/player"+t+"/state_value/Y").set({y:-48}))})},a=1;a<=5;a++)t(a)},t.prototype.Text1Action=function(){var e,t=cc.sequence(cc.scaleTo(.5,1.1),cc.scaleTo(.5,1));e=cc.repeatForever(t),this.JoinGameText.runAction(e)},t.prototype.readyEvent=function(){cc.audioEngine.playEffect(this.click,!1),firebase.database().ref("player/player"+this.current_user_number+"_isReady").set(!0),this.ReadyLabel.runAction(cc.fadeTo(.1,255))},t.prototype.closeEvent=function(){cc.audioEngine.playEffect(this.click,!1),firebase.database().ref("player/player"+this.current_user_number+"_isReady").set(!1),console.log("close Computer"),this.readyWindow.active=!1,cc.find("Canvas/PlayerContainer/player"+this.current_user_number).getComponent(i.default).moveable=!0,this.ReadyLabel.runAction(cc.fadeTo(.1,100))},t.prototype.CheckReadyState=function(){for(var e=this,t=0,a=function(e){firebase.database().ref("player/player"+e+"_isReady").once("value",function(a){1==a.val()&&firebase.database().ref("player/player"+e+"_islogin").once("value",function(e){1==e.val()&&t++})})},n=1;n<=5;n++)a(n);this.scheduleOnce(function(){var a="(";a+=t.toString(),a+="/",a+=e.Max_player_ready_number.toString(),a+=")",e.ReadyCountLabel.getComponent(cc.Label).string=a,t==e.Max_player_ready_number&&(e.scheduleOnce(function(){1!=t&&(e.startingBG.active=!0)},1),e.scheduleOnce(function(){1!=t&&cc.director.loadScene("GameStage1")},2))},1)},t.prototype.UpdateMaxReady=function(){for(var e=this,t=0,a=1;a<=5;a++)firebase.database().ref("player/player"+a+"_islogin").once("value",function(e){1==e.val()&&t++});this.scheduleOnce(function(){e.Max_player_ready_number=0==t?5:t},.5)},r([l(cc.Node)],t.prototype,"LoadingBG",void 0),r([l(cc.Node)],t.prototype,"startingBG",void 0),r([l(cc.Node)],t.prototype,"JoinGameText",void 0),r([l(cc.Node)],t.prototype,"ReadyLabel",void 0),r([l(cc.Node)],t.prototype,"ReadyCountLabel",void 0),r([l(cc.Node)],t.prototype,"readyWindow",void 0),r([l(cc.AudioClip)],t.prototype,"click",void 0),r([s],t)}(cc.Component);a.default=p,cc._RF.pop()},{"./Player":"Player"}],Mine_info_choice:[function(e,t,a){"use strict";cc._RF.push(t,"dcb0clOYw5MPrT+MMODsvmK","Mine_info_choice");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,l=e("./panel_info"),p=e("./battle_field"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panel=null,t.bet=null,t.multiple=null,t.battle_field=null,t.click=null,t}return o(t,e),t.prototype.start=function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component="Mine_info_choice",e.handler="paper",cc.find("Canvas/UI/Mine_info_choice/paper").getComponent(cc.Button).clickEvents.push(e);var t=new cc.Component.EventHandler;t.target=this.node,t.component="Mine_info_choice",t.handler="stone",cc.find("Canvas/UI/Mine_info_choice/stone").getComponent(cc.Button).clickEvents.push(t);var a=new cc.Component.EventHandler;a.target=this.node,a.component="Mine_info_choice",a.handler="scissor",cc.find("Canvas/UI/Mine_info_choice/scissor").getComponent(cc.Button).clickEvents.push(a);var n=new cc.Component.EventHandler;n.target=this.node,n.component="Mine_info_choice",n.handler="betting",cc.find("Canvas/UI/Mine_info_choice/bet_confirm").getComponent(cc.Button).clickEvents.push(n);var o=new cc.Component.EventHandler;o.target=this.node,o.component="Mine_info_choice",o.handler="betting_multiple",cc.find("Canvas/UI/Mine_info_choice/gambler_ability").getComponent(cc.Button).clickEvents.push(o);var r=new cc.Component.EventHandler;r.target=this.node,r.component="Mine_info_choice",r.handler="switch_result",cc.find("Canvas/UI/Mine_info_choice/switch_result").getComponent(cc.Button).clickEvents.push(r);var i=new cc.Component.EventHandler;i.target=this.node,i.component="Mine_info_choice",i.handler="escape_battle",cc.find("Canvas/UI/Mine_info_choice/escape").getComponent(cc.Button).clickEvents.push(i),cc.find("Canvas/UI/Mine_info_choice/paper").getComponent(cc.Button).interactable=!1,cc.find("Canvas/UI/Mine_info_choice/scissor").getComponent(cc.Button).interactable=!1,cc.find("Canvas/UI/Mine_info_choice/stone").getComponent(cc.Button).interactable=!1},t.prototype.escape_battle=function(){cc.audioEngine.playEffect(this.click,!1),this.battle_field.getComponent(p.default).escape=!0,firebase.database().ref("player_data/"+this.opponent+"/game2_state/escape").set({escape:"absolute"});var e=cc.fadeOut(5);this.scheduleOnce(function(){cc.find("Canvas/UI/hint_message").getComponent(cc.Label).string="Escape active",cc.find("Canvas/UI/hint_message").active=!0,cc.find("Canvas/UI/hint_message").runAction(e)},.1),cc.find("Canvas/UI/hint_message").active=!1,cc.find("Canvas/UI/hint_message").opacity=255},t.prototype.switch_result=function(){cc.audioEngine.playEffect(this.click,!1),this.battle_field.getComponent(p.default).reverse=!0,firebase.database().ref("player_data/"+this.opponent+"/game2_state/reverse").set({reverse:"absolute"});var e=cc.fadeOut(5);this.scheduleOnce(function(){cc.find("Canvas/UI/hint_message").getComponent(cc.Label).string="Reverse active",cc.find("Canvas/UI/hint_message").active=!0,cc.find("Canvas/UI/hint_message").runAction(e)},.1),cc.find("Canvas/UI/hint_message").active=!1,cc.find("Canvas/UI/hint_message").opacity=255},t.prototype.betting_multiple=function(){cc.audioEngine.playEffect(this.click,!1);var e=this.multiple.getComponent(cc.EditBox).string;Number(e)>=5&&(e="5"),firebase.database().ref("player_data/"+this.current_user+"/game2_state/multiple").set({multiple:e}),this.battle_field.getComponent(p.default).multiple_on=!0,cc.find("Canvas/UI/Mine_info_choice/gambler_ability").getComponent(cc.Button).interactable=!1},t.prototype.betting=function(){cc.audioEngine.playEffect(this.click,!1),firebase.database().ref("player_data/"+this.current_user+"/game2_state/bet").set({bet:this.bet.getComponent(cc.EditBox).string}),cc.find("Canvas/UI/Mine_info_choice/bet_confirm").getComponent(cc.Button).interactable=!1,cc.find("Canvas/UI/Mine_info_choice/paper").getComponent(cc.Button).interactable=!0,cc.find("Canvas/UI/Mine_info_choice/scissor").getComponent(cc.Button).interactable=!0,cc.find("Canvas/UI/Mine_info_choice/stone").getComponent(cc.Button).interactable=!0},t.prototype.paper=function(){cc.audioEngine.playEffect(this.click,!1);var e=this.panel.getComponent(l.default).paper_left-1;if(console.log(e),console.log("qwer"),e>=0)this.panel.getComponent(l.default).update_info("paper",e),cc.find("Canvas/UI/battle_field/Mine_paper").active=!0,cc.find("Canvas/UI/battle_field").getComponent(p.default).my_choice="paper",cc.find("Canvas/UI/battle_field").getComponent(p.default).show_card("paper","Mine"),cc.find("Canvas/UI/battle_field").getComponent(p.default).me_ready=!0,firebase.database().ref("player_data/"+this.current_user+"/game2_state").update({card:"paper"}),this.node.getChildByName("paper").getChildByName("card_number").getComponent(cc.RichText).string=String(e),cc.find("Canvas/UI/Mine_info_choice/paper").getComponent(cc.Button).interactable=!1,cc.find("Canvas/UI/Mine_info_choice/scissor").getComponent(cc.Button).interactable=!1,cc.find("Canvas/UI/Mine_info_choice/stone").getComponent(cc.Button).interactable=!1;else{cc.find("Canvas/UI/hint_message").getComponent(cc.Label).string="No Paper";var t=cc.fadeOut(2);this.scheduleOnce(function(){cc.find("Canvas/UI/hint_message").active=!0,cc.find("Canvas/UI/hint_message").runAction(t)},.1),cc.find("Canvas/UI/hint_message").active=!1,cc.find("Canvas/UI/hint_message").opacity=255}},t.prototype.scissor=function(){cc.audioEngine.playEffect(this.click,!1);var e=this.panel.getComponent(l.default).scissor_left-1;if(e>=0)this.panel.getComponent(l.default).update_info("scissor",e),cc.find("Canvas/UI/battle_field/Mine_scissor").active=!0,cc.find("Canvas/UI/battle_field").getComponent(p.default).my_choice="scissor",cc.find("Canvas/UI/battle_field").getComponent(p.default).show_card("scissor","Mine"),cc.find("Canvas/UI/battle_field").getComponent(p.default).me_ready=!0,firebase.database().ref("player_data/"+this.current_user+"/game2_state").update({card:"scissor"}),this.node.getChildByName("scissor").getChildByName("card_number").getComponent(cc.RichText).string=String(e),cc.find("Canvas/UI/Mine_info_choice/paper").getComponent(cc.Button).interactable=!1,cc.find("Canvas/UI/Mine_info_choice/scissor").getComponent(cc.Button).interactable=!1,cc.find("Canvas/UI/Mine_info_choice/stone").getComponent(cc.Button).interactable=!1;else{cc.find("Canvas/UI/hint_message").getComponent(cc.Label).string="No Scissors";var t=cc.fadeOut(2);this.scheduleOnce(function(){cc.find("Canvas/UI/hint_message").active=!0,cc.find("Canvas/UI/hint_message").runAction(t)},.1),cc.find("Canvas/UI/hint_message").active=!1,cc.find("Canvas/UI/hint_message").opacity=255}cc.find("Canvas/UI/Mine_info_choice/paper").getComponent(cc.Button).interactable=!1,cc.find("Canvas/UI/Mine_info_choice/scissor").getComponent(cc.Button).interactable=!1,cc.find("Canvas/UI/Mine_info_choice/stone").getComponent(cc.Button).interactable=!1},t.prototype.stone=function(){cc.audioEngine.playEffect(this.click,!1);var e=this.panel.getComponent(l.default).stone_left-1;if(e>=0)this.panel.getComponent(l.default).update_info("stone",e),cc.find("Canvas/UI/battle_field/Mine_stone").active=!0,cc.find("Canvas/UI/battle_field").getComponent(p.default).my_choice="stone",cc.find("Canvas/UI/battle_field").getComponent(p.default).show_card("stone","Mine"),cc.find("Canvas/UI/battle_field").getComponent(p.default).me_ready=!0,firebase.database().ref("player_data/"+this.current_user+"/game2_state").update({card:"stone"}),this.node.getChildByName("stone").getChildByName("card_number").getComponent(cc.RichText).string=String(e),cc.find("Canvas/UI/Mine_info_choice/paper").getComponent(cc.Button).interactable=!1,cc.find("Canvas/UI/Mine_info_choice/scissor").getComponent(cc.Button).interactable=!1,cc.find("Canvas/UI/Mine_info_choice/stone").getComponent(cc.Button).interactable=!1;else{cc.find("Canvas/UI/hint_message").getComponent(cc.Label).string="No Stone";var t=cc.fadeOut(2);this.scheduleOnce(function(){cc.find("Canvas/UI/hint_message").active=!0,cc.find("Canvas/UI/hint_message").runAction(t)},.1),cc.find("Canvas/UI/hint_message").active=!1,cc.find("Canvas/UI/hint_message").opacity=255}cc.find("Canvas/UI/Mine_info_choice/paper").getComponent(cc.Button).interactable=!1,cc.find("Canvas/UI/Mine_info_choice/scissor").getComponent(cc.Button).interactable=!1,cc.find("Canvas/UI/Mine_info_choice/stone").getComponent(cc.Button).interactable=!1},r([s(cc.Node)],t.prototype,"panel",void 0),r([s(cc.Node)],t.prototype,"bet",void 0),r([s(cc.Node)],t.prototype,"multiple",void 0),r([s(cc.Node)],t.prototype,"battle_field",void 0),r([s(cc.AudioClip)],t.prototype,"click",void 0),r([c],t)}(cc.Component);a.default=u,cc._RF.pop()},{"./battle_field":"battle_field","./panel_info":"panel_info"}],PlayerCoin:[function(e,t,a){"use strict";cc._RF.push(t,"0c43a9+T15Fk50eX6agL4zg","PlayerCoin");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../CameraManager"),c=e("./GameManagerCoin"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerSpeed=0,t.GameMgr=null,t.child_node=null,t.child_label=null,t.current_user_number=0,t.rigidbody=null,t.child_anim=null,t.leftDown=!1,t.rightDown=!1,t.upDown=!1,t.downDown=!1,t.premoveDirX=0,t.moveDirX=0,t.moveDirY=0,t.premoveDirX_firebase=0,t.moveDirX_firebase=0,t.moveDirY_firebase=0,t.logged_in_or_not=!1,t.moveable=!0,t.moveableKey=!0,t}return o(t,e),t.prototype.onLoad=function(){var e=this,t=this,a=this.node.name,n=firebase.auth().currentUser.uid;this.current_user=n,firebase.database().ref("player_data/"+a).once("value",function(e){t.permited_user=e.val().uid,null!=e.val()&&(t.node.active=!0,t.logged_in_or_not=!0),n==t.permited_user&&(firebase.database().ref("player_data/"+a+"/state_value/moveDirX").set({Dir:0}),firebase.database().ref("player_data/"+a+"/state_value/moveDirY").set({Dir:0}),firebase.database().ref("player_data/"+a+"/state_value/moveable").set({moveable:"true"}),firebase.database().ref("player_data/"+a+"/state_value/moveableKey").set({moveableKey:"true"}),firebase.database().ref("player_data/"+a+"/state_value/premoveDirX").set({Dir:0}),firebase.database().ref("player_data/"+a+"/state_value/X").set({x:0}),firebase.database().ref("player_data/"+a+"/state_value/Y").set({y:0}))}),this.scheduleOnce(function(){e.this_node_user=t.permited_user,console.log("nodeuser:",e.node.name,e.this_node_user),console.log("currentuser:",e.current_user),e.current_user==e.this_node_user&&(cc.find("Canvas/Main Camera").getComponent(i.default).FollowTarget=e.node)},.5);var o=firebase.auth().currentUser.uid,r=this;firebase.database().ref("user_info/"+o).once("value",function(e){null!=e.val()&&(r.current_user_number=e.val().player_number,console.log("Game Coin current_user_number is ",r.current_user_number))})},t.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.rigidbody=this.node.getComponent(cc.RigidBody),this.child_node=this.node.getChildByName(this.node.name),this.child_label=this.node.getChildByName("Label"),this.child_anim=this.child_node.getComponent(cc.Animation),this.child_anim.play("Idle"),this.schedule(this.updateOthersCurrentPos,1),this.schedule(this.UpdateGroup,.5),this.GameMgr=cc.find("GameManager")},t.prototype.update=function(){var e=this;if(!this.logged_in_or_not){var t=this;firebase.database().ref("player_data/"+this.node.name).once("value",function(e){null!=e.val()&&(t.node.active=!0)})}var a=this.node.name,n=this.moveDirX_firebase,o=this.moveDirY_firebase,r=this.premoveDirX_firebase,i=this.node.position.x,c=this.node.position.y;this.current_user==this.this_node_user&&(firebase.database().ref("player_data/"+a+"/state_value/moveDirX").set({Dir:n}),firebase.database().ref("player_data/"+a+"/state_value/moveDirY").set({Dir:o}),firebase.database().ref("player_data/"+a+"/state_value/premoveDirX").set({Dir:r}),firebase.database().ref("player_data/"+a+"/state_value/X").set({x:i}),firebase.database().ref("player_data/"+a+"/state_value/Y").set({y:c})),n=0,o=0,r=0,firebase.database().ref("player_data/"+a+"/state_value").once("value",function(e){null!=e.val()&&(n=e.val().moveDirX.Dir,o=e.val().moveDirY.Dir,r=e.val().premoveDirX.Dir)}),this.scheduleOnce(function(){e.moveDirX=n,e.moveDirY=o,e.premoveDirX=r},.2),this.child_node.scaleX=this.moveDirX>=0?1:-1,0==this.moveDirX&&(this.child_node.scaleX=this.premoveDirX>=0?1:-1),0==this.moveDirX?this.moveable&&(this.rigidbody.linearVelocity=cc.v2(0,this.playerSpeed*this.moveDirY)):0==this.moveDirY?this.moveable&&(this.rigidbody.linearVelocity=cc.v2(this.playerSpeed*this.moveDirX,0)):this.moveable&&(this.rigidbody.linearVelocity=cc.v2(this.playerSpeed*this.moveDirX*.7,this.playerSpeed*this.moveDirY*.7)),0==this.moveDirX&&0==this.moveDirY||!this.moveable?this.child_anim.getAnimationState("Idle").isPlaying||this.child_anim.play("Idle"):this.child_anim.getAnimationState("Move").isPlaying||this.child_anim.play("Move")},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.q:this.Killothers();break;case cc.macro.KEY.a:this.leftDown=!0,this.playerMoveX(-1);break;case cc.macro.KEY.d:this.rightDown=!0,this.playerMoveX(1);break;case cc.macro.KEY.w:this.upDown=!0,this.playerMoveY(1);break;case cc.macro.KEY.s:this.downDown=!0,this.playerMoveY(-1)}},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.a:this.leftDown=!1,this.rightDown?this.playerMoveX(1):this.playerMoveX(0);break;case cc.macro.KEY.d:this.rightDown=!1,this.leftDown?this.playerMoveX(-1):this.playerMoveX(0);break;case cc.macro.KEY.w:this.upDown=!1,this.downDown?this.playerMoveY(-1):this.playerMoveY(0);break;case cc.macro.KEY.s:this.downDown=!1,this.upDown?this.playerMoveY(1):this.playerMoveY(0)}},t.prototype.playerMoveX=function(e){this.current_user==this.this_node_user&&this.moveableKey&&(this.premoveDirX_firebase=this.moveDirX_firebase,this.moveDirX_firebase=e)},t.prototype.playerMoveY=function(e){this.current_user==this.this_node_user&&this.moveableKey&&(this.moveDirY_firebase=e)},t.prototype.updateOthersCurrentPos=function(){var e=this;if(this.current_user!=this.this_node_user){var t=this.node.name,a=-1487,n=-1487;firebase.database().ref("player_data/"+t+"/state_value").once("value",function(e){null!=e.val()&&(a=e.val().X.x,n=e.val().Y.y,e.val().moveDirX.Dir,e.val().moveDirY.Dir)}),this.scheduleOnce(function(){var t;-1487==a&&-1487==n||(t=cc.moveTo(.5,a,n),(Math.abs(e.node.position.x-a)>256||Math.abs(e.node.position.y-n)>256)&&e.node.setPosition(a,n),e.node.runAction(t))},.2)}},t.prototype.UpdateGroup=function(){var e=this;firebase.database().ref("GameCoin/"+e.node.name).once("value",function(t){"player"==t.val().state?"Coinplayer"!=e.node.group&&(console.log("changeGroup to player"),e.node.group="Coinplayer",e.node.active=!1,e.node.active=!0,e.node.getChildByName("C").active=!1):"thief"==t.val().state&&"Cointhief"!=e.node.group&&(console.log("changeGroup to thief"),e.node.group="Cointhief",e.node.active=!1,e.node.active=!0,e.node.getChildByName("C").active=!0)})},t.prototype.Killothers=function(){this.this_node_user==this.current_user&&this.GameMgr.getComponent(c.default).BecomeThief(this.node.name)},t.prototype.onBeginContact=function(e,t,a){if("Cointhief"==a.node.group){console.log("BeginContact on Cointhief",a.node.name);var n=this.GameMgr.getComponent(c.default).current_coin;this.GameMgr.getComponent(c.default).playerDie(this.node.name);var o="player"+this.current_user_number;t.node.name==o&&firebase.database().ref("GameCoin/"+a.node.name).once("value",function(e){var t=e.val().coin;firebase.database().ref("GameCoin/"+a.node.name).update({coin:t+n})})}},r([p()],t.prototype,"playerSpeed",void 0),r([l],t)}(cc.Component);a.default=u,cc._RF.pop()},{"../CameraManager":"CameraManager","./GameManagerCoin":"GameManagerCoin"}],PlayerGhost:[function(e,t,a){"use strict";cc._RF.push(t,"ce51dyZ7y5MZbBn+/KFp5BV","PlayerGhost");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../CameraManager"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerSpeed=0,t.child_node=null,t.child_label=null,t.rigidbody=null,t.anim=null,t.child_anim=null,t.leftDown=!1,t.rightDown=!1,t.upDown=!1,t.downDown=!1,t.premoveDirX=0,t.moveDirX=0,t.moveDirY=0,t.premoveDirX_firebase=0,t.moveDirX_firebase=0,t.moveDirY_firebase=0,t.logged_in_or_not=!1,t.moveable=!0,t.moveableKey=!0,t}return o(t,e),t.prototype.onLoad=function(){var e=this,t=this,a=this.node.name,n=firebase.auth().currentUser.uid;this.current_user=n,firebase.database().ref("player_data/"+a).once("value",function(e){t.permited_user=e.val().uid,null!=e.val()&&(t.node.active=!0,t.logged_in_or_not=!0),n==t.permited_user&&(firebase.database().ref("player_data/"+a+"/state_value/moveDirX").set({Dir:0}),firebase.database().ref("player_data/"+a+"/state_value/moveDirY").set({Dir:0}),firebase.database().ref("player_data/"+a+"/state_value/moveable").set({moveable:"true"}),firebase.database().ref("player_data/"+a+"/state_value/moveableKey").set({moveableKey:"true"}),firebase.database().ref("player_data/"+a+"/state_value/premoveDirX").set({Dir:0}),firebase.database().ref("player_data/"+a+"/state_value/X").set({x:0}),firebase.database().ref("player_data/"+a+"/state_value/Y").set({y:0}))}),this.scheduleOnce(function(){e.this_node_user=t.permited_user,console.log("nodeuser:",e.node.name,e.this_node_user),console.log("currentuser:",e.current_user),e.current_user==e.this_node_user&&(cc.find("Canvas/Main Camera").getComponent(i.default).FollowTarget=e.node)},.5)},t.prototype.get_current_user_uid=function(){return this.permited_user},t.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.rigidbody=this.node.getComponent(cc.RigidBody),this.child_node=this.node.getChildByName(this.node.name),this.child_label=this.node.getChildByName("Label"),this.child_anim=this.child_node.getComponent(cc.Animation),this.child_anim.play("Idle"),this.schedule(this.updateOthersCurrentPos,.5)},t.prototype.update=function(){var e=this;if(!this.logged_in_or_not){var t=this;firebase.database().ref("player_data/"+this.node.name).once("value",function(e){null!=e.val()&&(t.node.active=!0)})}var a=this.node.name,n=this.moveDirX_firebase,o=this.moveDirY_firebase,r=this.premoveDirX_firebase,i=this.node.position.x,c=this.node.position.y,s=this.moveable;this.current_user==this.this_node_user&&(firebase.database().ref("player_data/"+a+"/state_value/moveDirX").set({Dir:n}),firebase.database().ref("player_data/"+a+"/state_value/moveDirY").set({Dir:o}),firebase.database().ref("player_data/"+a+"/state_value/premoveDirX").set({Dir:r}),firebase.database().ref("player_data/"+a+"/state_value/X").set({x:i}),firebase.database().ref("player_data/"+a+"/state_value/Y").set({y:c}),firebase.database().ref("player_data/"+a+"/state_value/moveable").set({moveable:s})),n=0,o=0,r=0,firebase.database().ref("player_data/"+a+"/state_value").once("value",function(e){null!=e.val()&&(n=e.val().moveDirX.Dir,o=e.val().moveDirY.Dir,r=e.val().premoveDirX.Dir)}),this.scheduleOnce(function(){e.moveDirX=n,e.moveDirY=o,e.premoveDirX=r},.2),this.child_node.scaleX=this.moveDirX>=0?1:-1,0==this.moveDirX&&(this.child_node.scaleX=this.premoveDirX>=0?1:-1),0==this.moveDirX?this.moveable&&(this.rigidbody.linearVelocity=cc.v2(0,this.playerSpeed*this.moveDirY)):0==this.moveDirY?this.moveable&&(this.rigidbody.linearVelocity=cc.v2(this.playerSpeed*this.moveDirX,0)):this.moveable&&(this.rigidbody.linearVelocity=cc.v2(this.playerSpeed*this.moveDirX*.7,this.playerSpeed*this.moveDirY*.7)),this.moveable||(this.rigidbody.linearVelocity=cc.v2(0,0)),0==this.moveDirX&&0==this.moveDirY||!this.moveable?this.child_anim.getAnimationState("Idle").isPlaying||this.child_anim.play("Idle"):this.child_anim.getAnimationState("Move").isPlaying||this.child_anim.play("Move")},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.a:this.leftDown=!0,this.playerMoveX(-1);break;case cc.macro.KEY.d:this.rightDown=!0,this.playerMoveX(1);break;case cc.macro.KEY.w:this.upDown=!0,this.playerMoveY(1);break;case cc.macro.KEY.s:this.downDown=!0,this.playerMoveY(-1)}},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.a:this.leftDown=!1,this.rightDown?this.playerMoveX(1):this.playerMoveX(0);break;case cc.macro.KEY.d:this.rightDown=!1,this.leftDown?this.playerMoveX(-1):this.playerMoveX(0);break;case cc.macro.KEY.w:this.upDown=!1,this.downDown?this.playerMoveY(-1):this.playerMoveY(0);break;case cc.macro.KEY.s:this.downDown=!1,this.upDown?this.playerMoveY(1):this.playerMoveY(0)}},t.prototype.playerMoveX=function(e){this.current_user==this.this_node_user&&this.moveableKey&&(this.premoveDirX_firebase=this.moveDirX_firebase,this.moveDirX_firebase=e)},t.prototype.playerMoveY=function(e){this.current_user==this.this_node_user&&this.moveableKey&&(this.moveDirY_firebase=e)},t.prototype.updateOthersCurrentPos=function(){var e=this;if(this.current_user!=this.this_node_user){var t=this.node.name,a=-1487,n=-1487;firebase.database().ref("player_data/"+t+"/state_value").once("value",function(e){null!=e.val()&&(a=e.val().X.x,n=e.val().Y.y,e.val().moveDirX.Dir,e.val().moveDirY.Dir)}),this.scheduleOnce(function(){var t;-1487==a&&-1487==n||(t=cc.moveTo(.5,a,n),(Math.abs(e.node.position.x-a)>320||Math.abs(e.node.position.y-n)>320)&&e.node.setPosition(a,n),e.node.runAction(t))},.2)}},t.prototype.onBeginContact=function(e,t,a){"ghost"==a.node.group&&"player"==t.node.group&&this.current_user==this.this_node_user&&(console.log("Ghost:",a.node.name,"Hit:",t.node.name),firebase.database().ref("game2/"+t.node.name).set({type:"ghost"}),firebase.database().ref("game2/"+a.node.name).set({type:"player"}))},r([l()],t.prototype,"playerSpeed",void 0),r([s],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../CameraManager":"CameraManager"}],Player:[function(e,t,a){"use strict";cc._RF.push(t,"d2129Y42VNFrLyhlB4LZJ/o","Player");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./CameraManager"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerSpeed=0,t.child_node=null,t.child_label=null,t.rigidbody=null,t.anim=null,t.child_anim=null,t.leftDown=!1,t.rightDown=!1,t.upDown=!1,t.downDown=!1,t.premoveDirX=0,t.moveDirX=0,t.moveDirY=0,t.premoveDirX_firebase=0,t.moveDirX_firebase=0,t.moveDirY_firebase=0,t.logged_in_or_not=!1,t.moveable=!0,t.moveableKey=!0,t}return o(t,e),t.prototype.onLoad=function(){var e=this,t=this,a=this.node.name,n=firebase.auth().currentUser.uid;this.current_user=n,firebase.database().ref("player_data/"+a).once("value",function(e){t.permited_user=e.val().uid,null!=e.val()&&(t.node.active=!0,t.logged_in_or_not=!0),n==t.permited_user&&(firebase.database().ref("player_data/"+a+"/state_value/moveDirX").set({Dir:0}),firebase.database().ref("player_data/"+a+"/state_value/moveDirY").set({Dir:0}),firebase.database().ref("player_data/"+a+"/state_value/moveable").set({moveable:"true"}),firebase.database().ref("player_data/"+a+"/state_value/moveableKey").set({moveableKey:"true"}),firebase.database().ref("player_data/"+a+"/state_value/premoveDirX").set({Dir:0}),firebase.database().ref("player_data/"+a+"/state_value/X").set({x:0}),firebase.database().ref("player_data/"+a+"/state_value/Y").set({y:0}))}),this.scheduleOnce(function(){e.this_node_user=t.permited_user,console.log("nodeuser:",e.node.name,e.this_node_user),console.log("currentuser:",e.current_user),e.current_user==e.this_node_user&&(cc.find("Canvas/Main Camera").getComponent(i.default).FollowTarget=e.node)},.5)},t.prototype.get_current_user_uid=function(){return this.permited_user},t.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.rigidbody=this.node.getComponent(cc.RigidBody),this.child_node=this.node.getChildByName(this.node.name),this.child_label=this.node.getChildByName("Label"),this.child_anim=this.child_node.getComponent(cc.Animation),this.child_anim.play("Idle"),this.schedule(this.updateOthersCurrentPos,1)},t.prototype.update=function(){var e=this;if(!this.logged_in_or_not){var t=this;firebase.database().ref("player_data/"+this.node.name).once("value",function(e){null!=e.val()&&(t.node.active=!0)})}var a=this.node.name,n=this.moveDirX_firebase,o=this.moveDirY_firebase,r=this.premoveDirX_firebase,i=this.node.position.x,c=this.node.position.y;this.current_user==this.this_node_user&&(firebase.database().ref("player_data/"+a+"/state_value/moveDirX").set({Dir:n}),firebase.database().ref("player_data/"+a+"/state_value/moveDirY").set({Dir:o}),firebase.database().ref("player_data/"+a+"/state_value/premoveDirX").set({Dir:r}),firebase.database().ref("player_data/"+a+"/state_value/X").set({x:i}),firebase.database().ref("player_data/"+a+"/state_value/Y").set({y:c})),n=0,o=0,r=0,firebase.database().ref("player_data/"+a+"/state_value").once("value",function(e){null!=e.val()&&(n=e.val().moveDirX.Dir,o=e.val().moveDirY.Dir,r=e.val().premoveDirX.Dir)}),this.scheduleOnce(function(){e.moveDirX=n,e.moveDirY=o,e.premoveDirX=r},.2),this.child_node.scaleX=this.moveDirX>=0?1:-1,0==this.moveDirX&&(this.child_node.scaleX=this.premoveDirX>=0?1:-1),0==this.moveDirX?this.moveable&&(this.rigidbody.linearVelocity=cc.v2(0,this.playerSpeed*this.moveDirY)):0==this.moveDirY?this.moveable&&(this.rigidbody.linearVelocity=cc.v2(this.playerSpeed*this.moveDirX,0)):this.moveable&&(this.rigidbody.linearVelocity=cc.v2(this.playerSpeed*this.moveDirX*.7,this.playerSpeed*this.moveDirY*.7)),0==this.moveDirX&&0==this.moveDirY||!this.moveable?this.child_anim.getAnimationState("Idle").isPlaying||this.child_anim.play("Idle"):this.child_anim.getAnimationState("Move").isPlaying||this.child_anim.play("Move")},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.a:this.leftDown=!0,this.playerMoveX(-1);break;case cc.macro.KEY.d:this.rightDown=!0,this.playerMoveX(1);break;case cc.macro.KEY.w:this.upDown=!0,this.playerMoveY(1);break;case cc.macro.KEY.s:this.downDown=!0,this.playerMoveY(-1)}},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.a:this.leftDown=!1,this.rightDown?this.playerMoveX(1):this.playerMoveX(0);break;case cc.macro.KEY.d:this.rightDown=!1,this.leftDown?this.playerMoveX(-1):this.playerMoveX(0);break;case cc.macro.KEY.w:this.upDown=!1,this.downDown?this.playerMoveY(-1):this.playerMoveY(0);break;case cc.macro.KEY.s:this.downDown=!1,this.upDown?this.playerMoveY(1):this.playerMoveY(0)}},t.prototype.playerMoveX=function(e){this.current_user==this.this_node_user&&this.moveableKey&&(this.premoveDirX_firebase=this.moveDirX_firebase,this.moveDirX_firebase=e)},t.prototype.playerMoveY=function(e){this.current_user==this.this_node_user&&this.moveableKey&&(this.moveDirY_firebase=e)},t.prototype.updateOthersCurrentPos=function(){var e=this;if(this.current_user!=this.this_node_user){var t=this.node.name,a=-1487,n=-1487;firebase.database().ref("player_data/"+t+"/state_value").once("value",function(e){null!=e.val()&&(a=e.val().X.x,n=e.val().Y.y,e.val().moveDirX.Dir,e.val().moveDirY.Dir)}),this.scheduleOnce(function(){var t;-1487==a&&-1487==n||(t=cc.moveTo(.5,a,n),(Math.abs(e.node.position.x-a)>320||Math.abs(e.node.position.y-n)>320)&&e.node.setPosition(a,n),e.node.runAction(t))},.2)}},r([l()],t.prototype,"playerSpeed",void 0),r([s],t)}(cc.Component);a.default=p,cc._RF.pop()},{"./CameraManager":"CameraManager"}],TranGround_special:[function(e,t,a){"use strict";cc._RF.push(t,"37e384WsudE9paCQ9Sl4dNw","TranGround_special");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../Game5Object/special_player"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TransDir=2,t.TransSpeed=150,t.playerSpeed=0,t}return o(t,e),t.prototype.start=function(){this.playerSpeed=cc.find("Canvas/PlayerContainer/player1").getComponent(i.default).playerSpeed},t.prototype.onBeginContact=function(e,t,a){if("player"==a.node.group){console.log("TransGroundPP Pspeed",this.playerSpeed),a.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0);var n=a.node.getComponent(i.default);n.playerSpeed=this.TransSpeed,n.moveableKey=!1,1==this.TransDir?(n.moveDirX_firebase=0,n.moveDirY_firebase=1):2==this.TransDir?(n.moveDirX_firebase=0,n.moveDirY_firebase=-1):3==this.TransDir?(n.moveDirX_firebase=-1,n.moveDirY_firebase=0):4==this.TransDir?(n.moveDirX_firebase=1,n.moveDirY_firebase=0):5==this.TransDir?(n.playerSpeed=1.4*this.TransSpeed,n.moveDirX_firebase=1,n.moveDirY_firebase=-1):6==this.TransDir&&(n.playerSpeed=1.4*this.TransSpeed,n.moveDirX_firebase=-1,n.moveDirY_firebase=1)}},t.prototype.onEndContact=function(e,t,a){if("player"==a.node.group){console.log("TransGroundEE");var n=a.node.getComponent(i.default);n.moveableKey=!0,n.moveDirX_firebase=0,n.moveDirY_firebase=0,n.playerSpeed=this.playerSpeed}},r([l()],t.prototype,"TransDir",void 0),r([l()],t.prototype,"TransSpeed",void 0),r([s],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../Game5Object/special_player":"special_player"}],TransGround:[function(e,t,a){"use strict";cc._RF.push(t,"72c524ump5GL40PMpXA7hpe","TransGround");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./PlayerGhost"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TransDir=2,t.TransSpeed=150,t.playerSpeed=0,t}return o(t,e),t.prototype.start=function(){this.playerSpeed=cc.find("Canvas/PlayerContainer/player1").getComponent(i.default).playerSpeed},t.prototype.onBeginContact=function(e,t,a){if("player"==a.node.group){console.log("TransGroundPP Pspeed",this.playerSpeed),a.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0);var n=a.node.getComponent(i.default);n.playerSpeed=this.TransSpeed,n.moveableKey=!1,1==this.TransDir?(n.moveDirX_firebase=0,n.moveDirY_firebase=1):2==this.TransDir?(n.moveDirX_firebase=0,n.moveDirY_firebase=-1):3==this.TransDir?(n.moveDirX_firebase=-1,n.moveDirY_firebase=0):4==this.TransDir?(n.moveDirX_firebase=1,n.moveDirY_firebase=0):5==this.TransDir?(n.playerSpeed=1.4*this.TransSpeed,n.moveDirX_firebase=1,n.moveDirY_firebase=-1):6==this.TransDir&&(n.playerSpeed=1.4*this.TransSpeed,n.moveDirX_firebase=-1,n.moveDirY_firebase=1)}},t.prototype.onEndContact=function(e,t,a){if("player"==a.node.group){console.log("TransGroundEE");var n=a.node.getComponent(i.default);n.moveableKey=!0,n.moveDirX_firebase=0,n.moveDirY_firebase=0,n.playerSpeed=this.playerSpeed}},r([l()],t.prototype,"TransDir",void 0),r([l()],t.prototype,"TransSpeed",void 0),r([s],t)}(cc.Component);a.default=p,cc._RF.pop()},{"./PlayerGhost":"PlayerGhost"}],UImanager:[function(e,t,a){"use strict";cc._RF.push(t,"06f3beiKxNEvbWf347dvoGP","UImanager");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.FollowTarget=null,t}return o(t,e),t.prototype.start=function(){},t.prototype.update=function(){this.FollowTarget&&this.node.setPosition(this.FollowTarget.position.x,this.FollowTarget.position.y)},r([s(cc.Node)],t.prototype,"FollowTarget",void 0),r([c],t)}(cc.Component);a.default=l,cc._RF.pop()},{}],battle_field:[function(e,t,a){"use strict";cc._RF.push(t,"9e68agIkCtLyKGaiZAteWD7","battle_field");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,l=e("../GameManager/GameManagerS5"),p=e("./panel_info"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panel=null,t.gamemanager=null,t.opponent_info_choice=null,t.Mine_info_choice=null,t.bet=null,t.multiple=null,t.message=null,t.soundEffect=[],t.opponent="null",t.my_choice="null",t.opponent_choice="null",t.opponent_ready=!1,t.me_ready=!1,t.win_lose="null",t.multiple_on=!1,t.reverse=!1,t.escape=!1,t}return o(t,e),t.prototype.start=function(){this.current_user=cc.find("GameManager").getComponent(l.default).current_user_node},t.prototype.show_card=function(e,t){console.log(this.opponent_ready+" "+this.me_ready),cc.find("Canvas/UI/battle_field/"+t+"_"+e).active=!0},t.prototype.match_result=function(){console.log(this.my_choice+" the fuck "+this.opponent_choice);var e=this;if(this.escape){switch(console.log("escape reverse"),this.my_choice){case"paper":var t=this.panel.getComponent(p.default).paper_left+1;this.panel.getComponent(p.default).update_info("paper",t),firebase.database().ref("player_data/"+this.current_user+"/game2_state").update({paper:t});break;case"scissor":var a=this.panel.getComponent(p.default).scissor_left+1;this.panel.getComponent(p.default).update_info("scissor",a),firebase.database().ref("player_data/"+this.current_user+"/game2_state").update({scissor:a});break;case"stone":var n=this.panel.getComponent(p.default).stone_left+1;this.panel.getComponent(p.default).update_info("stone",n),firebase.database().ref("player_data/"+this.current_user+"/game2_state").update({stone:n})}cc.find("Canvas/UI/WLMessage").getComponent(cc.Label).string="Someone escape",this.escape=!1}else switch(firebase.database().ref("player_data/"+this.current_user+"/game2_state/reverse").once("value",function(t){null!=t.val()&&("absolute"==t.val().reverse&&(e.reverse=!0),firebase.database().ref("player_data/"+this.current_user+"/game2_state/reverse").update({reverse:"false"}))}),this.my_choice){case"paper":"paper"==this.opponent_choice?cc.find("Canvas/UI/WLMessage").getComponent(cc.Label).string="Draw":"scissor"==this.opponent_choice?this.lose():"stone"==this.opponent_choice&&this.win();break;case"scissor":"paper"==this.opponent_choice?this.win():"scissor"==this.opponent_choice?cc.find("Canvas/UI/WLMessage").getComponent(cc.Label).string="Draw":"stone"==this.opponent_choice&&this.lose();break;case"stone":"paper"==this.opponent_choice?this.lose():"scissor"==this.opponent_choice?this.win():"stone"==this.opponent_choice&&(cc.find("Canvas/UI/WLMessage").getComponent(cc.Label).string="Draw")}this.bet.getComponent(cc.EditBox).string="1",this.multiple.getComponent(cc.EditBox).string="1",this.reverse=!1,this.scheduleOnce(function(){cc.find("Canvas/UI/WLMessage").active=!0},.5),firebase.database().ref("player_data/"+this.current_user+"/game2_state/escape").update({escape:"false"}),firebase.database().ref("player_data/"+this.current_user+"/game2_state").update({card:"null",challenged:"false",fighting:"false",opponent:"null"}),e.gamemanager.getComponent(l.default).fighting=!1,e.gamemanager.getComponent(l.default).reset=!0,e.Mine_info_choice.active=!1,e.opponent_info_choice.active=!1,this.scheduleOnce(function(){cc.find("Canvas/UI/battle_field/opponent_"+this.opponent_choice).active=!1,cc.find("Canvas/UI/battle_field/Mine_"+this.my_choice).active=!1,cc.find("Canvas/UI/Mine_info_choice/gambler_ability").getComponent(cc.Button).interactable=!0,cc.find("Canvas/UI/Mine_info_choice/bet_confirm").getComponent(cc.Button).interactable=!0,this.opponent="null",this.my_choice="null",this.opponent_choice="null",cc.find("Canvas/UI/WLMessage").active=!1,this.multiple_on=!1,this.node.active=!1},3)},t.prototype.win=function(){if(this.reverse)this.reverse=!1,this.lose();else{console.log("win");var e=this;firebase.database().ref("player_data/"+this.opponent+"/game2_state/bet").once("value",function(t){firebase.database().ref("player_data/"+e.current_user+"/game2_state/bet").once("value",function(a){var n=Math.max(parseInt(t.val().bet,10),parseInt(a.val().bet,10));e.multiple_on?firebase.database().ref("player_data/"+e.current_user+"/game2_state/multiple").once("value",function(t){if(null==t.val()){var a=e.panel.getComponent(p.default).money_left+n;e.panel.getComponent(p.default).update_info("money",a),cc.find("Canvas/UI/WLMessage").getComponent(cc.Label).string=e.current_user+" win \n Gain "+n+" money"}else{var o=t.val().multiple;a=e.panel.getComponent(p.default).money_left+n*parseInt(o,10),console.log("win "+n*parseInt(o,10)),e.panel.getComponent(p.default).update_info("money",a),cc.find("Canvas/UI/WLMessage").getComponent(cc.Label).string=e.current_user+" win \n Gain "+n*parseInt(o,10)+" money"}}):firebase.database().ref("player_data/"+e.opponent+"/game2_state/multiple").once("value",function(t){if(null==t.val()){var a=e.panel.getComponent(p.default).money_left+n;e.panel.getComponent(p.default).update_info("money",a),cc.find("Canvas/UI/WLMessage").getComponent(cc.Label).string=e.current_user+" win \n Gain "+n+" money"}else{var o=t.val().multiple;a=e.panel.getComponent(p.default).money_left+n*parseInt(o,10),e.panel.getComponent(p.default).update_info("money",a),cc.find("Canvas/UI/WLMessage").getComponent(cc.Label).string=e.current_user+" win \n Gain "+n*parseInt(o,10)+" money"}})})}),cc.audioEngine.playEffect(this.soundEffect[0],!1)}},t.prototype.lose=function(){if(this.reverse)this.reverse=!1,this.win();else{console.log("lose");var e=this;firebase.database().ref("player_data/"+this.opponent+"/game2_state/bet").once("value",function(t){firebase.database().ref("player_data/"+e.current_user+"/game2_state/bet").once("value",function(a){var n=Math.max(parseInt(t.val().bet,10),parseInt(a.val().bet,10));console.log(parseInt(t.val().bet,10)),console.log(parseInt(a.val().bet,10)),console.log("bet_money = "+n+" "),e.multiple_on?(console.log("multiple on lose"),firebase.database().ref("player_data/"+e.current_user+"/game2_state/multiple").once("value",function(t){if(null==t.val()){var a=e.panel.getComponent(p.default).money_left-n;e.panel.getComponent(p.default).update_info("money",a),cc.find("Canvas/UI/WLMessage").getComponent(cc.Label).string="You lose \n Loss "+n+" money"}else{var o=t.val().multiple;a=e.panel.getComponent(p.default).money_left-n*parseInt(o,10),e.panel.getComponent(p.default).update_info("money",a),cc.find("Canvas/UI/WLMessage").getComponent(cc.Label).string="You lose \n Loss "+n*parseInt(o,10)+" money"}})):firebase.database().ref("player_data/"+e.opponent+"/game2_state/multiple").once("value",function(t){if(null==t.val()){var a=e.panel.getComponent(p.default).money_left-n;e.panel.getComponent(p.default).update_info("money",a),cc.find("Canvas/UI/WLMessage").getComponent(cc.Label).string="You lose \n Loss "+n+" money"}else{var o=t.val().multiple;a=e.panel.getComponent(p.default).money_left-n*parseInt(o,10),e.panel.getComponent(p.default).update_info("money",a),cc.find("Canvas/UI/WLMessage").getComponent(cc.Label).string="You lose \n Loss "+n*parseInt(o,10)+" money"}})})}),cc.audioEngine.playEffect(this.soundEffect[1],!1)}},t.prototype.update=function(){if(0==this.opponent_ready&&"null"!=this.opponent){var e=this;firebase.database().ref("player_data/"+this.opponent+"/game2_state").once("value",function(t){var a=t.val().card;"null"!=a&&(console.log("choice: "+a),e.opponent_choice=a,e.opponent_ready=!0,console.log("only here is true: "+e.opponent_ready))})}if(1==this.opponent_ready&&1==this.me_ready&&(console.log("???"+this.opponent_ready+" "+this.me_ready),this.opponent_ready=!1,this.me_ready=!1,this.show_card(this.opponent_choice,"opponent"),this.scheduleOnce(function(){this.match_result()},2)),"null"==this.opponent){var t=this;firebase.database().ref("player_data/"+this.current_user+"/game2_state").once("value",function(e){t.opponent=e.val().opponent})}if(0==this.escape){var a=this;firebase.database().ref("player_data/"+this.current_user+"/game2_state/escape").once("value",function(e){null!=e.val()&&"absolute"==e.val().escape&&(console.log("absolute???????????????"),a.escape=!0)})}},r([s(cc.Node)],t.prototype,"panel",void 0),r([s(cc.Node)],t.prototype,"gamemanager",void 0),r([s(cc.Node)],t.prototype,"opponent_info_choice",void 0),r([s(cc.Node)],t.prototype,"Mine_info_choice",void 0),r([s(cc.Node)],t.prototype,"bet",void 0),r([s(cc.Node)],t.prototype,"multiple",void 0),r([s(cc.Node)],t.prototype,"message",void 0),r([s({type:cc.AudioClip})],t.prototype,"soundEffect",void 0),r([c],t)}(cc.Component);a.default=u,cc._RF.pop()},{"../GameManager/GameManagerS5":"GameManagerS5","./panel_info":"panel_info"}],coinManager:[function(e,t,a){"use strict";cc._RF.push(t,"93a4esQ/+xNNb2jcm9lfygB","coinManager");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./GameManagerCoin"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.GameMgr=null,t}return o(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this.GameMgr=cc.find("GameManager")},t.prototype.onBeginContact=function(e,t,a){"Coinplayer"==a.node.group&&(this.GameMgr.getComponent(i.default).UpdateCoin(1,a.node.name),t.node.destroy())},r([s],t)}(cc.Component));a.default=l,cc._RF.pop()},{"./GameManagerCoin":"GameManagerCoin"}],computerRule:[function(e,t,a){"use strict";cc._RF.push(t,"e59ee2pAZxBsZCX7zFwtzG6","computerRule");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./Player"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ruleWindow=null,t.click=null,t.RuleText=null,t.DetailRuleText=null,t.current_user_number=0,t.T1=null,t.T2=null,t.T3=null,t.T4=null,t}return o(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){var e=this,t=firebase.auth().currentUser.uid,a=0;firebase.database().ref("user_info/"+t).once("value",function(e){null!=e.val()&&(a=e.val().player_number)}),this.scheduleOnce(function(){e.current_user_number=a},1.5),this.Text1Action();var n=new cc.Component.EventHandler;n.target=this.node,n.component="computerRule",n.handler="ruleEvent",console.log(cc.find("Canvas/Main Camera/RuleWindow/rule")),cc.find("Canvas/Main Camera/RuleWindow/rule").getComponent(cc.Button).clickEvents.push(n);var o=new cc.Component.EventHandler;o.target=this.node,o.component="computerRule",o.handler="closeEvent",cc.find("Canvas/Main Camera/RuleWindow/close").getComponent(cc.Button).clickEvents.push(o);var r=new cc.Component.EventHandler;r.target=this.node,r.component="computerRule",r.handler="btn1Event",cc.find("Canvas/Main Camera/RuleWindow/Message/btn1").getComponent(cc.Button).clickEvents.push(r);var i=new cc.Component.EventHandler;i.target=this.node,i.component="computerRule",i.handler="btn2Event",cc.find("Canvas/Main Camera/RuleWindow/Message/btn2").getComponent(cc.Button).clickEvents.push(i);var c=new cc.Component.EventHandler;c.target=this.node,c.component="computerRule",c.handler="btn3Event",cc.find("Canvas/Main Camera/RuleWindow/Message/btn3").getComponent(cc.Button).clickEvents.push(c);var s=new cc.Component.EventHandler;s.target=this.node,s.component="computerRule",s.handler="btn4Event",cc.find("Canvas/Main Camera/RuleWindow/Message/btn4").getComponent(cc.Button).clickEvents.push(s),this.T1=cc.find("Canvas/Main Camera/RuleWindow/Message/Text1"),this.T2=cc.find("Canvas/Main Camera/RuleWindow/Message/Text2"),this.T3=cc.find("Canvas/Main Camera/RuleWindow/Message/Text3"),this.T4=cc.find("Canvas/Main Camera/RuleWindow/Message/Text4")},t.prototype.ruleEvent=function(){cc.audioEngine.playEffect(this.click,!1),0==this.DetailRuleText.active?(this.DetailRuleText.active=!0,this.T1.active=!1,this.T2.active=!1,this.T3.active=!1,this.T4.active=!1):(this.DetailRuleText.active=!1,this.T1.active=!1,this.T2.active=!1,this.T3.active=!1,this.T4.active=!1)},t.prototype.closeEvent=function(){cc.audioEngine.playEffect(this.click,!1),this.DetailRuleText.active=!1,this.ruleWindow.active=!1,cc.find("Canvas/PlayerContainer/player"+this.current_user_number).getComponent(i.default).moveable=!0},t.prototype.onBeginContact=function(e,t,a){if("player"==a.node.group){var n="player"+this.current_user_number.toString();a.node.name==n&&(console.log("open ComputerRule"),this.ruleWindow.active=!0,a.node.getComponent(i.default).moveable=!1,a.node.getComponent(i.default).getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0))}},t.prototype.Text1Action=function(){var e,t=cc.sequence(cc.scaleTo(.5,1.1),cc.scaleTo(.5,1));e=cc.repeatForever(t),this.RuleText.runAction(e)},t.prototype.btn1Event=function(){cc.audioEngine.playEffect(this.click,!1),this.T1.active=!0,this.T2.active=!1,this.T3.active=!1,this.T4.active=!1},t.prototype.btn2Event=function(){cc.audioEngine.playEffect(this.click,!1),this.T1.active=!1,this.T2.active=!0,this.T3.active=!1,this.T4.active=!1},t.prototype.btn3Event=function(){cc.audioEngine.playEffect(this.click,!1),this.T1.active=!1,this.T2.active=!1,this.T3.active=!0,this.T4.active=!1},t.prototype.btn4Event=function(){cc.audioEngine.playEffect(this.click,!1),this.T1.active=!1,this.T2.active=!1,this.T3.active=!1,this.T4.active=!0},r([l(cc.Node)],t.prototype,"ruleWindow",void 0),r([l(cc.AudioClip)],t.prototype,"click",void 0),r([l(cc.Node)],t.prototype,"RuleText",void 0),r([l(cc.Node)],t.prototype,"DetailRuleText",void 0),r([s],t)}(cc.Component);a.default=p,cc._RF.pop()},{"./Player":"Player"}],computer:[function(e,t,a){"use strict";cc._RF.push(t,"e3555OfbRVJfqVVS2aWjc+P","computer");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./Player"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.readyWindow=null,t.current_user_number=0,t}return o(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){var e=this,t=firebase.auth().currentUser.uid,a=0;firebase.database().ref("user_info/"+t).once("value",function(e){null!=e.val()&&(a=e.val().player_number)}),this.scheduleOnce(function(){e.current_user_number=a},1.5)},t.prototype.onBeginContact=function(e,t,a){if("player"==a.node.group){var n="player"+this.current_user_number.toString();a.node.name==n&&(console.log("open Computer"),this.readyWindow.active=!0,a.node.getComponent(i.default).moveable=!1,a.node.getComponent(i.default).getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0))}},r([l(cc.Node)],t.prototype,"readyWindow",void 0),r([s],t)}(cc.Component);a.default=p,cc._RF.pop()},{"./Player":"Player"}],fight_forum:[function(e,t,a){"use strict";cc._RF.push(t,"6ff61iG8iRKVLLASJ34EDGb","fight_forum");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,l=e("./battle_field"),p=e("../GameManager/GameManagerS5"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.opponent_info_choice=null,t.Mine_info_choice=null,t.battle_field=null,t.click=null,t.fight=!1,t.being_rude=!1,t.updated=!0,t}return o(t,e),t.prototype.start=function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component="fight_forum",e.handler="accept",cc.find("Canvas/UI/fight_forum/accept").getComponent(cc.Button).clickEvents.push(e);var t=new cc.Component.EventHandler;t.target=this.node,t.component="fight_forum",t.handler="reject",cc.find("Canvas/UI/fight_forum/reject").getComponent(cc.Button).clickEvents.push(t)},t.prototype.accept=function(){cc.audioEngine.playEffect(this.click,!1);var e=this;this.fight=!0,console.log("accept challenge"),firebase.database().ref("player_data/"+this.current_user+"/game2_state").update({fighting:"true"}),firebase.database().ref("player_data/"+this.current_user+"/game2_state").update({challenged:"false"}),firebase.database().ref("player_data/"+this.current_user+"/game2_state").once("value",function(t){e.opponent=t.val().opponent,firebase.database().ref("player_data/"+e.opponent+"/game2_state").update({opponent:e.current_user,fighting:"true"});var a=cc.find("GameManager").getComponent(p.default);e.Mine_info_choice.active=!0,e.opponent_info_choice.active=!0,e.battle_field.active=!0,e.battle_field.getComponent(l.default).opponent=e.opponent,a.opponent_user_node=e.opponent,a.fighting=!0,console.log("game manager fighting: "+a.fighting),e.being_rude&&(cc.find("Canvas/UI/fight_forum/reject").active=!0,e.being_rude=!1),cc.find("Canvas/UI/fight_forum").active=!1})},t.prototype.reject=function(){cc.audioEngine.playEffect(this.click,!1),firebase.database().ref("player_data/"+this.current_user+"/game2_state").update({opponent:"null"}),cc.find("Canvas/UI/fight_forum").active=!1},t.prototype.update=function(){},r([s(cc.Node)],t.prototype,"opponent_info_choice",void 0),r([s(cc.Node)],t.prototype,"Mine_info_choice",void 0),r([s(cc.Node)],t.prototype,"battle_field",void 0),r([s(cc.AudioClip)],t.prototype,"click",void 0),r([c],t)}(cc.Component);a.default=u,cc._RF.pop()},{"../GameManager/GameManagerS5":"GameManagerS5","./battle_field":"battle_field"}],fight_pressed:[function(e,t,a){"use strict";cc._RF.push(t,"2fbf79NN7BPYbI2p3WXvVNz","fight_pressed");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,l=e("../GameManager/GameManagerS5"),p=e("./fight_forum"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.click=null,t.fight_forum=null,t}return o(t,e),t.prototype.start=function(){this.parent_name=this.node.parent.name;var e=new cc.Component.EventHandler;e.target=this.node,e.component="fight_pressed",e.handler="fight_forum_open",cc.find("Canvas/PlayerContainer/"+this.parent_name+"/fight").getComponent(cc.Button).clickEvents.push(e);var t=new cc.Component.EventHandler;t.target=this.node,t.component="fight_pressed",t.handler="rude_forum_open",cc.find("Canvas/PlayerContainer/"+this.parent_name+"/unreasonable").getComponent(cc.Button).clickEvents.push(t)},t.prototype.fight_forum_open=function(){cc.audioEngine.playEffect(this.click,!1);var e=this,t=cc.find("GameManager").getComponent(l.default).current_user_node;firebase.database().ref("player_data/"+this.parent_name+"/game2_state").once("value",function(a){"null"==a.val().opponent&&(firebase.database().ref("player_data/"+e.parent_name+"/game2_state").update({opponent:t,challenged:"true"}),e.fight_forum.getComponent(p.default).being_rude=!1)})},t.prototype.rude_forum_open=function(){cc.audioEngine.playEffect(this.click,!1);var e=this,t=cc.find("GameManager").getComponent(l.default).current_user_node;firebase.database().ref("player_data/"+this.parent_name+"/game2_state").once("value",function(a){"null"==a.val().opponent&&firebase.database().ref("player_data/"+e.parent_name+"/game2_state").update({opponent:t,challenged:"absolute"})})},r([s(cc.AudioClip)],t.prototype,"click",void 0),r([s(cc.Node)],t.prototype,"fight_forum",void 0),r([c],t)}(cc.Component);a.default=u,cc._RF.pop()},{"../GameManager/GameManagerS5":"GameManagerS5","./fight_forum":"fight_forum"}],log:[function(e,t,a){"use strict";cc._RF.push(t,"a1318oSHlxFlIBMY42EGHQD","log");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.log_forum=null,t.account=null,t.password=null,t.close=null,t.login2=null,t.signin2=null,t.player1=null,t.player2=null,t.player3=null,t.player4=null,t.player5=null,t.spaceBG=null,t.LoadingBG=null,t.MutiTag=null,t.BGM=null,t.click=null,t.videoclip=null,t}return o(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){cc.audioEngine.playMusic(this.BGM,!0),console.log("1");var e=new cc.Component.EventHandler;console.log("1"),e.target=this.node,e.component="log",e.handler="login_forum",cc.find("Canvas/UI/log_in").getComponent(cc.Button).clickEvents.push(e);var t=new cc.Component.EventHandler;t.target=this.node,t.component="log",t.handler="signin_forum",console.log("2"),cc.find("Canvas/UI/sign_in").getComponent(cc.Button).clickEvents.push(t),console.log("2");var a=new cc.Component.EventHandler;a.target=this.node,a.component="log",a.handler="gameEnd",console.log("3"),cc.find("Canvas/UI/EXIT").getComponent(cc.Button).clickEvents.push(a),console.log("3");var n=new cc.Component.EventHandler;n.target=this.node,n.component="log",n.handler="email_signin",cc.find("Canvas/UI/sign_in2").getComponent(cc.Button).clickEvents.push(n);var o=new cc.Component.EventHandler;o.target=this.node,o.component="log",o.handler="email_login",cc.find("Canvas/UI/log_in2").getComponent(cc.Button).clickEvents.push(o);var r=new cc.Component.EventHandler;r.target=this.node,r.component="log",r.handler="close_forum",cc.find("Canvas/UI/close").getComponent(cc.Button).clickEvents.push(r),this.playerMove(2*Math.random()),this.backgroundMove()},t.prototype.login_forum=function(){cc.audioEngine.playEffect(this.click,!1),this.log_forum.active=!0,this.account.active=!0,this.password.active=!0,this.login2.active=!0,this.close.active=!0},t.prototype.signin_forum=function(){cc.audioEngine.playEffect(this.click,!1),this.log_forum.active=!0,this.account.active=!0,this.password.active=!0,this.signin2.active=!0,this.close.active=!0},t.prototype.close_forum=function(){cc.audioEngine.playEffect(this.click,!1),this.log_forum.active=!1,this.account.active=!1,this.password.active=!1,this.signin2.active=!1,this.login2.active=!1,this.close.active=!1},t.prototype.email_signin=function(){var e=this.account.getComponent(cc.EditBox).string;console.log(e);var t=this.password.getComponent(cc.EditBox).string;console.log(t),firebase.auth().createUserWithEmailAndPassword(e,t).then(function(){console.log("fuck yeah")}).catch(function(e){console.log(e)}),cc.audioEngine.playEffect(this.click,!1),this.close_forum()},t.prototype.email_login=function(){var e=this.account.getComponent(cc.EditBox).string;console.log(e);var t=this.password.getComponent(cc.EditBox).string;console.log(t);var a=this;firebase.auth().signInWithEmailAndPassword(e,t).then(function(t){var n={email:e,uid:t.user.uid,player_number:0};firebase.database().ref("user_list").on("value",function(a){var o=!1;a.forEach(function(e){e.val().uid==n.uid&&(o=!0)}),o||firebase.database().ref("player/player_number").once("value",function(a){if(null==a.val())n={email:e,uid:t.user.uid,player_number:1},firebase.database().ref("player/player_number").set({player_number:1}),firebase.database().ref("player_data/player1").set(n),firebase.database().ref("user_list").push(n),firebase.database().ref("user_info/"+t.user.uid).set(n);else{console.log(a.val().player_number);var o=a.val().player_number,r=parseInt(o,10)+1;firebase.database().ref("player/player_number").set({player_number:r}),n={email:e,uid:t.user.uid,player_number:r},firebase.database().ref("player_data/player"+r).set(n),firebase.database().ref("user_list").push(n),firebase.database().ref("user_info/"+t.user.uid).set(n)}})}),a.LoadingBG.active=!0,a.scheduleOnce(function(){cc.director.loadScene("Lobby")},2)}).catch(function(e){console.log(e)}),cc.audioEngine.playEffect(this.click,!1)},t.prototype.playerMove=function(){var e,t,a,n,o,r=this,i=cc.sequence(cc.moveBy(2.5,0,25).easing(cc.easeInOut(2)),cc.delayTime(.2),cc.moveBy(3.5,0,-25).easing(cc.easeInOut(2))),c=cc.sequence(cc.moveBy(2,-10,25).easing(cc.easeInOut(2)),cc.delayTime(.2),cc.moveBy(2,10,-25).easing(cc.easeInOut(2))),s=cc.sequence(cc.moveBy(2.5,-20,-10).easing(cc.easeInOut(2)),cc.delayTime(.2),cc.moveBy(1.5,20,10).easing(cc.easeInOut(2))),l=cc.sequence(cc.moveBy(4,20,15).easing(cc.easeInOut(2)),cc.delayTime(.2),cc.moveBy(4,-20,-15).easing(cc.easeInOut(2))),p=cc.sequence(cc.moveTo(0,-580,180),cc.moveBy(10,1200,-100),cc.delayTime(1),cc.moveTo(0,0,-450),cc.moveBy(10,-200,900),cc.delayTime(1),cc.moveTo(0,260,450),cc.moveBy(10,-1e3,-900),cc.delayTime(5)),u=cc.sequence(cc.rotateBy(10,360),cc.delayTime(1),cc.rotateBy(10,-360),cc.delayTime(1),cc.rotateBy(10,-360),cc.delayTime(5)),d=cc.spawn(p,u);e=cc.repeatForever(i),t=cc.repeatForever(c),a=cc.repeatForever(s),n=cc.repeatForever(l),o=cc.repeatForever(d),this.scheduleOnce(function(){r.player1.runAction(e),r.player2.runAction(t),r.player3.runAction(a),r.player4.runAction(n),r.player5.runAction(o)},1)},t.prototype.backgroundMove=function(){var e;e=cc.repeatForever(cc.rotateBy(100,360)),this.spaceBG.setScale(1.5,1.5),this.spaceBG.runAction(e);var t=cc.sequence(cc.scaleTo(1.5,.6).easing(cc.easeInOut(2)),cc.scaleTo(1.5,.5).easing(cc.easeInOut(2)),cc.delayTime(1));e=cc.repeatForever(t),this.MutiTag.runAction(e)},t.prototype.showWindow=function(){},t.prototype.gameEnd=function(){cc.game.end()},r([s(cc.Node)],t.prototype,"log_forum",void 0),r([s(cc.Node)],t.prototype,"account",void 0),r([s(cc.Node)],t.prototype,"password",void 0),r([s(cc.Node)],t.prototype,"close",void 0),r([s(cc.Node)],t.prototype,"login2",void 0),r([s(cc.Node)],t.prototype,"signin2",void 0),r([s(cc.Node)],t.prototype,"player1",void 0),r([s(cc.Node)],t.prototype,"player2",void 0),r([s(cc.Node)],t.prototype,"player3",void 0),r([s(cc.Node)],t.prototype,"player4",void 0),r([s(cc.Node)],t.prototype,"player5",void 0),r([s(cc.Node)],t.prototype,"spaceBG",void 0),r([s(cc.Node)],t.prototype,"LoadingBG",void 0),r([s(cc.Node)],t.prototype,"MutiTag",void 0),r([s(cc.AudioClip)],t.prototype,"BGM",void 0),r([s(cc.AudioClip)],t.prototype,"click",void 0),r([s(cc.VideoPlayer)],t.prototype,"videoclip",void 0),r([c],t)}(cc.Component);a.default=l,cc._RF.pop()},{}],opponent_betting_update:[function(e,t,a){"use strict";cc._RF.push(t,"41edd7AGmhAo4cjp+3ozieS","opponent_betting_update");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,l=e("../GameManager/GameManagerS5"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.opponent_bet=null,t}return o(t,e),t.prototype.start=function(){this.current_user=cc.find("GameManager").getComponent(l.default).current_user_node,this.opponent=cc.find("GameManager").getComponent(l.default).opponent_user_node},t.prototype.update=function(){var e=this;firebase.database().ref("player_data/"+this.opponent+"/game2_state/bet").once("value",function(t){null==t.val()?e.opponent_bet.getComponent(cc.RichText).string="1":e.opponent_bet.getComponent(cc.RichText).string=t.val().bet})},r([s(cc.Node)],t.prototype,"opponent_bet",void 0),r([c],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../GameManager/GameManagerS5":"GameManagerS5"}],panel_info:[function(e,t,a){"use strict";cc._RF.push(t,"8b223BWzeBPh6BpgH153s5e","panel_info");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=(i.property,e("../GameManager/GameManagerS5")),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.flag=!1,t}return o(t,e),t.prototype.start=function(){this.current_user=cc.find("GameManager").getComponent(s.default).current_user_node,this.paper_left=2,this.scissor_left=2,this.stone_left=2,this.money_left=5,cc.find("Canvas/UI/TopPanel/paper/number").getComponent(cc.Label).string=String(this.paper_left),cc.find("Canvas/UI/TopPanel/scissor/number").getComponent(cc.Label).string=String(this.scissor_left),cc.find("Canvas/UI/TopPanel/stone/number").getComponent(cc.Label).string=String(this.stone_left),cc.find("Canvas/UI/TopPanel/life/number").getComponent(cc.Label).string=String(this.money_left)},t.prototype.update_info=function(e,t){this.current_user=cc.find("GameManager").getComponent(s.default).current_user_node,"paper"==e?(firebase.database().ref("player_data/"+this.current_user+"/game2_state").update({paper:t}),cc.find("Canvas/UI/TopPanel/paper/number").getComponent(cc.Label).string=String(t),this.paper_left=t):"scissor"==e?(firebase.database().ref("player_data/"+this.current_user+"/game2_state").update({scissor:t}),cc.find("Canvas/UI/TopPanel/scissor/number").getComponent(cc.Label).string=String(t),this.scissor_left=t):"stone"==e?(firebase.database().ref("player_data/"+this.current_user+"/game2_state").update({stone:t}),cc.find("Canvas/UI/TopPanel/stone/number").getComponent(cc.Label).string=String(t),this.stone_left=t):"money"==e&&(firebase.database().ref("player_data/"+this.current_user+"/game2_state").update({money:t}),cc.find("Canvas/UI/TopPanel/life/number").getComponent(cc.Label).string=String(t),this.money_left=t)},t.prototype.update=function(){if(0==this.flag){var e=this;this.current_user=cc.find("GameManager").getComponent(s.default).current_user_node,null!=this.current_user&&(this.flag=!0,firebase.database().ref("player_data/"+this.current_user+"/game2_state").once("value",function(t){cc.find("Canvas/UI/TopPanel/life/number").getComponent(cc.Label).string=String(t.val().money),e.money_left=t.val().money}))}},r([c],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../GameManager/GameManagerS5":"GameManagerS5"}],ready_to_S1:[function(e,t,a){"use strict";cc._RF.push(t,"ab0aeUex1hCEZENd0Yns22t","ready_to_S1");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.condition=!1,t}return o(t,e),t.prototype.start=function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component="ready_to_S1",e.handler="ready_player",cc.find("Canvas/ready").getComponent(cc.Button).clickEvents.push(e)},t.prototype.ready_player=function(){firebase.auth().currentUser,firebase.database().ref("game1/player_ready_number").once("value",function(e){null==e.val()?firebase.database().ref("game1/player_ready_number").set({number:1}):"1"==e.val().number&&firebase.database().ref("game1/player_ready_number").set({number:2})});var e=(new Date).getTime();this.old_time=e,console.log("old_time: "+this.old_time),firebase.database().ref("sessions").set({startedAt:firebase.database.ServerValue.TIMESTAMP});var t=this;firebase.database().ref("sessions").once("value",function(e){t.servertime=e.val().startedAt}),console.log("delay from p1 to server: "+(t.servertime-this.old_time));var a=(new Date).getTime();console.log(a-this.old_time),this.delay=(a-this.old_time)/1e3,console.log("delay from server to p1: "+(a-t.servertime))},t.prototype.update=function(){firebase.auth().currentUser;var e=this,t=(new Date).getTime();0==this.condition&&firebase.database().ref("game1/player_ready_number").once("value",function(a){if(null!=a.val()&&"2"==a.val().number){e.condition=!0;var n=(new Date).getTime(),o=Math.abs((n-t)/2e3);console.log("delay time: "+o),e.scheduleOnce(function(){cc.director.loadScene("GameStage2")},2-o)}})},r([c],t)}(cc.Component));a.default=s,cc._RF.pop()},{}],special_player:[function(e,t,a){"use strict";cc._RF.push(t,"48e551j+rZENaIVObxSpu/A","special_player");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../CameraManager"),c=e("../GameManager/GameManagerS5"),s=e("../UImanager"),l=e("../Game5Object/Mine_info_choice"),p=e("../Game5Object/fight_forum"),u=e("../Game5Object/battle_field"),d=cc._decorator,f=d.ccclass,h=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerSpeed=0,t.Mine_info_choice=null,t.battle_field=null,t.fight_forum=null,t.child_node=null,t.child_label=null,t.rigidbody=null,t.anim=null,t.child_anim=null,t.leftDown=!1,t.rightDown=!1,t.upDown=!1,t.downDown=!1,t.premoveDirX=0,t.moveDirX=0,t.moveDirY=0,t.premoveDirX_firebase=0,t.moveDirX_firebase=0,t.moveDirY_firebase=0,t.logged_in_or_not=!1,t.moveable=!0,t.moveableKey=!0,t}return o(t,e),t.prototype.onLoad=function(){var e=this,t=this,a=this.node.name,n=firebase.auth().currentUser.uid;this.current_user=n,firebase.database().ref("player_data/"+a).once("value",function(e){t.permited_user=e.val().uid,null!=e.val()&&(t.node.active=!0,t.logged_in_or_not=!0),n==t.permited_user&&(firebase.database().ref("player_data/"+a+"/state_value/moveDirX").set({Dir:0}),firebase.database().ref("player_data/"+a+"/state_value/moveDirY").set({Dir:0}),firebase.database().ref("player_data/"+a+"/state_value/moveable").set({moveable:"true"}),firebase.database().ref("player_data/"+a+"/state_value/moveableKey").set({moveableKey:"true"}),firebase.database().ref("player_data/"+a+"/state_value/premoveDirX").set({Dir:0}),firebase.database().ref("player_data/"+a+"/state_value/X").set({x:0}),firebase.database().ref("player_data/"+a+"/state_value/Y").set({y:0}))}),this.scheduleOnce(function(){e.this_node_user=t.permited_user,console.log("nodeuser:",e.node.name,e.this_node_user),console.log("currentuser:",e.current_user),e.current_user==e.this_node_user&&(cc.find("Canvas/Main Camera").getComponent(i.default).FollowTarget=e.node,cc.find("Canvas/UI").getComponent(s.default).FollowTarget=e.node,e.node.getChildByName("fight").active=!1,cc.find("GameManager").getComponent(c.default).current_user_node=e.node.name,e.Mine_info_choice.getComponent(l.default).current_user=e.node.name,e.fight_forum.getComponent(p.default).current_user=e.node.name,e.battle_field.getComponent(u.default).current_user,e.node.name)},.25)},t.prototype.get_current_user_uid=function(){return this.permited_user},t.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.rigidbody=this.node.getComponent(cc.RigidBody),this.child_node=this.node.getChildByName(this.node.name),this.child_label=this.node.getChildByName("Label"),this.child_anim=this.child_node.getComponent(cc.Animation),this.child_anim.play("Idle"),this.schedule(this.updateOthersCurrentPos,1)},t.prototype.update=function(){var e=this;if(!this.logged_in_or_not){var t=this;firebase.database().ref("player_data/"+this.node.name).once("value",function(e){null!=e.val()&&(t.node.active=!0)})}var a=this.node.name,n=this.moveDirX_firebase,o=this.moveDirY_firebase,r=this.premoveDirX_firebase,i=this.node.position.x,c=this.node.position.y;this.current_user==this.this_node_user&&(firebase.database().ref("player_data/"+a+"/state_value/moveDirX").set({Dir:n}),firebase.database().ref("player_data/"+a+"/state_value/moveDirY").set({Dir:o}),firebase.database().ref("player_data/"+a+"/state_value/premoveDirX").set({Dir:r}),firebase.database().ref("player_data/"+a+"/state_value/X").set({x:i}),firebase.database().ref("player_data/"+a+"/state_value/Y").set({y:c}),firebase.database().ref("player_data/"+a+"/game2_state").once("value",function(e){var t=e.val().opponent,a=e.val().challenged;"null"!=t&&"true"==a?(cc.find("Canvas/UI/fight_forum").active=!0,cc.find("Canvas/UI/fight_forum/context").getComponent(cc.RichText).string=t+" asks to fight with you"):"null"!=t&&"absolute"==a&&(cc.find("Canvas/UI/fight_forum").active=!0,cc.find("Canvas/UI/fight_forum").getComponent(p.default).being_rude=!0,cc.find("Canvas/UI/fight_forum/reject").active=!1,cc.find("Canvas/UI/fight_forum/context").getComponent(cc.RichText).string=t+" asks to fight with you")})),n=0,o=0,r=0,firebase.database().ref("player_data/"+a+"/state_value").once("value",function(e){null!=e.val()&&(n=e.val().moveDirX.Dir,o=e.val().moveDirY.Dir,r=e.val().premoveDirX.Dir)}),this.scheduleOnce(function(){e.moveDirX=n,e.moveDirY=o,e.premoveDirX=r},.2),this.child_node.scaleX=this.moveDirX>=0?1:-1,0==this.moveDirX&&(this.child_node.scaleX=this.premoveDirX>=0?1:-1),0==this.moveDirX?this.moveable&&(this.rigidbody.linearVelocity=cc.v2(0,this.playerSpeed*this.moveDirY)):0==this.moveDirY?this.moveable&&(this.rigidbody.linearVelocity=cc.v2(this.playerSpeed*this.moveDirX,0)):this.moveable&&(this.rigidbody.linearVelocity=cc.v2(this.playerSpeed*this.moveDirX*.7,this.playerSpeed*this.moveDirY*.7)),0==this.moveDirX&&0==this.moveDirY||!this.moveable?this.child_anim.getAnimationState("Idle").isPlaying||this.child_anim.play("Idle"):this.child_anim.getAnimationState("Move").isPlaying||this.child_anim.play("Move")},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.a:this.leftDown=!0,this.playerMoveX(-1);break;case cc.macro.KEY.d:this.rightDown=!0,this.playerMoveX(1);break;case cc.macro.KEY.w:this.upDown=!0,this.playerMoveY(1);break;case cc.macro.KEY.s:this.downDown=!0,this.playerMoveY(-1)}},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.a:this.leftDown=!1,this.rightDown?this.playerMoveX(1):this.playerMoveX(0);break;case cc.macro.KEY.d:this.rightDown=!1,this.leftDown?this.playerMoveX(-1):this.playerMoveX(0);break;case cc.macro.KEY.w:this.upDown=!1,this.downDown?this.playerMoveY(-1):this.playerMoveY(0);break;case cc.macro.KEY.s:this.downDown=!1,this.upDown?this.playerMoveY(1):this.playerMoveY(0)}},t.prototype.playerMoveX=function(e){this.current_user==this.this_node_user&&this.moveableKey&&(this.premoveDirX_firebase=this.moveDirX_firebase,this.moveDirX_firebase=e)},t.prototype.playerMoveY=function(e){this.current_user==this.this_node_user&&this.moveableKey&&(this.moveDirY_firebase=e)},t.prototype.updateOthersCurrentPos=function(){var e=this;if(this.current_user!=this.this_node_user){var t=this.node.name,a=-1487,n=-1487;firebase.database().ref("player_data/"+t+"/state_value").once("value",function(e){null!=e.val()&&(a=e.val().X.x,n=e.val().Y.y,e.val().moveDirX.Dir,e.val().moveDirY.Dir)}),this.scheduleOnce(function(){var t;-1487==a&&-1487==n||(t=cc.moveTo(.5,a,n),e.node.runAction(t))},.2)}},r([h()],t.prototype,"playerSpeed",void 0),r([h(cc.Node)],t.prototype,"Mine_info_choice",void 0),r([h(cc.Node)],t.prototype,"battle_field",void 0),r([h(cc.Node)],t.prototype,"fight_forum",void 0),r([f],t)}(cc.Component);a.default=y,cc._RF.pop()},{"../CameraManager":"CameraManager","../Game5Object/Mine_info_choice":"Mine_info_choice","../Game5Object/battle_field":"battle_field","../Game5Object/fight_forum":"fight_forum","../GameManager/GameManagerS5":"GameManagerS5","../UImanager":"UImanager"}],switching_from_waiting:[function(e,t,a){"use strict";cc._RF.push(t,"84ac8kBBlNKBbKvfHIaeqHc","switching_from_waiting");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.condition=!1,t}return o(t,e),t.prototype.start=function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component="switching_from_waiting",e.handler="ready_player",cc.find("Canvas/ready").getComponent(cc.Button).clickEvents.push(e);var t=new cc.Component.EventHandler;t.target=this.node,t.component="switching_from_waiting",t.handler="go_player",cc.find("Canvas/go").getComponent(cc.Button).clickEvents.push(t);var a=new cc.Component.EventHandler;a.target=this.node,a.component="switching_from_waiting",a.handler="go_Stage1",cc.find("Canvas/Stage1").getComponent(cc.Button).clickEvents.push(a);var n=new cc.Component.EventHandler;n.target=this.node,n.component="switching_from_waiting",n.handler="go_Stage2",cc.find("Canvas/Stage2").getComponent(cc.Button).clickEvents.push(n);var o=new cc.Component.EventHandler;o.target=this.node,o.component="switching_from_waiting",o.handler="go_Stage3",cc.find("Canvas/Stage3").getComponent(cc.Button).clickEvents.push(o);var r=new cc.Component.EventHandler;r.target=this.node,r.component="switching_from_waiting",r.handler="go_Stage4",cc.find("Canvas/Stage4").getComponent(cc.Button).clickEvents.push(r);var i=new cc.Component.EventHandler;i.target=this.node,i.component="switching_from_waiting",i.handler="go_Stage5",cc.find("Canvas/Stage5").getComponent(cc.Button).clickEvents.push(i)},t.prototype.ready_player=function(){firebase.auth().currentUser,firebase.database().ref("player/player_number").once("value",function(){}),firebase.database().ref("player/ready_number").once("value",function(e){null==e.val()?firebase.database().ref("player/ready_number").set({number:1}):"1"==e.val().number&&firebase.database().ref("player/ready_number").set({number:2})})},t.prototype.go_player=function(){cc.director.loadScene("Lobby")},t.prototype.go_Stage1=function(){cc.director.loadScene("GameStage1")},t.prototype.go_Stage2=function(){cc.director.loadScene("GameStage2")},t.prototype.go_Stage3=function(){cc.director.loadScene("GameStage3")},t.prototype.go_Stage4=function(){cc.director.loadScene("GameStage4")},t.prototype.go_Stage5=function(){cc.director.loadScene("GameStage5")},t.prototype.update=function(){var e=this;0==this.condition&&firebase.database().ref("player/ready_number").once("value",function(t){null!=t.val()&&"2"==t.val().number&&(cc.find("Canvas/go").active=!0,console.log(e.condition),e.condition=!0)})},r([c],t)}(cc.Component));a.default=s,cc._RF.pop()},{}],utility:[function(e,t,a){"use strict";cc._RF.push(t,"e7b61V4ulNIU6pnoc0mNIWa","utility");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,l=e("../GameManager/GameManagerS5"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.soundEffect=[],t}return o(t,e),t.prototype.start=function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component="utility",e.handler="selection",cc.find("Canvas/MapObjContainer/character_utility/"+this.node.name+"/Button").getComponent(cc.Button).clickEvents.push(e)},t.prototype.selection=function(){var e=cc.find("GameManager").getComponent(l.default);if(this.current_user=e.current_user_node,console.log("finally   "+this.node.name),!e.select_character)switch(this.node.name){case"book":firebase.database().ref("player_data/"+this.current_user+"/character").set({character:"erudite"}),e.select_character=!0,e.character="erudite",cc.find("Canvas/UI/Character/book").active=!0,cc.find("Canvas/UI/Character/clover").active=!1,cc.find("Canvas/UI/Character/bomb").active=!1,cc.find("Canvas/UI/Character/coin").active=!1,cc.find("Canvas/UI/Character/ring").active=!1,cc.find("Canvas/UI/hint_message").getComponent(cc.Label).string="Now you can peak card distribution";break;case"bomb":firebase.database().ref("player_data/"+this.current_user+"/character").set({character:"thug"}),e.select_character=!0,e.character="thug";for(var t=1;t<=5;t++)"player"+t!=this.current_user&&(cc.find("Canvas/PlayerContainer/player"+t+"/unreasonable").active=!0);cc.find("Canvas/UI/Character/book").active=!1,cc.find("Canvas/UI/Character/clover").active=!1,cc.find("Canvas/UI/Character/bomb").active=!0,cc.find("Canvas/UI/Character/coin").active=!1,cc.find("Canvas/UI/Character/ring").active=!1,cc.find("Canvas/UI/hint_message").getComponent(cc.Label).string="Now other can't reject your fight request";break;case"black_clover":firebase.database().ref("player_data/"+this.current_user+"/character").set({character:"gambler"}),e.select_character=!0,cc.find("Canvas/UI/Mine_info_choice/gambler_ability").active=!0,cc.find("Canvas/UI/Mine_info_choice/betting_multiple").active=!0,cc.find("Canvas/UI/Character/book").active=!1,cc.find("Canvas/UI/Character/clover").active=!0,cc.find("Canvas/UI/Character/bomb").active=!1,cc.find("Canvas/UI/Character/coin").active=!1,cc.find("Canvas/UI/Character/ring").active=!1,cc.find("Canvas/UI/hint_message").getComponent(cc.Label).string="Now you can gain more when you win",e.character="gambler";break;case"ring":firebase.database().ref("player_data/"+this.current_user+"/character").set({character:"rule_breaker"}),e.select_character=!0,e.character="rule_breaker",firebase.database().ref("player_data/"+this.current_user+"/game2_state/reverse").set({reverse:"true"}),cc.find("Canvas/UI/Mine_info_choice/switch_result").active=!0,cc.find("Canvas/UI/Character/book").active=!1,cc.find("Canvas/UI/Character/clover").active=!1,cc.find("Canvas/UI/Character/bomb").active=!1,cc.find("Canvas/UI/Character/coin").active=!1,cc.find("Canvas/UI/Character/ring").active=!0,cc.find("Canvas/UI/hint_message").getComponent(cc.Label).string="Now you can reverse the fighting result";break;case"coin":firebase.database().ref("player_data/"+this.current_user+"/character").set({character:"escaper"}),e.select_character=!0,e.character="escaper",cc.find("Canvas/UI/Mine_info_choice/escape").active=!0,cc.find("Canvas/UI/Character/book").active=!1,cc.find("Canvas/UI/Character/clover").active=!1,cc.find("Canvas/UI/Character/bomb").active=!1,cc.find("Canvas/UI/Character/coin").active=!0,cc.find("Canvas/UI/Character/ring").active=!1,cc.find("Canvas/UI/hint_message").getComponent(cc.Label).string="Now you can escape from fight"}cc.audioEngine.playEffect(this.soundEffect[0],!1),cc.find("Canvas/MapObjContainer/character_utility/book").active=!1,cc.find("Canvas/MapObjContainer/character_utility/bomb").active=!1,cc.find("Canvas/MapObjContainer/character_utility/black_clover").active=!1,cc.find("Canvas/MapObjContainer/character_utility/coin").active=!1,cc.find("Canvas/MapObjContainer/character_utility/ring").active=!1;var a=cc.fadeOut(5);this.scheduleOnce(function(){cc.find("Canvas/UI/hint_message").active=!0,cc.find("Canvas/UI/hint_message").runAction(a)},.1),cc.find("Canvas/UI/hint_message").active=!1,cc.find("Canvas/UI/hint_message").opacity=255},r([s({type:cc.AudioClip})],t.prototype,"soundEffect",void 0),r([c],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../GameManager/GameManagerS5":"GameManagerS5"}]},{},["CameraManager","ChangingGround","PlayerGhost","TransGround","GameManagerCoin","PlayerCoin","coinManager","Mine_info_choice","TranGround_special","battle_field","fight_forum","fight_pressed","opponent_betting_update","panel_info","special_player","utility","GameEndManager","GameManagerS1","GameManagerS2","GameManagerS3","GameManagerS4","GameManagerS5","InteractWall","LobbyManager","Player","UImanager","computer","computerRule","log","ready_to_S1","switching_from_waiting"]);