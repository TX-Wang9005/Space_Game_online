{"version":3,"sources":["assets\\Script\\switching_from_waiting.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\ndeclare const firebase: any;\r\n\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n   \r\n\r\n\r\n    condition = false;\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start() {\r\n        let ready_press = new cc.Component.EventHandler();\r\n        //console.log(\"1\")\r\n        ready_press.target = this.node;\r\n        ready_press.component = \"switching_from_waiting\";\r\n        ready_press.handler = \"ready_player\";\r\n        cc.find(\"Canvas/ready\").getComponent(cc.Button).clickEvents.push(ready_press);\r\n        let go_press = new cc.Component.EventHandler();\r\n        //console.log(\"1\")\r\n        go_press.target = this.node;\r\n        go_press.component = \"switching_from_waiting\";\r\n        go_press.handler = \"go_player\";\r\n        cc.find(\"Canvas/go\").getComponent(cc.Button).clickEvents.push(go_press);\r\n\r\n        // Stage button for test\r\n        let Stage1_btn = new cc.Component.EventHandler();\r\n        Stage1_btn.target = this.node;\r\n        Stage1_btn.component = \"switching_from_waiting\";\r\n        Stage1_btn.handler = \"go_Stage1\";\r\n        cc.find(\"Canvas/Stage1\").getComponent(cc.Button).clickEvents.push(Stage1_btn);\r\n        let Stage2_btn = new cc.Component.EventHandler();\r\n        Stage2_btn.target = this.node;\r\n        Stage2_btn.component = \"switching_from_waiting\";\r\n        Stage2_btn.handler = \"go_Stage2\";\r\n        cc.find(\"Canvas/Stage2\").getComponent(cc.Button).clickEvents.push(Stage2_btn);\r\n        let Stage3_btn = new cc.Component.EventHandler();\r\n        Stage3_btn.target = this.node;\r\n        Stage3_btn.component = \"switching_from_waiting\";\r\n        Stage3_btn.handler = \"go_Stage3\";\r\n        cc.find(\"Canvas/Stage3\").getComponent(cc.Button).clickEvents.push(Stage3_btn);\r\n        let Stage4_btn = new cc.Component.EventHandler();\r\n        Stage4_btn.target = this.node;\r\n        Stage4_btn.component = \"switching_from_waiting\";\r\n        Stage4_btn.handler = \"go_Stage4\";\r\n        cc.find(\"Canvas/Stage4\").getComponent(cc.Button).clickEvents.push(Stage4_btn);\r\n        let Stage5_btn = new cc.Component.EventHandler();\r\n        Stage5_btn.target = this.node;\r\n        Stage5_btn.component = \"switching_from_waiting\";\r\n        Stage5_btn.handler = \"go_Stage5\";\r\n        cc.find(\"Canvas/Stage5\").getComponent(cc.Button).clickEvents.push(Stage5_btn);\r\n\r\n\r\n\r\n    }\r\n\r\n    ready_player() {\r\n        var user = firebase.auth().currentUser;\r\n        firebase.database().ref('player/player_number').once('value', function (snapshot) {\r\n        })\r\n        firebase.database().ref('player/ready_number').once('value', function (snapshot) {\r\n            if (snapshot.val() == null) {\r\n                firebase.database().ref('player/ready_number').set({ number: 1 });\r\n            }\r\n            else if (snapshot.val().number == '1') {\r\n                firebase.database().ref('player/ready_number').set({ number: 2 });\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    go_player() {\r\n        cc.director.loadScene(\"Lobby\")\r\n    }\r\n    go_Stage1() {\r\n        cc.director.loadScene(\"GameStage1\")\r\n    }\r\n    go_Stage2() {\r\n        cc.director.loadScene(\"GameStage2\")\r\n    }\r\n    go_Stage3() {\r\n        cc.director.loadScene(\"GameStage3\")\r\n    }\r\n    go_Stage4() {\r\n        cc.director.loadScene(\"GameStage4\")\r\n    }\r\n    go_Stage5() {\r\n        cc.director.loadScene(\"GameStage5\")\r\n    }\r\n\r\n    update(dt) {\r\n        let handle = this;\r\n        if (this.condition == false) {\r\n            //not all the players have been assigned to ready yet\r\n            firebase.database().ref('player/ready_number').once('value', function (snapshot) {\r\n                if (snapshot.val() != null) {\r\n                    if (snapshot.val().number == '2') {\r\n                        cc.find(\"Canvas/go\").active = true;\r\n                        console.log(handle.condition)\r\n                        handle.condition = true;\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n"]}