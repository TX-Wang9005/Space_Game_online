{"version":3,"sources":["assets\\Script\\Game4Object\\GameManagerCoin.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import PlayerCoin from \"./PlayerCoin\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\ndeclare const firebase: any;\r\n\r\n@ccclass\r\nexport default class GameManagerCoin extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    loadingBG: cc.Node = null; \r\n    @property(cc.Node)\r\n    GameoverBG: cc.Node = null;\r\n    @property(cc.Node)\r\n    TimerLabel: cc.Node = null;\r\n    @property(cc.Node)\r\n    coinLabel: cc.Node = null;\r\n    @property(cc.Node)\r\n    killCountLabel: cc.Node = null;\r\n    @property(cc.AudioClip)\r\n    CoinSound: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    ThiefSound: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    StealCoinSound: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    BGM: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    ScoreSound: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    GameOverSound: cc.AudioClip = null;\r\n\r\n    @property(cc.Node)\r\n    CoinContainer: cc.Node = null;\r\n    @property()\r\n    GameTime: number = 120;\r\n\r\n    player_node1: cc.Node = null;\r\n    player_node2: cc.Node = null;\r\n    player_node3: cc.Node = null;\r\n    player_node4: cc.Node = null;\r\n    player_node5: cc.Node = null;\r\n\r\n    private physicManager: cc.PhysicsManager = null;\r\n\r\n    private current_user_number: number = 0;\r\n\r\n    private timer: number = 0;\r\n    private timeUp: boolean = false;\r\n\r\n    current_coin: number = 0; // 用於記錄自己的Coin\r\n    killcount: number = 0; // 用於記錄自己killcount\r\n    killtimer: number = 0; \r\n    cooldown: boolean = false;\r\n\r\n    onLoad () {\r\n        this.physicManager = cc.director.getPhysicsManager();\r\n        this.physicManager.enabled = true;\r\n        this.physicManager.gravity = cc.v2(0, 0);\r\n        \r\n        var uid = firebase.auth().currentUser.uid;\r\n        let t = this;\r\n        firebase.database().ref(`user_info/${uid}`).once('value', function (snapshot) {\r\n            if(snapshot.val() != null){\r\n                t.current_user_number = snapshot.val().player_number;\r\n                console.log(\"Game Coin current_user_number is \", t.current_user_number);\r\n            }\r\n        });\r\n    }\r\n\r\n    start () {\r\n        this.loadingBG.active = true;\r\n        // 一開始所有玩家都不能動\r\n        this.player_node1 = cc.find(\"Canvas/PlayerContainer/player1\");\r\n        this.player_node2 = cc.find(\"Canvas/PlayerContainer/player2\");\r\n        this.player_node3 = cc.find(\"Canvas/PlayerContainer/player3\");\r\n        this.player_node4 = cc.find(\"Canvas/PlayerContainer/player4\");\r\n        this.player_node5 = cc.find(\"Canvas/PlayerContainer/player5\");\r\n        if (this.player_node1) this.player_node1.getComponent(PlayerCoin).moveable = false;\r\n        if (this.player_node2) this.player_node2.getComponent(PlayerCoin).moveable = false;\r\n        if (this.player_node3) this.player_node3.getComponent(PlayerCoin).moveable = false;\r\n        if (this.player_node4) this.player_node4.getComponent(PlayerCoin).moveable = false;\r\n        if (this.player_node5) this.player_node5.getComponent(PlayerCoin).moveable = false;\r\n        this.scheduleOnce(() => {\r\n            this.loadingBG.active = false;\r\n            if (this.player_node1) this.player_node1.getComponent(PlayerCoin).moveable = true;\r\n            if (this.player_node2) this.player_node2.getComponent(PlayerCoin).moveable = true;\r\n            if (this.player_node3) this.player_node3.getComponent(PlayerCoin).moveable = true;\r\n            if (this.player_node4) this.player_node4.getComponent(PlayerCoin).moveable = true;\r\n            if (this.player_node5) this.player_node5.getComponent(PlayerCoin).moveable = true;\r\n\r\n            this.CoinContainer.active = true;\r\n            this.TimerStart();\r\n            cc.audioEngine.playMusic(this.BGM, true);\r\n            cc.audioEngine.setMusicVolume(2);\r\n        }, 3);        \r\n        this.Init_player();\r\n    }\r\n    // update (dt) {}\r\n\r\n    Init_player(){\r\n        let handle = this;\r\n        // initialize players  \r\n        let arrX = [272, -672, -957, 607, 1680];\r\n        let arrY = [96, 697, -893, -682, 433];\r\n        for (let i = 1; i <= 5; i++) {\r\n            firebase.database().ref(`player/player${i}_islogin`).once('value', function (snapshot) { // 如果玩家存在\r\n                if (snapshot.val() == true) {\r\n                    cc.find(`Canvas/PlayerContainer/player${i}`).active = true;\r\n                    firebase.database().ref(`player_data/player${i}/state_value/moveDirX`).set({ Dir: 0 })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/moveDirY`).set({ Dir: 0 })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/premoveDirX`).set({ Dir: 0 })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/moveable`).set({ moveable: \"true\" })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/X`).set({ x: arrX[i-1] })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/Y`).set({ y: arrY[i-1] })\r\n                    firebase.database().ref(`GameCoin/player${i}`).set({ coin: 0, state: \"player\"});\r\n                }\r\n            })\r\n        }\r\n        // initial End\r\n    }\r\n    // timer\r\n    TimerStart(){\r\n        this.timer = this.GameTime;\r\n        this.TimerLabel.getComponent(cc.Label).string = this.GameTime.toString();\r\n        this.schedule(this.UpdateTimer, 1);\r\n    }\r\n    UpdateTimer(){\r\n        if(this.timeUp) return;\r\n        if(this.timer > 0) this.timer += -1;\r\n        else if(this.timer == 0) this.timeUp = true;\r\n        this.TimerLabel.getComponent(cc.Label).string = this.timer.toString();\r\n\r\n        if(this.timeUp){\r\n            this.GameOver();\r\n        }        \r\n    }\r\n    GameOver(){\r\n        cc.audioEngine.stopMusic();\r\n        this.scheduleOnce(()=>{\r\n            cc.audioEngine.playEffect(this.GameOverSound, false);\r\n        }, 0.5);\r\n        this.GameoverBG.active = true;\r\n        let scoreboard = this.GameoverBG.getChildByName(\"Score\");\r\n        let scorepoint = scoreboard.getChildByName(\"Scorepoint\").getComponent(cc.Label);\r\n        let point = scoreboard.getChildByName(\"Point\").getComponent(cc.Label);\r\n        let arr = [0,0,0,0,0];\r\n        for(let i=1;i<=5;i++){\r\n            firebase.database().ref(`GameCoin/player${i}`).once('value', function (snaphot){\r\n                if(snaphot.val() != null){\r\n                    console.log(\"player\",i, \"Coin\",snaphot.val().coin);\r\n                    arr[i-1] = snaphot.val().coin;\r\n                }\r\n            });\r\n        }\r\n        this.scheduleOnce(() => {\r\n            scoreboard.active = true;\r\n            let str = \"\\n\";\r\n            str += arr[0] + \"\\n\";\r\n            str += arr[1] + \"\\n\";\r\n            str += arr[2] + \"\\n\";\r\n            str += arr[3] + \"\\n\";\r\n            str += arr[4];\r\n            scorepoint.string = str;\r\n            cc.audioEngine.playEffect(this.ScoreSound, false);\r\n        }, 3);\r\n        this.scheduleOnce(() => {\r\n            let arr2 = [];\r\n            let cnt = 0;\r\n            for (let i = 0; i < 5; i++) {\r\n                cnt = 0;\r\n                for (let j = 0; j < 5; j++) {\r\n                    if (arr[i] < arr[j]) cnt++;\r\n                }\r\n                if (arr[i] != 0) {\r\n                    arr2.push(80 - 20 * cnt);\r\n                } else {\r\n                    arr2.push(0);\r\n                }\r\n            }\r\n            let str = \"\";\r\n            for (let i = 0; i < 5; i++) {\r\n                str += \"\\n+ \" + arr2[i].toString();\r\n            }\r\n            point.string = str;\r\n            cc.audioEngine.playEffect(this.ScoreSound, false);\r\n            // firebase\r\n            firebase.database().ref(`GameResult/Round3`).set({\r\n                player1: arr2[0],\r\n                player2: arr2[1],\r\n                player3: arr2[2],\r\n                player4: arr2[3],\r\n                player5: arr2[4],\r\n            });\r\n        }, 5);\r\n        this.scheduleOnce(() => {\r\n            cc.director.loadScene(\"GameStage5\");\r\n        }, 10);\r\n    }\r\n\r\n    UpdateKillCount(t: number){\r\n        this.killcount += t;\r\n        if(this.killcount < 0) this.killcount = 0;\r\n        this.killCountLabel.getComponent(cc.Label).string = this.killcount.toString();\r\n    }\r\n    BecomeThief(player_name: string){\r\n        let str = \"player\"+this.current_user_number.toString();\r\n        if(str != player_name) return;\r\n        if(this.killcount <= 0 || this.cooldown || this.timer < 20) {\r\n            console.log(\"Can't be thief\");\r\n            return;\r\n        }else{\r\n            console.log(\"player\", this.current_user_number,\"BecomeThief!\");\r\n            if(this.ThiefSound) cc.audioEngine.playEffect(this.ThiefSound, false);\r\n            this.cooldown = true;\r\n            this.killtimer = 30;\r\n            this.killcount += -1;\r\n            this.killCountLabel.getComponent(cc.Label).string = this.killcount.toString();\r\n            this.schedule(this.CooldownTimer, 1);\r\n            // firebase\r\n            let t = this;\r\n            firebase.database().ref(`GameCoin/player${this.current_user_number}`).update({ state: \"thief\" });\r\n            this.scheduleOnce(()=>{\r\n                firebase.database().ref(`GameCoin/player${this.current_user_number}`).update({ state: \"player\" });\r\n                // firebase\r\n                let t = this;\r\n                firebase.database().ref(`GameCoin/player${t.current_user_number}`).once('value', function(snaphot){\r\n                    let c = snaphot.val().coin;\r\n                    if(t.current_coin != c){ // 代表偷盜錢\r\n                        if(t.StealCoinSound) cc.audioEngine.playEffect(t.StealCoinSound, false);\r\n                    }\r\n                    t.current_coin = c;\r\n                    t.coinLabel.getComponent(cc.Label).string = c.toString();\r\n                    \r\n                });\r\n            }, 15);\r\n        }\r\n    }\r\n    CooldownTimer(){\r\n        this.killtimer += -1;\r\n        // console.log(\"BecomeThief Cooldown in\", this.killtimer);\r\n        if(this.killtimer <= 0){\r\n            console.log(\"BecomeThief Cooldown!\");\r\n            this.killtimer = 0;\r\n            this.cooldown = false;\r\n            this.unschedule(this.CooldownTimer);\r\n        }\r\n    }\r\n    UpdateCoin(coin: number, player_name: string){\r\n        let str = \"player\"+this.current_user_number.toString();\r\n        if(str != player_name) return;\r\n        if(this.current_coin % 10 == 9) {\r\n            this.UpdateKillCount(1);\r\n            let p = cc.find(`Canvas/PlayerContainer/player${this.current_user_number}`);\r\n            p.getComponent(PlayerCoin).playerSpeed *= 0.9;\r\n            p.runAction(cc.scaleBy(0.5, 1.1));\r\n        }\r\n        if(this.CoinSound) cc.audioEngine.playEffect(this.CoinSound, false);\r\n        // firebase\r\n        let t = this;\r\n        firebase.database().ref(`GameCoin/player${t.current_user_number}`).once('value', function(snaphot){\r\n            let c = snaphot.val().coin;\r\n            t.current_coin = c + coin;\r\n            t.coinLabel.getComponent(cc.Label).string = t.current_coin.toString();\r\n            firebase.database().ref(`GameCoin/player${t.current_user_number}`).update({ coin: t.current_coin });\r\n        });\r\n    }\r\n    playerDie(player_name: string){\r\n        let str = \"player\"+this.current_user_number.toString();\r\n        if(str != player_name) return;\r\n        // 金幣清零\r\n        this.current_coin = 0;\r\n        // firebase\r\n        firebase.database().ref(`GameCoin/player${this.current_user_number}`).update({ coin: 0 });\r\n        this.coinLabel.getComponent(cc.Label).string = this.current_coin.toString();\r\n        // 速度 大小復原    \r\n        let p = cc.find(`Canvas/PlayerContainer/player${this.current_user_number}`);\r\n        p.getComponent(PlayerCoin).playerSpeed = 150;\r\n        p.runAction(cc.scaleTo(0.1, 1));\r\n        // 傳送復活點\r\n        p.getComponent(PlayerCoin).rigidbody.linearVelocity = cc.v2(0, 0);\r\n        // p.getComponent(PlayerCoin).moveable = false;\r\n        let action: cc.Action;\r\n        let s = cc.sequence(cc.fadeOut(0.3), cc.fadeIn(0.3));\r\n        action = cc.repeat(s, 5);\r\n        p.runAction(action);\r\n        this.scheduleOnce(()=>{\r\n            // p.getComponent(PlayerCoin).moveable = true;\r\n        })\r\n        // let arrX = [272, -672, -957, 607, 1680];\r\n        // let arrY = [96, 697, -893, -682, 433];\r\n        // p.setPosition(arrX[this.current_user_number-1], arrY[this.current_user_number-1]);\r\n    }\r\n}\r\n"]}