{"version":3,"sources":["assets\\Script\\computerRule.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nimport Player from \"./Player\";\r\nconst { ccclass, property } = cc._decorator;\r\ndeclare const firebase: any;\r\n\r\n@ccclass\r\nexport default class computerRule extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    ruleWindow: cc.Node = null;\r\n    @property(cc.AudioClip)\r\n    click: cc.AudioClip = null;\r\n    @property(cc.Node)\r\n    RuleText: cc.Node = null;\r\n    @property(cc.Node)\r\n    DetailRuleText: cc.Node = null;\r\n\r\n    private current_user_number: number = 0;\r\n    private T1: cc.Node = null;\r\n    private T2: cc.Node = null;\r\n    private T3: cc.Node = null;\r\n    private T4: cc.Node = null;\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    start() {\r\n\r\n        let uid = firebase.auth().currentUser.uid;\r\n        let current_user_number = 0;\r\n        firebase.database().ref(`user_info/${uid}`).once('value', function (snapshot) {\r\n            if (snapshot.val() != null) {\r\n                current_user_number = snapshot.val().player_number;\r\n            }\r\n        })\r\n        this.scheduleOnce(()=>{\r\n            this.current_user_number = current_user_number;\r\n        },1.5);\r\n        this.Text1Action();\r\n\r\n        // buttons\r\n        let rule_btn = new cc.Component.EventHandler();\r\n        rule_btn.target = this.node;\r\n        rule_btn.component = \"computerRule\";\r\n        rule_btn.handler = \"ruleEvent\";\r\n        console.log(cc.find(\"Canvas/Main Camera/RuleWindow/rule\"));\r\n        cc.find(\"Canvas/Main Camera/RuleWindow/rule\").getComponent(cc.Button).clickEvents.push(rule_btn);\r\n        let close_btn = new cc.Component.EventHandler();\r\n        close_btn.target = this.node;\r\n        close_btn.component = \"computerRule\";\r\n        close_btn.handler = \"closeEvent\";\r\n        cc.find(\"Canvas/Main Camera/RuleWindow/close\").getComponent(cc.Button).clickEvents.push(close_btn);\r\n        let btn1 = new cc.Component.EventHandler();\r\n        btn1.target = this.node;\r\n        btn1.component = \"computerRule\";\r\n        btn1.handler = \"btn1Event\";\r\n        cc.find(\"Canvas/Main Camera/RuleWindow/Message/btn1\").getComponent(cc.Button).clickEvents.push(btn1);\r\n        let btn2 = new cc.Component.EventHandler();\r\n        btn2.target = this.node;\r\n        btn2.component = \"computerRule\";\r\n        btn2.handler = \"btn2Event\";\r\n        cc.find(\"Canvas/Main Camera/RuleWindow/Message/btn2\").getComponent(cc.Button).clickEvents.push(btn2);\r\n        let btn3 = new cc.Component.EventHandler();\r\n        btn3.target = this.node;\r\n        btn3.component = \"computerRule\";\r\n        btn3.handler = \"btn3Event\";\r\n        cc.find(\"Canvas/Main Camera/RuleWindow/Message/btn3\").getComponent(cc.Button).clickEvents.push(btn3);\r\n        let btn4 = new cc.Component.EventHandler();\r\n        btn4.target = this.node;\r\n        btn4.component = \"computerRule\";\r\n        btn4.handler = \"btn4Event\";\r\n        cc.find(\"Canvas/Main Camera/RuleWindow/Message/btn4\").getComponent(cc.Button).clickEvents.push(btn4);\r\n        \r\n        this.T1 = cc.find(\"Canvas/Main Camera/RuleWindow/Message/Text1\");\r\n        this.T2 = cc.find(\"Canvas/Main Camera/RuleWindow/Message/Text2\");\r\n        this.T3 = cc.find(\"Canvas/Main Camera/RuleWindow/Message/Text3\");\r\n        this.T4 = cc.find(\"Canvas/Main Camera/RuleWindow/Message/Text4\");\r\n\r\n    }\r\n    ruleEvent(){\r\n        cc.audioEngine.playEffect(this.click, false);\r\n        if(this.DetailRuleText.active == false){\r\n            this.DetailRuleText.active = true;\r\n            this.T1.active = false;\r\n            this.T2.active = false;\r\n            this.T3.active = false;\r\n            this.T4.active = false;\r\n        }else{\r\n            this.DetailRuleText.active = false;\r\n            this.T1.active = false;\r\n            this.T2.active = false;\r\n            this.T3.active = false;\r\n            this.T4.active = false;\r\n        }\r\n\r\n    }\r\n    closeEvent(){\r\n        cc.audioEngine.playEffect(this.click, false);\r\n        this.DetailRuleText.active = false;\r\n        this.ruleWindow.active = false;\r\n        cc.find(`Canvas/PlayerContainer/player${this.current_user_number}`).getComponent(Player).moveable = true;\r\n\r\n    }\r\n    onBeginContact(contact, self, other) {\r\n        if(other.node.group == 'player'){\r\n            let str = \"player\"+this.current_user_number.toString();\r\n            if(other.node.name == str){\r\n                console.log(\"open ComputerRule\");\r\n                this.ruleWindow.active = true;\r\n                other.node.getComponent(Player).moveable = false;\r\n                other.node.getComponent(Player).getComponent(cc.RigidBody).linearVelocity = cc.v2(0,0);\r\n            }\r\n        }\r\n    }\r\n    Text1Action() {\r\n        let action: cc.Action;\r\n        let sequence = cc.sequence(cc.scaleTo(0.5, 1.1), cc.scaleTo(0.5, 1));\r\n        action = cc.repeatForever(sequence);\r\n        this.RuleText.runAction(action);\r\n    }\r\n    btn1Event(){\r\n        cc.audioEngine.playEffect(this.click, false);\r\n        this.T1.active = true;\r\n        this.T2.active = false;\r\n        this.T3.active = false;\r\n        this.T4.active = false;\r\n    }\r\n    btn2Event(){\r\n        cc.audioEngine.playEffect(this.click, false);\r\n        this.T1.active = false;\r\n        this.T2.active = true;\r\n        this.T3.active = false;\r\n        this.T4.active = false;\r\n    }\r\n    btn3Event(){\r\n        cc.audioEngine.playEffect(this.click, false);\r\n        this.T1.active = false;\r\n        this.T2.active = false;\r\n        this.T3.active = true;\r\n        this.T4.active = false;\r\n    }\r\n    btn4Event(){\r\n        cc.audioEngine.playEffect(this.click, false);\r\n        this.T1.active = false;\r\n        this.T2.active = false;\r\n        this.T3.active = false;\r\n        this.T4.active = true;\r\n    }\r\n    // onEndContact(contact, self, other){\r\n    //     if(other.node.group == 'player'){\r\n    //         console.log(\"close Computer\");\r\n    //         this.readyWindow.active = false;\r\n    //     }\r\n    // }\r\n // update (dt) {}\r\n}"]}