{"version":3,"sources":["assets\\Script\\Game5Object\\battle_field.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAE5E,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAC5C,8DAAyD;AACzD,2CAAsC;AAGtC;IAA0C,gCAAY;IAAtD;QAAA,qEAiTC;QA/SG,WAAK,GAAY,IAAI,CAAC;QAEtB,iBAAW,GAAY,IAAI,CAAC;QAE5B,0BAAoB,GAAY,IAAI,CAAC;QAErC,sBAAgB,GAAY,IAAI,CAAC;QAEjC,SAAG,GAAY,IAAI,CAAC;QAEpB,cAAQ,GAAY,IAAI,CAAC;QAEzB,aAAO,GAAY,IAAI,CAAC;QAExB,iBAAW,GAAmB,EAAE,CAAC;QAGjC,cAAQ,GAAG,MAAM,CAAC;QAClB,eAAS,GAAG,MAAM,CAAC;QACnB,qBAAe,GAAG,MAAM,CAAC;QACzB,oBAAc,GAAG,KAAK,CAAC;QACvB,cAAQ,GAAG,KAAK,CAAC;QACjB,cAAQ,GAAG,MAAM,CAAC;QAClB,iBAAW,GAAG,KAAK,CAAC;QACpB,aAAO,GAAG,KAAK,CAAC;QAChB,YAAM,GAAG,KAAK,CAAC;;IAsRnB,CAAC;IAlRG,wBAAwB;IAExB,eAAe;IAEf,4BAAK,GAAL;QACI,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,YAAY,CAAC,uBAAa,CAAC,CAAC,iBAAiB,CAAC;IAC7F,CAAC;IACD,gCAAS,GAAT,UAAU,IAAY,EAAE,MAAc;QAClC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAA;QACtD,EAAE,CAAC,IAAI,CAAC,4BAA0B,MAAM,SAAI,IAAM,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;QAClE,uBAAuB;IAC3B,CAAC;IACD,mCAAY,GAAZ;QACI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,GAAG,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,CAAA;QACjE,IAAI,MAAM,GAAG,IAAI,CAAC;QAElB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACd,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,IAAI,CAAC,YAAY,yBAAsB,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,QAAQ;gBAC5G,IAAI,QAAQ,CAAC,GAAG,EAAE,IAAI,IAAI,EAAE;oBACxB,IAAI,QAAQ,CAAC,GAAG,EAAE,CAAC,OAAO,IAAI,UAAU,EAAE;wBACtC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;qBACzB;oBACD,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,IAAI,CAAC,YAAY,yBAAsB,CAAC,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;iBAChH;YACL,CAAC,CAAC,CAAA;YACF,QAAQ,IAAI,CAAC,SAAS,EAAE;gBACpB,KAAK,OAAO;oBACR,IAAI,IAAI,CAAC,eAAe,IAAI,OAAO,EAAE;wBACjC,MAAM;wBACN,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC;wBACtE,iBAAiB;qBACpB;yBACI,IAAI,IAAI,CAAC,eAAe,IAAI,SAAS,EAAE;wBACxC,MAAM;wBACN,IAAI,CAAC,IAAI,EAAE,CAAC;qBACf;yBACI,IAAI,IAAI,CAAC,eAAe,IAAI,OAAO,EAAE;wBACtC,KAAK;wBACL,IAAI,CAAC,GAAG,EAAE,CAAC;qBACd;oBACD,MAAM;gBACV,KAAK,SAAS;oBACV,IAAI,IAAI,CAAC,eAAe,IAAI,OAAO,EAAE;wBACjC,KAAK;wBACL,IAAI,CAAC,GAAG,EAAE,CAAC;qBACd;yBACI,IAAI,IAAI,CAAC,eAAe,IAAI,SAAS,EAAE;wBACxC,MAAM;wBACN,iBAAiB;wBACjB,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC;qBACzE;yBACI,IAAI,IAAI,CAAC,eAAe,IAAI,OAAO,EAAE;wBACtC,MAAM;wBACN,IAAI,CAAC,IAAI,EAAE,CAAC;qBACf;oBACD,MAAM;gBACV,KAAK,OAAO;oBACR,IAAI,IAAI,CAAC,eAAe,IAAI,OAAO,EAAE;wBACjC,MAAM;wBACN,IAAI,CAAC,IAAI,EAAE,CAAC;qBACf;yBACI,IAAI,IAAI,CAAC,eAAe,IAAI,SAAS,EAAE;wBACxC,KAAK;wBACL,IAAI,CAAC,GAAG,EAAE,CAAC;qBACd;yBACI,IAAI,IAAI,CAAC,eAAe,IAAI,OAAO,EAAE;wBACtC,MAAM;wBACN,iBAAiB;wBACjB,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC;qBACzE;oBACD,MAAM;aACb;SACJ;aACI;YACD,mBAAmB;YACnB,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAA;YAC7B,QAAQ,IAAI,CAAC,SAAS,EAAE;gBACpB,KAAK,OAAO;oBACR,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC;oBAC/D,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,WAAW,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;oBAChE,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,IAAI,CAAC,YAAY,iBAAc,CAAC,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;oBACjG,MAAM;gBACV,KAAK,SAAS;oBACV,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,YAAY,GAAG,CAAC,CAAC;oBACnE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,WAAW,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;oBACpE,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,IAAI,CAAC,YAAY,iBAAc,CAAC,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;oBACrG,MAAM;gBACV,KAAK,OAAO;oBACR,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC;oBAC/D,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,WAAW,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;oBAChE,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,IAAI,CAAC,YAAY,iBAAc,CAAC,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;oBACjG,MAAM;aACb;YACD,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,gBAAgB,CAAC;YAChF,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SACvB;QAED,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAC/C,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACpD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,YAAY,CAAC;YACd,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;QACjD,CAAC,EAAE,GAAG,CAAC,CAAA;QAEP,6CAA6C;QAC7C,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,IAAI,CAAC,YAAY,wBAAqB,CAAC,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,CAAC;QAC3G,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,IAAI,CAAC,YAAY,iBAAc,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAC;QAC3J,MAAM,CAAC,WAAW,CAAC,YAAY,CAAC,uBAAa,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC;QAChE,MAAM,CAAC,WAAW,CAAC,YAAY,CAAC,uBAAa,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC;QAC5D,MAAM,CAAC,gBAAgB,CAAC,MAAM,GAAG,KAAK,CAAC;QACvC,MAAM,CAAC,oBAAoB,CAAC,MAAM,GAAG,KAAK,CAAC;QAC3C,IAAI,CAAC,YAAY,CAAC;YACd,EAAE,CAAC,IAAI,CAAC,qCAAmC,IAAI,CAAC,eAAiB,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;YAClF,EAAE,CAAC,IAAI,CAAC,iCAA+B,IAAI,CAAC,SAAW,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;YACxE,EAAE,CAAC,IAAI,CAAC,4CAA4C,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC;YAClG,EAAE,CAAC,IAAI,CAAC,wCAAwC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC;YAC9F,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC;YACxB,IAAI,CAAC,eAAe,GAAG,MAAM,CAAC;YAC9B,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;YAC9C,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7B,CAAC,EAAE,CAAC,CAAC,CAAA;IAET,CAAC;IACD,0BAAG,GAAH;QACI,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,IAAI,EAAE,CAAC;SACf;aACI;YAED,SAAS;YACT,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;YAClB,IAAI,QAAM,GAAG,IAAI,CAAC;YAElB,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,IAAI,CAAC,QAAQ,qBAAkB,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,QAAQ;gBACpG,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,QAAM,CAAC,YAAY,qBAAkB,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,aAAa;oBAC/G,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,QAAQ,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAA;oBACjG,IAAI,QAAM,CAAC,WAAW,EAAE;wBACpB,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,QAAM,CAAC,YAAY,0BAAuB,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,IAAI;4BAC3G,IAAI,IAAI,CAAC,GAAG,EAAE,IAAI,IAAI,EAAE;gCACpB,IAAI,SAAS,GAAG,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,UAAU,GAAG,SAAS,CAAC;gCAC7E,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;gCACtE,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAM,QAAM,CAAC,YAAY,qBAAgB,SAAS,WAAQ,CAAA;6BACzH;iCACI;gCACD,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC;gCACnC,IAAI,SAAS,GAAG,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,UAAU,GAAG,SAAS,GAAG,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;gCACtG,OAAO,CAAC,GAAG,CAAC,MAAM,GAAG,SAAS,GAAG,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,CAAA;gCACxD,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;gCACtE,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAM,QAAM,CAAC,YAAY,qBAAgB,SAAS,GAAG,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,WAAQ,CAAA;6BAClJ;wBACL,CAAC,CAAC,CAAA;qBACL;yBACI;wBACD,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,QAAM,CAAC,QAAQ,0BAAuB,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,IAAI;4BACvG,IAAI,IAAI,CAAC,GAAG,EAAE,IAAI,IAAI,EAAE;gCACpB,IAAI,SAAS,GAAG,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,UAAU,GAAG,SAAS,CAAC;gCAC7E,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;gCACtE,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAM,QAAM,CAAC,YAAY,qBAAgB,SAAS,WAAQ,CAAA;6BACzH;iCACI;gCACD,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC;gCACnC,IAAI,SAAS,GAAG,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,UAAU,GAAG,SAAS,GAAG,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;gCACtG,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;gCACtE,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAM,QAAM,CAAC,YAAY,qBAAgB,SAAS,GAAG,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,WAAQ,CAAA;6BAClJ;wBACL,CAAC,CAAC,CAAA;qBACL;gBACL,CAAC,CAAC,CAAA;YACN,CAAC,CAAC,CAAA;YACF,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;SACzD;IACL,CAAC;IACD,2BAAI,GAAJ;QACI,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,GAAG,EAAE,CAAC;SACd;aACI;YACD,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;YACnB,IAAI,QAAM,GAAG,IAAI,CAAC;YAClB,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,IAAI,CAAC,QAAQ,qBAAkB,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,QAAQ;gBACpG,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,QAAM,CAAC,YAAY,qBAAkB,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,aAAa;oBAC/G,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,QAAQ,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAA;oBACjG,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAA;oBAC7C,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAA;oBAClD,OAAO,CAAC,GAAG,CAAC,iBAAe,SAAS,MAAG,CAAC,CAAA;oBACxC,IAAI,QAAM,CAAC,WAAW,EAAE;wBACpB,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAA;wBAC/B,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,QAAM,CAAC,YAAY,0BAAuB,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,IAAI;4BAC3G,IAAI,IAAI,CAAC,GAAG,EAAE,IAAI,IAAI,EAAE;gCACpB,IAAI,SAAS,GAAG,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,UAAU,GAAG,SAAS,CAAC;gCAC7E,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;gCACtE,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,sBAAoB,SAAS,WAAQ,CAAA;6BACvG;iCACI;gCACD,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC;gCACnC,IAAI,SAAS,GAAG,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,UAAU,GAAG,SAAS,GAAG,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;gCACtG,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;gCACtE,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,sBAAoB,SAAS,GAAG,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,WAAQ,CAAA;6BAChI;wBACL,CAAC,CAAC,CAAA;qBACL;yBACI;wBACD,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,QAAM,CAAC,QAAQ,0BAAuB,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,IAAI;4BACvG,IAAI,IAAI,CAAC,GAAG,EAAE,IAAI,IAAI,EAAE;gCACpB,IAAI,SAAS,GAAG,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,UAAU,GAAG,SAAS,CAAC;gCAC7E,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;gCACtE,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,sBAAoB,SAAS,WAAQ,CAAA;6BACvG;iCACI;gCACD,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC;gCACnC,IAAI,SAAS,GAAG,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,UAAU,GAAG,SAAS,GAAG,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;gCACtG,QAAM,CAAC,KAAK,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;gCACtE,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,sBAAoB,SAAS,GAAG,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,WAAQ,CAAA;6BAChI;wBACL,CAAC,CAAC,CAAA;qBACL;gBACL,CAAC,CAAC,CAAA;YACN,CAAC,CAAC,CAAA;YACF,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;SACzD;IACL,CAAC;IAED,6BAAM,GAAN,UAAO,EAAE;QACL,sDAAsD;QACtD,IAAI,IAAI,CAAC,cAAc,IAAI,KAAK,IAAI,IAAI,CAAC,QAAQ,IAAI,MAAM,EAAE;YACzD,IAAI,QAAM,GAAG,IAAI,CAAC;YAClB,2CAA2C;YAC3C,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,IAAI,CAAC,QAAQ,iBAAc,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,QAAQ;gBAChG,IAAI,MAAM,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;gBACjC,IAAI,MAAM,IAAI,MAAM,EAAE;oBAClB,OAAO,CAAC,GAAG,CAAC,UAAU,GAAG,MAAM,CAAC,CAAA;oBAChC,QAAM,CAAC,eAAe,GAAG,MAAM,CAAC;oBAChC,QAAM,CAAC,cAAc,GAAG,IAAI,CAAC;oBAC7B,OAAO,CAAC,GAAG,CAAC,qBAAqB,GAAG,QAAM,CAAC,cAAc,CAAC,CAAA;iBAC7D;YACL,CAAC,CAAC,CAAA;SACL;QAED,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,EAAE;YACtD,OAAO,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAA;YAC9D,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAC5B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YAEtB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,EAAE,UAAU,CAAC,CAAC;YACjD,uBAAuB;YACvB,IAAI,CAAC,YAAY,CAAC;gBACd,IAAI,CAAC,YAAY,EAAE,CAAC;YACxB,CAAC,EAAE,CAAC,CAAC,CAAA;SACR;QAED,IAAI,IAAI,CAAC,QAAQ,IAAI,MAAM,EAAE;YACzB,IAAI,QAAM,GAAG,IAAI,CAAC;YAClB,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,IAAI,CAAC,YAAY,iBAAc,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,QAAQ;gBACpG,QAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC;YAC9C,CAAC,CAAC,CAAA;SACL;QAED,IAAI,IAAI,CAAC,MAAM,IAAI,KAAK,EAAE;YACtB,IAAI,QAAM,GAAG,IAAI,CAAC;YAClB,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,iBAAe,IAAI,CAAC,YAAY,wBAAqB,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,QAAQ;gBAC3G,IAAI,QAAQ,CAAC,GAAG,EAAE,IAAI,IAAI,EAAE;oBACxB,IAAI,QAAQ,CAAC,GAAG,EAAE,CAAC,MAAM,IAAI,UAAU,EAAE;wBACrC,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAA;wBACtC,QAAM,CAAC,MAAM,GAAG,IAAI,CAAC;qBACxB;iBACJ;YACL,CAAC,CAAC,CAAA;SACL;IAEL,CAAC;IA9SD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;+CACI;IAEtB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;qDACU;IAE5B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;8DACmB;IAErC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;0DACe;IAEjC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;6CACE;IAEpB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;kDACO;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACM;IAExB;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,SAAS,EAAE,CAAC;qDACA;IAhBhB,YAAY;QADhC,OAAO;OACa,YAAY,CAiThC;IAAD,mBAAC;CAjTD,AAiTC,CAjTyC,EAAE,CAAC,SAAS,GAiTrD;kBAjToB,YAAY","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\nimport GameManagerS5 from \"../GameManager/GameManagerS5\";\r\nimport panel_info from \"./panel_info\";\r\ndeclare const firebase: any;\r\n@ccclass\r\nexport default class battle_field extends cc.Component {\r\n    @property(cc.Node)\r\n    panel: cc.Node = null;\r\n    @property(cc.Node)\r\n    gamemanager: cc.Node = null;\r\n    @property(cc.Node)\r\n    opponent_info_choice: cc.Node = null;\r\n    @property(cc.Node)\r\n    Mine_info_choice: cc.Node = null;\r\n    @property(cc.Node)\r\n    bet: cc.Node = null;\r\n    @property(cc.Node)\r\n    multiple: cc.Node = null;\r\n    @property(cc.Node)\r\n    message: cc.Node = null;\r\n    @property({ type: cc.AudioClip })\r\n    soundEffect: cc.AudioClip[] = [];\r\n\r\n    current_user;\r\n    opponent = \"null\";\r\n    my_choice = \"null\";\r\n    opponent_choice = \"null\";\r\n    opponent_ready = false;\r\n    me_ready = false;\r\n    win_lose = \"null\";\r\n    multiple_on = false;\r\n    reverse = false;\r\n    escape = false;\r\n\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start() {\r\n        this.current_user = cc.find(\"GameManager\").getComponent(GameManagerS5).current_user_node;\r\n    }\r\n    show_card(type: string, person: string) {\r\n        console.log(this.opponent_ready + \" \" + this.me_ready)\r\n        cc.find(`Canvas/UI/battle_field/${person}_${type}`).active = true;\r\n        //this.me_ready = true;\r\n    }\r\n    match_result() {\r\n        console.log(this.my_choice + \" the fuck \" + this.opponent_choice)\r\n        let handle = this;\r\n\r\n        if (!this.escape) {\r\n            firebase.database().ref(`player_data/${this.current_user}/game2_state/reverse`).once('value', function (snapshot) {\r\n                if (snapshot.val() != null) {\r\n                    if (snapshot.val().reverse == 'absolute') {\r\n                        handle.reverse = true;\r\n                    }\r\n                    firebase.database().ref(`player_data/${this.current_user}/game2_state/reverse`).update({ reverse: \"false\" });\r\n                }\r\n            })\r\n            switch (this.my_choice) {\r\n                case \"paper\":\r\n                    if (this.opponent_choice == \"paper\") {\r\n                        //draw\r\n                        cc.find('Canvas/UI/WLMessage').getComponent(cc.Label).string = `Draw`;\r\n                        //nothing happens\r\n                    }\r\n                    else if (this.opponent_choice == \"scissor\") {\r\n                        //lose\r\n                        this.lose();\r\n                    }\r\n                    else if (this.opponent_choice == \"stone\") {\r\n                        //win\r\n                        this.win();\r\n                    }\r\n                    break;\r\n                case \"scissor\":\r\n                    if (this.opponent_choice == \"paper\") {\r\n                        //win\r\n                        this.win();\r\n                    }\r\n                    else if (this.opponent_choice == \"scissor\") {\r\n                        //draw\r\n                        //nothing happens\r\n                        cc.find('Canvas/UI/WLMessage').getComponent(cc.Label).string = `Draw`;\r\n                    }\r\n                    else if (this.opponent_choice == \"stone\") {\r\n                        //lose\r\n                        this.lose();\r\n                    }\r\n                    break;\r\n                case \"stone\":\r\n                    if (this.opponent_choice == \"paper\") {\r\n                        //lose\r\n                        this.lose();\r\n                    }\r\n                    else if (this.opponent_choice == \"scissor\") {\r\n                        //win\r\n                        this.win();\r\n                    }\r\n                    else if (this.opponent_choice == \"stone\") {\r\n                        //draw\r\n                        //nothing happens\r\n                        cc.find('Canvas/UI/WLMessage').getComponent(cc.Label).string = `Draw`;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n        else {\r\n            //reverse the score\r\n            console.log('escape reverse')\r\n            switch (this.my_choice) {\r\n                case \"paper\":\r\n                    let paper = this.panel.getComponent(panel_info).paper_left + 1;\r\n                    this.panel.getComponent(panel_info).update_info(\"paper\", paper);\r\n                    firebase.database().ref(`player_data/${this.current_user}/game2_state`).update({ paper: paper });\r\n                    break;\r\n                case \"scissor\":\r\n                    let scissor = this.panel.getComponent(panel_info).scissor_left + 1;\r\n                    this.panel.getComponent(panel_info).update_info(\"scissor\", scissor);\r\n                    firebase.database().ref(`player_data/${this.current_user}/game2_state`).update({ scissor: scissor });\r\n                    break;\r\n                case \"stone\":\r\n                    let stone = this.panel.getComponent(panel_info).stone_left + 1;\r\n                    this.panel.getComponent(panel_info).update_info(\"stone\", stone);\r\n                    firebase.database().ref(`player_data/${this.current_user}/game2_state`).update({ stone: stone });\r\n                    break;\r\n            }\r\n            cc.find('Canvas/UI/WLMessage').getComponent(cc.Label).string = 'Someone escape';\r\n            this.escape = false;\r\n        }\r\n\r\n        this.bet.getComponent(cc.EditBox).string = \"1\";\r\n        this.multiple.getComponent(cc.EditBox).string = \"1\";\r\n        this.reverse = false;\r\n        this.scheduleOnce(function () {\r\n            cc.find('Canvas/UI/WLMessage').active = true;\r\n        }, 0.5)\r\n\r\n        //also reset all the variable in other script\r\n        firebase.database().ref(`player_data/${this.current_user}/game2_state/escape`).update({ escape: \"false\" });\r\n        firebase.database().ref(`player_data/${this.current_user}/game2_state`).update({ card: \"null\", challenged: \"false\", fighting: \"false\", opponent: \"null\" });\r\n        handle.gamemanager.getComponent(GameManagerS5).fighting = false;\r\n        handle.gamemanager.getComponent(GameManagerS5).reset = true;\r\n        handle.Mine_info_choice.active = false;\r\n        handle.opponent_info_choice.active = false;\r\n        this.scheduleOnce(function () {\r\n            cc.find(`Canvas/UI/battle_field/opponent_${this.opponent_choice}`).active = false;\r\n            cc.find(`Canvas/UI/battle_field/Mine_${this.my_choice}`).active = false;\r\n            cc.find('Canvas/UI/Mine_info_choice/gambler_ability').getComponent(cc.Button).interactable = true;\r\n            cc.find('Canvas/UI/Mine_info_choice/bet_confirm').getComponent(cc.Button).interactable = true;\r\n            this.opponent = \"null\";\r\n            this.my_choice = \"null\";\r\n            this.opponent_choice = \"null\";\r\n            cc.find('Canvas/UI/WLMessage').active = false;\r\n            this.multiple_on = false;\r\n            this.node.active = false;\r\n        }, 3)\r\n\r\n    }\r\n    win() {\r\n        if (this.reverse) {\r\n            this.reverse = false;\r\n            this.lose();\r\n        }\r\n        else {\r\n\r\n            //life +1\r\n            console.log(\"win\")\r\n            let handle = this;\r\n\r\n            firebase.database().ref(`player_data/${this.opponent}/game2_state/bet`).once('value', function (snapshot) {\r\n                firebase.database().ref(`player_data/${handle.current_user}/game2_state/bet`).once('value', function (smallsnapshot) {\r\n                    let bet_money = Math.max(parseInt(snapshot.val().bet, 10), parseInt(smallsnapshot.val().bet, 10))\r\n                    if (handle.multiple_on) {\r\n                        firebase.database().ref(`player_data/${handle.current_user}/game2_state/multiple`).once('value', function (snap) {\r\n                            if (snap.val() == null) {\r\n                                let new_money = handle.panel.getComponent(panel_info).money_left + bet_money;\r\n                                handle.panel.getComponent(panel_info).update_info(\"money\", new_money);\r\n                                cc.find('Canvas/UI/WLMessage').getComponent(cc.Label).string = `${handle.current_user} win \\n Gain ${bet_money} money`\r\n                            }\r\n                            else {\r\n                                let multiple = snap.val().multiple;\r\n                                let new_money = handle.panel.getComponent(panel_info).money_left + bet_money * parseInt(multiple, 10);\r\n                                console.log(\"win \" + bet_money * parseInt(multiple, 10))\r\n                                handle.panel.getComponent(panel_info).update_info(\"money\", new_money);\r\n                                cc.find('Canvas/UI/WLMessage').getComponent(cc.Label).string = `${handle.current_user} win \\n Gain ${bet_money * parseInt(multiple, 10)} money`\r\n                            }\r\n                        })\r\n                    }\r\n                    else {\r\n                        firebase.database().ref(`player_data/${handle.opponent}/game2_state/multiple`).once('value', function (snap) {\r\n                            if (snap.val() == null) {\r\n                                let new_money = handle.panel.getComponent(panel_info).money_left + bet_money;\r\n                                handle.panel.getComponent(panel_info).update_info(\"money\", new_money);\r\n                                cc.find('Canvas/UI/WLMessage').getComponent(cc.Label).string = `${handle.current_user} win \\n Gain ${bet_money} money`\r\n                            }\r\n                            else {\r\n                                let multiple = snap.val().multiple;\r\n                                let new_money = handle.panel.getComponent(panel_info).money_left + bet_money * parseInt(multiple, 10);\r\n                                handle.panel.getComponent(panel_info).update_info(\"money\", new_money);\r\n                                cc.find('Canvas/UI/WLMessage').getComponent(cc.Label).string = `${handle.current_user} win \\n Gain ${bet_money * parseInt(multiple, 10)} money`\r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n            })\r\n            cc.audioEngine.playEffect(this.soundEffect[0], false);\r\n        }\r\n    }\r\n    lose() {\r\n        if (this.reverse) {\r\n            this.reverse = false;\r\n            this.win();\r\n        }\r\n        else {\r\n            console.log(\"lose\")\r\n            let handle = this;\r\n            firebase.database().ref(`player_data/${this.opponent}/game2_state/bet`).once('value', function (snapshot) {\r\n                firebase.database().ref(`player_data/${handle.current_user}/game2_state/bet`).once('value', function (smallsnapshot) {\r\n                    let bet_money = Math.max(parseInt(snapshot.val().bet, 10), parseInt(smallsnapshot.val().bet, 10))\r\n                    console.log(parseInt(snapshot.val().bet, 10))\r\n                    console.log(parseInt(smallsnapshot.val().bet, 10))\r\n                    console.log(`bet_money = ${bet_money} `)\r\n                    if (handle.multiple_on) {\r\n                        console.log(\"multiple on lose\")\r\n                        firebase.database().ref(`player_data/${handle.current_user}/game2_state/multiple`).once('value', function (snap) {\r\n                            if (snap.val() == null) {\r\n                                let new_money = handle.panel.getComponent(panel_info).money_left - bet_money;\r\n                                handle.panel.getComponent(panel_info).update_info(\"money\", new_money);\r\n                                cc.find('Canvas/UI/WLMessage').getComponent(cc.Label).string = `You lose \\n Loss ${bet_money} money`\r\n                            }\r\n                            else {\r\n                                let multiple = snap.val().multiple;\r\n                                let new_money = handle.panel.getComponent(panel_info).money_left - bet_money * parseInt(multiple, 10);\r\n                                handle.panel.getComponent(panel_info).update_info(\"money\", new_money);\r\n                                cc.find('Canvas/UI/WLMessage').getComponent(cc.Label).string = `You lose \\n Loss ${bet_money * parseInt(multiple, 10)} money`\r\n                            }\r\n                        })\r\n                    }\r\n                    else {\r\n                        firebase.database().ref(`player_data/${handle.opponent}/game2_state/multiple`).once('value', function (snap) {\r\n                            if (snap.val() == null) {\r\n                                let new_money = handle.panel.getComponent(panel_info).money_left - bet_money;\r\n                                handle.panel.getComponent(panel_info).update_info(\"money\", new_money);\r\n                                cc.find('Canvas/UI/WLMessage').getComponent(cc.Label).string = `You lose \\n Loss ${bet_money} money`\r\n                            }\r\n                            else {\r\n                                let multiple = snap.val().multiple;\r\n                                let new_money = handle.panel.getComponent(panel_info).money_left - bet_money * parseInt(multiple, 10);\r\n                                handle.panel.getComponent(panel_info).update_info(\"money\", new_money);\r\n                                cc.find('Canvas/UI/WLMessage').getComponent(cc.Label).string = `You lose \\n Loss ${bet_money * parseInt(multiple, 10)} money`\r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n            })\r\n            cc.audioEngine.playEffect(this.soundEffect[1], false);\r\n        }\r\n    }\r\n\r\n    update(dt) {\r\n        //console.log(this.opponent_ready +\" \"+ this.opponent)\r\n        if (this.opponent_ready == false && this.opponent != 'null') {\r\n            let handle = this;\r\n            //console.log('not start?? '+this.opponent)\r\n            firebase.database().ref(`player_data/${this.opponent}/game2_state`).once('value', function (snapshot) {\r\n                let choice = snapshot.val().card;\r\n                if (choice != 'null') {\r\n                    console.log(\"choice: \" + choice)\r\n                    handle.opponent_choice = choice;\r\n                    handle.opponent_ready = true;\r\n                    console.log(\"only here is true: \" + handle.opponent_ready)\r\n                }\r\n            })\r\n        }\r\n\r\n        if (this.opponent_ready == true && this.me_ready == true) {\r\n            console.log(\"???\" + this.opponent_ready + \" \" + this.me_ready)\r\n            this.opponent_ready = false;\r\n            this.me_ready = false;\r\n\r\n            this.show_card(this.opponent_choice, \"opponent\");\r\n            //get the match result;\r\n            this.scheduleOnce(function () {\r\n                this.match_result();\r\n            }, 2)\r\n        }\r\n\r\n        if (this.opponent == \"null\") {\r\n            let handle = this;\r\n            firebase.database().ref(`player_data/${this.current_user}/game2_state`).once('value', function (snapshot) {\r\n                handle.opponent = snapshot.val().opponent;\r\n            })\r\n        }\r\n\r\n        if (this.escape == false) {\r\n            let handle = this;\r\n            firebase.database().ref(`player_data/${this.current_user}/game2_state/escape`).once('value', function (snapshot) {\r\n                if (snapshot.val() != null) {\r\n                    if (snapshot.val().escape == 'absolute') {\r\n                        console.log(\"absolute???????????????\")\r\n                        handle.escape = true;\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n}\r\n"]}