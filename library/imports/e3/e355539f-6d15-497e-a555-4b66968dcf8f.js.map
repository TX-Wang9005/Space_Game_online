{"version":3,"sources":["assets\\Script\\computer.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;AAClF,mCAA8B;AACxB,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAI5C;IAAsC,4BAAY;IAAlD;QAAA,qEA0CC;QAvCG,iBAAW,GAAY,IAAI,CAAC;QAEpB,yBAAmB,GAAW,CAAC,CAAC;;QA8BxC,sCAAsC;QACtC,wCAAwC;QACxC,yCAAyC;QACzC,2CAA2C;QAC3C,QAAQ;QACR,IAAI;QACP,iBAAiB;IAClB,CAAC;IAnCG,yBAAM,GAAN;IAEA,CAAC;IAED,wBAAK,GAAL;QAAA,iBAYC;QAVG,IAAI,GAAG,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC;QAC1C,IAAI,mBAAmB,GAAG,CAAC,CAAC;QAC5B,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,eAAa,GAAK,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,QAAQ;YACxE,IAAI,QAAQ,CAAC,GAAG,EAAE,IAAI,IAAI,EAAE;gBACxB,mBAAmB,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC;aACtD;QACL,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,YAAY,CAAC;YACd,KAAI,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;QACnD,CAAC,EAAC,GAAG,CAAC,CAAC;IACX,CAAC;IACD,iCAAc,GAAd,UAAe,OAAO,EAAE,IAAI,EAAE,KAAK;QAC/B,IAAG,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,QAAQ,EAAC;YAC5B,IAAI,GAAG,GAAG,QAAQ,GAAC,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,CAAC;YACvD,IAAG,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,GAAG,EAAC;gBACtB,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;gBAC7B,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC;gBAC/B,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,gBAAM,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACjD,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,gBAAM,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,cAAc,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;aAC1F;SACJ;IACL,CAAC;IA/BD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACU;IAHX,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA0C5B;IAAD,eAAC;CA1CD,AA0CC,CA1CqC,EAAE,CAAC,SAAS,GA0CjD;kBA1CoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nimport Player from \"./Player\";\r\nconst { ccclass, property } = cc._decorator;\r\ndeclare const firebase: any;\r\n\r\n@ccclass\r\nexport default class Computer extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    readyWindow: cc.Node = null;\r\n\r\n    private current_user_number: number = 0;\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    start() {\r\n\r\n        let uid = firebase.auth().currentUser.uid;\r\n        let current_user_number = 0;\r\n        firebase.database().ref(`user_info/${uid}`).once('value', function (snapshot) {\r\n            if (snapshot.val() != null) {\r\n                current_user_number = snapshot.val().player_number;\r\n            }\r\n        })\r\n        this.scheduleOnce(()=>{\r\n            this.current_user_number = current_user_number;\r\n        },1.5);\r\n    }\r\n    onBeginContact(contact, self, other) {\r\n        if(other.node.group == 'player'){\r\n            let str = \"player\"+this.current_user_number.toString();\r\n            if(other.node.name == str){\r\n                console.log(\"open Computer\");\r\n                this.readyWindow.active = true;\r\n                other.node.getComponent(Player).moveable = false;\r\n                other.node.getComponent(Player).getComponent(cc.RigidBody).linearVelocity = cc.v2(0,0);\r\n            }\r\n        }\r\n    }\r\n    // onEndContact(contact, self, other){\r\n    //     if(other.node.group == 'player'){\r\n    //         console.log(\"close Computer\");\r\n    //         this.readyWindow.active = false;\r\n    //     }\r\n    // }\r\n // update (dt) {}\r\n}"]}