{"version":3,"sources":["assets\\Script\\Game5Object\\panel_info.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\nimport GameManagerS5 from \"../GameManager/GameManagerS5\";\r\ndeclare const firebase: any;\r\n@ccclass\r\nexport default class panel_info extends cc.Component {\r\n\r\n    paper_left;\r\n    scissor_left;\r\n    stone_left\r\n    money_left;\r\n    current_user;\r\n\r\n    private flag = false;\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start() {\r\n        let handle = this;\r\n        this.current_user = cc.find(\"GameManager\").getComponent(GameManagerS5).current_user_node;\r\n        handle.paper_left = 2;\r\n        handle.scissor_left = 2;\r\n        handle.stone_left = 2;\r\n        handle.money_left = 5;\r\n        cc.find(\"Canvas/UI/TopPanel/paper/number\").getComponent(cc.Label).string = String(handle.paper_left);\r\n        cc.find(\"Canvas/UI/TopPanel/scissor/number\").getComponent(cc.Label).string = String(handle.scissor_left);\r\n        cc.find(\"Canvas/UI/TopPanel/stone/number\").getComponent(cc.Label).string = String(handle.stone_left);\r\n        cc.find(\"Canvas/UI/TopPanel/life/number\").getComponent(cc.Label).string = String(handle.money_left);\r\n    }\r\n    update_info(type: string, new_number: number) {\r\n        let handle = this;\r\n        this.current_user = cc.find(\"GameManager\").getComponent(GameManagerS5).current_user_node;\r\n        if (type == \"paper\") {\r\n            firebase.database().ref(`player_data/${this.current_user}/game2_state`).update({ paper: new_number });\r\n            cc.find(\"Canvas/UI/TopPanel/paper/number\").getComponent(cc.Label).string = String(new_number);\r\n            handle.paper_left = new_number;\r\n        }\r\n        else if (type == \"scissor\") {\r\n            firebase.database().ref(`player_data/${this.current_user}/game2_state`).update({ scissor: new_number });\r\n            cc.find(\"Canvas/UI/TopPanel/scissor/number\").getComponent(cc.Label).string = String(new_number);\r\n            this.scissor_left = new_number;\r\n        }\r\n        else if (type == \"stone\") {\r\n            firebase.database().ref(`player_data/${this.current_user}/game2_state`).update({ stone: new_number });\r\n            cc.find(\"Canvas/UI/TopPanel/stone/number\").getComponent(cc.Label).string = String(new_number);\r\n            handle.stone_left = new_number;\r\n        }\r\n        else if (type == \"money\") {\r\n            firebase.database().ref(`player_data/${this.current_user}/game2_state`).update({ money: new_number });\r\n            cc.find(\"Canvas/UI/TopPanel/life/number\").getComponent(cc.Label).string = String(new_number);\r\n            handle.money_left = new_number;\r\n        }\r\n    }\r\n\r\n    update(dt) {\r\n        if (this.flag == false) {\r\n            let handle = this;\r\n            this.current_user = cc.find(\"GameManager\").getComponent(GameManagerS5).current_user_node;\r\n            if (this.current_user != null) {\r\n                this.flag = true\r\n                firebase.database().ref(`player_data/${this.current_user}/game2_state`).once('value', function (snapshot) {\r\n                    cc.find(\"Canvas/UI/TopPanel/life/number\").getComponent(cc.Label).string = String(snapshot.val().money);\r\n                    handle.money_left = snapshot.val().money;\r\n                })\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}