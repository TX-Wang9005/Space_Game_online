{"version":3,"sources":["assets\\Script\\GameManager\\GameManagerS5.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nimport Player from \"../Game5Object/special_player\";\r\nimport battle_field from \"../Game5Object/battle_field\";\r\nimport Mine_info_choice from \"../Game5Object/Mine_info_choice\";\r\nimport panel_info from \"../Game5Object/panel_info\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\ndeclare const firebase: any;\r\n\r\n@ccclass\r\nexport default class GameManagerS5 extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    loadingBG: cc.Node = null;\r\n    @property(cc.Node)\r\n    GameoverBG: cc.Node = null;\r\n    @property(cc.Node)\r\n    TimerLabel: cc.Node = null;\r\n\r\n    @property()\r\n    GameTime: number = 120;\r\n\r\n    @property(cc.Node)\r\n    opponent_info_choice: cc.Node = null;\r\n    @property(cc.Node)\r\n    Mine_info_choice: cc.Node = null;\r\n    @property(cc.Node)\r\n    battle_field: cc.Node = null;\r\n    @property({ type: cc.AudioClip })\r\n    BGM: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    ScoreSound: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    GameOverSound: cc.AudioClip = null;\r\n\r\n    @property(cc.Node)\r\n    panel: cc.Node = null;\r\n\r\n    private physicManager: cc.PhysicsManager = null;\r\n    private flag = false;\r\n    counting = 0;\r\n    player_array = [];\r\n\r\n    player_node1: cc.Node = null;\r\n    player_node2: cc.Node = null;\r\n    player_node3: cc.Node = null;\r\n    player_node4: cc.Node = null;\r\n    player_node5: cc.Node = null;\r\n\r\n    current_user_node;\r\n    opponent_user_node;\r\n    fighting = false;\r\n\r\n    reset = false;\r\n\r\n    select_character = false;\r\n    character;\r\n\r\n    private timer: number = 0;\r\n    private timeUp: boolean = false;\r\n\r\n\r\n    onLoad() {\r\n        this.physicManager = cc.director.getPhysicsManager();\r\n        this.physicManager.enabled = true;\r\n        this.physicManager.gravity = cc.v2(0, 0);\r\n\r\n        // 每個player node初始化位置。\r\n        var user = firebase.auth().currentUser.uid;\r\n        var permited_user;\r\n        var handle = this;\r\n        //\r\n    }\r\n\r\n    start() {\r\n\r\n        this.loadingBG.active = true;\r\n        //choose the initial ghost\r\n        this.player_node1 = cc.find(\"Canvas/PlayerContainer/player1\");\r\n        this.player_node2 = cc.find(\"Canvas/PlayerContainer/player2\");\r\n        this.player_node3 = cc.find(\"Canvas/PlayerContainer/player3\");\r\n        this.player_node4 = cc.find(\"Canvas/PlayerContainer/player4\");\r\n        this.player_node5 = cc.find(\"Canvas/PlayerContainer/player5\");\r\n        if (this.player_node1) this.player_node1.getComponent(Player).moveable = false;\r\n        if (this.player_node2) this.player_node2.getComponent(Player).moveable = false;\r\n        if (this.player_node3) this.player_node3.getComponent(Player).moveable = false;\r\n        if (this.player_node4) this.player_node4.getComponent(Player).moveable = false;\r\n        if (this.player_node5) this.player_node5.getComponent(Player).moveable = false;\r\n        this.scheduleOnce(() => {\r\n            this.loadingBG.active = false;\r\n            if (this.player_node1) this.player_node1.getComponent(Player).moveable = true;\r\n            if (this.player_node2) this.player_node2.getComponent(Player).moveable = true;\r\n            if (this.player_node3) this.player_node3.getComponent(Player).moveable = true;\r\n            if (this.player_node4) this.player_node4.getComponent(Player).moveable = true;\r\n            if (this.player_node5) this.player_node5.getComponent(Player).moveable = true;\r\n            cc.audioEngine.playMusic(this.BGM, true)\r\n            cc.audioEngine.setMusicVolume(0.5)\r\n            // 開始計時\r\n            this.TimerStart();\r\n        }, 2.5);\r\n\r\n    }\r\n    // getRandomInt(max) {\r\n    //     return Math.floor(Math.random() * max);\r\n    // }\r\n    // timer\r\n    TimerStart() {\r\n        this.timer = this.GameTime;\r\n        this.TimerLabel.getComponent(cc.Label).string = this.GameTime.toString();\r\n        this.schedule(this.UpdateTimer, 1);\r\n    }\r\n    UpdateTimer() {\r\n        if (this.timeUp) return;\r\n        if (this.timer > 0) this.timer += -1;\r\n        else if (this.timer == 0) this.timeUp = true;\r\n        this.TimerLabel.getComponent(cc.Label).string = this.timer.toString();\r\n\r\n        if (this.timeUp) {\r\n            this.GameOver();\r\n        }\r\n    }\r\n    GameOver() {\r\n        cc.audioEngine.stopMusic();\r\n        this.scheduleOnce(()=>{\r\n            cc.audioEngine.playEffect(this.GameOverSound, false);\r\n        }, 0.5);\r\n        this.GameoverBG.active = true;\r\n        let scoreboard = this.GameoverBG.getChildByName(\"Score\");\r\n        let scorepoint = scoreboard.getChildByName(\"Scorepoint\").getComponent(cc.Label);\r\n        let coin = [0,0,0,0,0]\r\n        for(let i=1;i<=5;i++){            \r\n            firebase.database().ref(`player_data/player${i}/game2_state/money`).once('value', function (snapshot){\r\n                if(snapshot.val()!=null){\r\n                    coin[i-1] = snapshot.val();\r\n                }\r\n            });\r\n        }\r\n        this.scheduleOnce(() => {\r\n            scoreboard.active = true;\r\n            let str = \"\\n\";\r\n            str += coin[0].toString() + \"  B\" + \"\\n\";\r\n            str += coin[1].toString() + \"  B\" + \"\\n\";\r\n            str += coin[2].toString() + \"  B\" + \"\\n\";\r\n            str += coin[3].toString() + \"  B\" + \"\\n\";\r\n            str += coin[4].toString() + \"  B\";\r\n            scorepoint.string = str;\r\n            cc.audioEngine.playEffect(this.ScoreSound, false);            \r\n        }, 3);\r\n        this.scheduleOnce(() => {\r\n            cc.director.loadScene(\"GameEnd\");\r\n        }, 10);\r\n    }\r\n    //\r\n\r\n\r\n    update(dt) {\r\n        let handle = this;\r\n        if (this.counting < 5) {\r\n            for (let i = 1; i <= 5; i++) {\r\n                if (cc.find(`Canvas/PlayerContainer/player${i}`).active == true) {\r\n                    continue;\r\n                }\r\n                else {\r\n                    firebase.database().ref(`player_data/player${i}`).once('value', function (snapshot) {\r\n                        firebase.database().ref(`GameResult`).once('value', function (childshot) {\r\n                            if (snapshot.val() != null) {\r\n                                let new_money = 0;\r\n                                childshot.forEach(element => {\r\n                                    if (element.val() != null) {\r\n                                        if (i == 1) {\r\n                                            new_money += element.val().player1 / 10;\r\n                                        }\r\n                                        else if (i == 2) {\r\n                                            new_money += element.val().player2 / 10;\r\n                                        }\r\n                                        else if (i == 3) {\r\n                                            new_money += element.val().player3 / 10;\r\n                                        }\r\n                                        else if (i == 4) {\r\n                                            new_money += element.val().player4 / 10;\r\n                                        }\r\n                                        else if (i == 5) {\r\n                                            new_money += element.val().player5 / 10;\r\n                                        }\r\n                                    }\r\n                                });\r\n                                handle.counting += 1;\r\n                                handle.player_array.push(i);\r\n                                cc.find(`Canvas/PlayerContainer/player${i}`).active = true;\r\n                                firebase.database().ref(`player_data/player${i}/state_value/moveDirX`).set({ Dir: 0 })\r\n                                firebase.database().ref(`player_data/player${i}/state_value/moveDirY`).set({ Dir: 0 })\r\n                                firebase.database().ref(`player_data/player${i}/state_value/premoveDirX`).set({ Dir: 0 })\r\n                                firebase.database().ref(`player_data/player${i}/state_value/moveable`).set({ moveable: \"true\" })\r\n                                firebase.database().ref(`player_data/player${i}/state_value/X`).set({ x: 240 })\r\n                                firebase.database().ref(`player_data/player${i}/state_value/Y`).set({ y: -48 })\r\n                                firebase.database().ref(`player_data/player${i}/game2_state`).set({ money: new_money, paper: 2, scissor: 2, stone: 2, fighting: \"false\", opponent: \"null\", card: \"null\", challenged: \"false\" });\r\n                            }\r\n                        })\r\n                    })\r\n                }\r\n            }\r\n        }\r\n        if (this.reset) {\r\n            firebase.database().ref(`player_data/${this.current_user_node}/game2_state`).update({ card: \"null\", challenged: \"false\", fighting: \"false\", opponent: \"null\" });\r\n            this.reset = false;\r\n        }\r\n        if (!this.fighting && !handle.Mine_info_choice.active && !handle.opponent_info_choice.active && !handle.battle_field.active) {\r\n            firebase.database().ref(`player_data/${this.current_user_node}/game2_state`).once('value', function (snapshot) {\r\n                if (snapshot.val() != null) {\r\n                    if (snapshot.val().fighting == 'true') {\r\n                        handle.fighting = true;\r\n                        handle.Mine_info_choice.active = true;\r\n                        handle.Mine_info_choice.getComponent(Mine_info_choice).opponent = handle.opponent_user_node;\r\n                        handle.Mine_info_choice.getChildByName(\"paper\").getChildByName(\"card_number\").getComponent(cc.RichText).string = String(snapshot.val().paper);\r\n                        handle.Mine_info_choice.getChildByName(\"scissor\").getChildByName(\"card_number\").getComponent(cc.RichText).string = String(snapshot.val().scissor);\r\n                        handle.Mine_info_choice.getChildByName(\"stone\").getChildByName(\"card_number\").getComponent(cc.RichText).string = String(snapshot.val().stone);\r\n                        handle.opponent_info_choice.active = true;\r\n                        handle.opponent_info_choice.getChildByName(\"title\").getComponent(cc.RichText).string = snapshot.val().opponent;\r\n                        handle.battle_field.active = true;\r\n                        handle.battle_field.getComponent(battle_field).me_ready = false;\r\n                        handle.battle_field.getComponent(battle_field).opponent_ready = false;\r\n                        handle.battle_field.getComponent(battle_field).opponent = snapshot.val().opponent;\r\n                        handle.opponent_user_node = snapshot.val().opponent;\r\n                        if (handle.character == \"erudite\") {\r\n                            firebase.database().ref(`player_data/${snapshot.val().opponent}/game2_state`).once('value', function (childshot) {\r\n                                let paper = childshot.val().paper;\r\n                                let scissor = childshot.val().scissor;\r\n                                let stone = childshot.val().stone;\r\n                                let total = paper + scissor + stone;\r\n                                handle.opponent_info_choice.getChildByName(\"paper\").getChildByName(\"card_number\").getComponent(cc.RichText).string = `${(paper / total).toFixed(2)}%`\r\n                                handle.opponent_info_choice.getChildByName(\"scissor\").getChildByName(\"card_number\").getComponent(cc.RichText).string = `${(scissor / total).toFixed(2)}%`\r\n                                handle.opponent_info_choice.getChildByName(\"stone\").getChildByName(\"card_number\").getComponent(cc.RichText).string = `${(stone / total).toFixed(2)}%`\r\n                            })\r\n                        }\r\n                        else {\r\n                            handle.opponent_info_choice.getChildByName(\"paper\").getChildByName(\"card_number\").getComponent(cc.RichText).string = \"??\";\r\n                            handle.opponent_info_choice.getChildByName(\"scissor\").getChildByName(\"card_number\").getComponent(cc.RichText).string = \"??\";\r\n                            handle.opponent_info_choice.getChildByName(\"stone\").getChildByName(\"card_number\").getComponent(cc.RichText).string = \"??\"\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\n"]}