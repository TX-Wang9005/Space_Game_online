{"version":3,"sources":["assets\\Script\\GameManager\\GameManagerS2.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nimport PlayerGhost from \"../Game2Object/PlayerGhost\";\r\nconst { ccclass, property } = cc._decorator;\r\ndeclare const firebase: any;\r\n\r\n@ccclass\r\nexport default class GameManagerS2 extends cc.Component {\r\n    \r\n    @property(cc.Node)\r\n    loadingBG: cc.Node = null;\r\n    @property(cc.Node)\r\n    SpaceBG: cc.Node = null;\r\n    @property(cc.Node)\r\n    GameoverBG: cc.Node = null;\r\n    @property(cc.Node)\r\n    TimerLabel: cc.Node = null;\r\n    @property(cc.Node)\r\n    GhostLabel: cc.Node = null;\r\n    @property(cc.Node)\r\n    StartText: cc.Node = null;\r\n\r\n    @property(cc.AudioClip)\r\n    BGM1: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    BGM2: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    ScoreSound: cc.AudioClip = null;\r\n    @property(cc.AudioClip)\r\n    GameOverSound: cc.AudioClip = null;\r\n\r\n    @property(cc.Prefab)\r\n    becomeGhostEffect: cc.Prefab = null;\r\n\r\n    @property()\r\n    GameTime: number = 120;\r\n    @property()\r\n    GhostSpeed: number = 200;\r\n    @property()\r\n    PlayerSpeed: number = 100;\r\n\r\n    private physicManager: cc.PhysicsManager = null;\r\n    counting = 0;\r\n    player_array = [];\r\n\r\n    player_node1: cc.Node = null;\r\n    player_node2: cc.Node = null;\r\n    player_node3: cc.Node = null;\r\n    player_node4: cc.Node = null;\r\n    player_node5: cc.Node = null;\r\n\r\n    private current_user_number: number = 0;\r\n\r\n    private P_state: string[] = [\"\", \"player\", \"player\", \"player\", \"player\", \"player\"];\r\n    private P_prevstate: string[] = [\"\", \"player\", \"player\", \"player\", \"player\", \"player\"];\r\n\r\n    private cooldown: boolean = false;\r\n\r\n    private timer: number = 0;\r\n    private timeUp: boolean = false;\r\n\r\n\r\n\r\n    onLoad() {\r\n        this.physicManager = cc.director.getPhysicsManager();\r\n        this.physicManager.enabled = true;\r\n        this.physicManager.gravity = cc.v2(0, 0);\r\n        \r\n        var uid = firebase.auth().currentUser.uid;\r\n        let t = this;\r\n        firebase.database().ref(`user_info/${uid}`).once('value', function (snapshot) {\r\n            t.current_user_number = snapshot.val().player_number;\r\n        });\r\n    }\r\n\r\n    start() {\r\n\r\n\r\n        this.loadingBG.active = true;\r\n        // 一開始所有玩家都不能動\r\n        this.player_node1 = cc.find(\"Canvas/PlayerContainer/player1\");\r\n        this.player_node2 = cc.find(\"Canvas/PlayerContainer/player2\");\r\n        this.player_node3 = cc.find(\"Canvas/PlayerContainer/player3\");\r\n        this.player_node4 = cc.find(\"Canvas/PlayerContainer/player4\");\r\n        this.player_node5 = cc.find(\"Canvas/PlayerContainer/player5\");\r\n        if (this.player_node1) this.player_node1.getComponent(PlayerGhost).moveable = false;\r\n        if (this.player_node2) this.player_node2.getComponent(PlayerGhost).moveable = false;\r\n        if (this.player_node3) this.player_node3.getComponent(PlayerGhost).moveable = false;\r\n        if (this.player_node4) this.player_node4.getComponent(PlayerGhost).moveable = false;\r\n        if (this.player_node5) this.player_node5.getComponent(PlayerGhost).moveable = false;\r\n        this.scheduleOnce(() => {\r\n            this.loadingBG.active = false;\r\n            if (this.player_node1) this.player_node1.getComponent(PlayerGhost).moveable = true;\r\n            if (this.player_node2) this.player_node2.getComponent(PlayerGhost).moveable = true;\r\n            if (this.player_node3) this.player_node3.getComponent(PlayerGhost).moveable = true;\r\n            if (this.player_node4) this.player_node4.getComponent(PlayerGhost).moveable = true;\r\n            if (this.player_node5) this.player_node5.getComponent(PlayerGhost).moveable = true;\r\n\r\n            this.TimerStart();\r\n            this.StartText.active = true;\r\n            let action = cc.sequence(cc.fadeOut(0.5),cc.fadeIn(0.5),cc.fadeOut(0.5),cc.fadeIn(0.5),cc.fadeOut(0.5));\r\n            this.StartText.runAction(action);\r\n            cc.audioEngine.playMusic(this.BGM2, true);\r\n            cc.audioEngine.setMusicVolume(3);\r\n        }, 2.5);\r\n        \r\n        this.Init_player();\r\n\r\n        // 五秒後選出鬼\r\n        this.scheduleOnce(()=>{\r\n            // this.choose_ghost(this.getRandomInt(this.player_array.length)); // 每個人開遊戲會random不一樣，所以這方法不行\r\n            this.choose_ghost(1, -1);\r\n            this.schedule(this.GetPlayerState, 0.3);\r\n            this.StartText.active = false;\r\n            if(1 == this.current_user_number){\r\n                cc.audioEngine.playMusic(this.BGM1, true);\r\n                cc.audioEngine.setMusicVolume(1);\r\n            }\r\n        }, 5);\r\n        this.scheduleOnce(()=>{\r\n            this.schedule(this.UpdateGroup, 0.3);\r\n        }, 8);\r\n\r\n\r\n        // SpaceBG Action\r\n        let action:cc.Action;\r\n        action = cc.repeatForever(cc.rotateBy(100,360));\r\n        this.SpaceBG.runAction(action);\r\n\r\n    }\r\n    choose_ghost(Tobeghost_id: number, Peopleback_id: number) {  // 選定一人當鬼。\r\n        console.log('Who fuck? ID:', Tobeghost_id);\r\n        console.log(\"Player ARR:\", this.player_array.length, this.player_array);\r\n        //choose from player array\r\n        let ghost_id = Tobeghost_id;// initially set player 1 to be ghost\r\n        for (let i = 1; i < this.player_array.length+1; i++) {\r\n            if (i == ghost_id) {\r\n                // firebase\r\n                firebase.database().ref(`game2/player${i}`).set({ type: \"ghost\" });\r\n                // Make a ghost\r\n                var Gnode = cc.find(`Canvas/PlayerContainer/player${i}`);\r\n                var ghostBornEffect = cc.instantiate(this.becomeGhostEffect);\r\n                cc.find(`Canvas/PlayerContainer/player${i}/Label`).getComponent(cc.Label).string=\"ghost\";\r\n                Gnode.setPosition(-176, 752);\r\n                Gnode.group = 'ghost';\r\n                Gnode.active = false;\r\n                Gnode.active = true;\r\n                Gnode.setPosition(-176, 752);\r\n                Gnode.getComponent(PlayerGhost).moveable = false;\r\n                Gnode.getComponent(PlayerGhost).playerSpeed = this.GhostSpeed;\r\n                // play particle effect\r\n                Gnode.parent.addChild(ghostBornEffect);\r\n                ghostBornEffect.setPosition(Gnode.position);\r\n\r\n                let action: cc.Action;\r\n                var sequence1 = cc.sequence(cc.fadeTo(0.25, 120), cc.fadeIn(0.25), cc.scaleBy(0.1, 1.1));\r\n                action = cc.repeat(sequence1, 5);\r\n                Gnode.runAction(action);\r\n                this.scheduleOnce(()=>{\r\n                    Gnode.getComponent(PlayerGhost).moveable = true;\r\n                }, 3)\r\n                // make ghost end\r\n            }\r\n            else if(i == Peopleback_id){\r\n                firebase.database().ref(`game2/player${i}`).set({ type: \"player\" });\r\n                cc.find(`Canvas/PlayerContainer/player${i}/Label`).getComponent(cc.Label).string=\"player\";\r\n                var Pnode = cc.find(`Canvas/PlayerContainer/player${i}`);\r\n                Pnode.setPosition(240, -48);\r\n                Pnode.group = 'player';\r\n                Pnode.active = false;\r\n                Pnode.active = true;\r\n                Pnode.getComponent(PlayerGhost).moveable = false;\r\n                Pnode.getComponent(PlayerGhost).playerSpeed = this.PlayerSpeed;\r\n                Pnode.runAction(cc.scaleTo(0.1, 1));\r\n                let action: cc.Action;\r\n                var sequence1 = cc.sequence(cc.fadeTo(0.25, 120), cc.fadeIn(0.25));\r\n                action = cc.repeat(sequence1, 5);\r\n                Pnode.runAction(action);\r\n                this.scheduleOnce(()=>{\r\n                    Pnode.getComponent(PlayerGhost).moveable = true;\r\n                }, 2.5)\r\n            }else {\r\n                firebase.database().ref(`game2/player${i}`).set({ type: \"player\" });\r\n                cc.find(`Canvas/PlayerContainer/player${i}/Label`).getComponent(cc.Label).string=\"player\";\r\n                var Nnode = cc.find(`Canvas/PlayerContainer/player${i}`);\r\n                Nnode.group = 'player';\r\n                Nnode.active = false;\r\n                Nnode.active = true;\r\n                Nnode.getComponent(PlayerGhost).playerSpeed = this.PlayerSpeed;\r\n                Nnode.runAction(cc.scaleTo(0.5, 1));\r\n            }\r\n\r\n        }\r\n    }\r\n    // getRandomInt(max: number) {\r\n    //     return Math.ceil(Math.random() * max);\r\n    // }\r\n\r\n\r\n    // update(dt) {\r\n        \r\n    // }\r\n\r\n    Init_player(){\r\n        let handle = this;\r\n        // initialize players        \r\n        for (let i = 1; i <= 5; i++) {\r\n            firebase.database().ref(`player/player${i}_islogin`).once('value', function (snapshot) { // 如果玩家存在\r\n                if (snapshot.val() == true) {\r\n                    handle.player_array.push(i);\r\n                    cc.find(`Canvas/PlayerContainer/player${i}`).active = true;\r\n                    firebase.database().ref(`player_data/player${i}/state_value/moveDirX`).set({ Dir: 0 })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/moveDirY`).set({ Dir: 0 })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/premoveDirX`).set({ Dir: 0 })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/moveable`).set({ moveable: \"true\" })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/X`).set({ x: 240 })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/Y`).set({ y: -48 })\r\n                }\r\n            })\r\n        }\r\n        // initial End\r\n    }\r\n    // timer\r\n    TimerStart(){\r\n        this.timer = this.GameTime;\r\n        this.TimerLabel.getComponent(cc.Label).string = this.GameTime.toString();\r\n        this.schedule(this.UpdateTimer, 1);\r\n    }\r\n    UpdateTimer(){\r\n        if(this.timeUp) return;\r\n        if(this.timer > 0) this.timer += -1;\r\n        else if(this.timer == 0) this.timeUp = true;\r\n        this.TimerLabel.getComponent(cc.Label).string = this.timer.toString();\r\n\r\n        if(this.timeUp){\r\n            this.GameOver();\r\n        }        \r\n    }\r\n    GameOver(){\r\n        cc.audioEngine.stopMusic();\r\n        this.scheduleOnce(()=>{\r\n            cc.audioEngine.playEffect(this.GameOverSound, false);\r\n        }, 0.5);\r\n        this.GameoverBG.active = true;\r\n        let scoreboard = this.GameoverBG.getChildByName(\"Score\");\r\n        let scorepoint = scoreboard.getChildByName(\"Scorepoint\").getComponent(cc.Label);\r\n        let point = scoreboard.getChildByName(\"Point\").getComponent(cc.Label);\r\n        let P_state = this.P_state;\r\n        this.scheduleOnce(() => {\r\n            scoreboard.active = true;\r\n            let str = \"\\n\";\r\n            str += P_state[1] + \"\\n\";\r\n            str += P_state[2] + \"\\n\";\r\n            str += P_state[3] + \"\\n\";\r\n            str += P_state[4] + \"\\n\";\r\n            str += P_state[5];\r\n            scorepoint.string = str;\r\n            cc.audioEngine.playEffect(this.ScoreSound, false);\r\n        }, 3);\r\n        this.scheduleOnce(()=>{\r\n            let arr2 = [];\r\n            for(let i=1;i<=5;i++){\r\n                if(P_state[i] == 'player'){\r\n                    arr2.push(30);\r\n                }else if(P_state[i] == 'ghost'){\r\n                    arr2.push(0);\r\n                }\r\n            }\r\n            let str = \"\";\r\n            for (let i = 0; i < 5; i++) {\r\n                str += \"\\n+ \" + arr2[i].toString();\r\n            }\r\n            point.string = str;\r\n            cc.audioEngine.playEffect(this.ScoreSound, false);\r\n            // firebase\r\n            firebase.database().ref(`GameResult/Round2`).set({\r\n                player1: arr2[0],\r\n                player2: arr2[1],\r\n                player3: arr2[2],\r\n                player4: arr2[3],\r\n                player5: arr2[4],\r\n            });\r\n        }, 5);\r\n        this.scheduleOnce(() => {\r\n            cc.director.loadScene(\"GameStage4\");\r\n        }, 10);\r\n    }\r\n\r\n    GetPlayerState(){\r\n        // console.log(\"Get player state!\");\r\n        // 看每個玩家的身分。\r\n        let t = this;\r\n        for(let i=1; i<=5; i++){\r\n            firebase.database().ref(`game2/player${i}`).once('value', function (snapshot) {\r\n                if (snapshot.val() != null) {\r\n                    // console.log(\"player\",i, snapshot.val().type);\r\n                    t.P_prevstate[i] = t.P_state[i];\r\n                    t.P_state[i] = snapshot.val().type;\r\n                    if(snapshot.val().type == 'ghost'){\r\n                        t.GhostLabel.getComponent(cc.Label).string = \"P\"+i.toString();\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n    UpdateGroup(){\r\n        // 根據身分更新。\r\n        let t = this;\r\n        let ghost_id = -1, back_id = -1;\r\n        let change = false;\r\n        for(let i=1; i<=5; i++){\r\n            if(t.P_prevstate[i]==\"player\" && t.P_state[i]==\"ghost\"){ // 變成鬼\r\n                console.log(\"player\", i, \"become ghost!!!!!!!!!\");\r\n                ghost_id = i;\r\n                change = true;\r\n            }else if(t.P_prevstate[i]==\"ghost\" && t.P_state[i]==\"player\"){ // 變回人\r\n                console.log(\"player\", i, \"back to player!!!!!!!!!\");\r\n                back_id = i;\r\n                change = true;\r\n            }\r\n        }\r\n        if(change && !this.cooldown) {\r\n            this.cooldown = true;\r\n            this.choose_ghost(ghost_id, back_id);\r\n            this.scheduleOnce(()=>{\r\n                this.cooldown = false;\r\n            }, 3);\r\n            // 鬼BGM\r\n            if(ghost_id == this.current_user_number){\r\n                cc.audioEngine.stopMusic();\r\n                cc.audioEngine.playMusic(this.BGM1, true);\r\n                cc.audioEngine.setMusicVolume(1);\r\n            }else if(back_id == this.current_user_number){\r\n                cc.audioEngine.stopMusic();\r\n                cc.audioEngine.playMusic(this.BGM2, true);\r\n                cc.audioEngine.setMusicVolume(3);\r\n            }\r\n        }\r\n        // console.log(t.P_prevstate, t.P_state);\r\n\r\n    }\r\n}\r\n"]}