{"version":3,"sources":["assets\\Script\\GameManager\\GameManagerS4.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nimport Player from \"../Player\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\ndeclare const firebase: any;\r\n\r\n@ccclass\r\nexport default class GameManagerS4 extends cc.Component {\r\n\r\n\r\n    @property(cc.Node)\r\n    loadingBG: cc.Node = null;\r\n\r\n    player_node1: cc.Node = null;\r\n    player_node2: cc.Node = null;\r\n    player_node3: cc.Node = null;\r\n    player_node4: cc.Node = null;\r\n    player_node5: cc.Node = null;\r\n\r\n    private physicManager: cc.PhysicsManager = null;\r\n\r\n    onLoad () {\r\n        this.physicManager = cc.director.getPhysicsManager();\r\n        this.physicManager.enabled = true;\r\n        this.physicManager.gravity = cc.v2(0, 0);\r\n    }\r\n\r\n    start () {\r\n\r\n        this.loadingBG.active = true;\r\n        // 一開始所有玩家都不能動\r\n        this.player_node1 = cc.find(\"Canvas/PlayerContainer/player1\");\r\n        this.player_node2 = cc.find(\"Canvas/PlayerContainer/player2\");\r\n        this.player_node3 = cc.find(\"Canvas/PlayerContainer/player3\");\r\n        this.player_node4 = cc.find(\"Canvas/PlayerContainer/player4\");\r\n        this.player_node5 = cc.find(\"Canvas/PlayerContainer/player5\");\r\n        if (this.player_node1) this.player_node1.getComponent(Player).moveable = false;\r\n        if (this.player_node2) this.player_node2.getComponent(Player).moveable = false;\r\n        if (this.player_node3) this.player_node3.getComponent(Player).moveable = false;\r\n        if (this.player_node4) this.player_node4.getComponent(Player).moveable = false;\r\n        if (this.player_node5) this.player_node5.getComponent(Player).moveable = false;\r\n        this.scheduleOnce(() => {\r\n            this.loadingBG.active = false;\r\n            if (this.player_node1) this.player_node1.getComponent(Player).moveable = true;\r\n            if (this.player_node2) this.player_node2.getComponent(Player).moveable = true;\r\n            if (this.player_node3) this.player_node3.getComponent(Player).moveable = true;\r\n            if (this.player_node4) this.player_node4.getComponent(Player).moveable = true;\r\n            if (this.player_node5) this.player_node5.getComponent(Player).moveable = true;\r\n        }, 2.5);        \r\n        this.Init_player();\r\n    }\r\n\r\n    // update (dt) {}\r\n\r\n    \r\n    Init_player(){\r\n        let handle = this;\r\n        // initialize players        \r\n        for (let i = 1; i <= 5; i++) {\r\n            firebase.database().ref(`player_data/player${i}`).once('value', function (snapshot) { // 如果玩家存在\r\n                if (snapshot.val() != null) {\r\n                    cc.find(`Canvas/PlayerContainer/player${i}`).active = true;\r\n                    firebase.database().ref(`player_data/player${i}/state_value/moveDirX`).set({ Dir: 0 })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/moveDirY`).set({ Dir: 0 })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/premoveDirX`).set({ Dir: 0 })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/moveable`).set({ moveable: \"true\" })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/X`).set({ x: -656 })\r\n                    firebase.database().ref(`player_data/player${i}/state_value/Y`).set({ y: -16 })\r\n                }\r\n            })\r\n        }\r\n        // initial End\r\n    }\r\n}\r\n"]}